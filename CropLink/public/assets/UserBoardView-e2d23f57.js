import{d as F,r as T,a5 as ie,a6 as Pe,a7 as Ae,D as E,a8 as le,a9 as Te,o as z,N as Le,aa as Ve,ab as U,ac as ce,ad as Fe,F as P,ae as Ee,af as je,ag as ge,ah as Be,ai as ke,aj as ne,ak as Y,al as ae,am as De,an as Ue,ao as te,ap as J,e as n,f,j as e,m as L,s as V,u as xe,J as oe,n as g,L as M,z as O,A as R,t as w,B as x,a0 as re,w as K,i as H,$ as Oe,a1 as de,y as se,a as W,a3 as G,c as Z,p as N,q as ue,l as Q,V as Me,U as Ne,T as Ge,W as q,H as Ie,aq as he}from"./index-a935e8ad.js";import{I as ze}from"./ImageCarousel-fbeacc5f.js";import{r as be,a as ye,b as $e,c as ve}from"./PencilIcon-0567f33c.js";import{_ as Ye}from"./BuyerAdCard.vue_vue_type_script_setup_true_lang-5b32af86.js";import{_ as Je}from"./BidCard.vue_vue_type_script_setup_true_lang-8eefbbea.js";import{R as qe,h as We,y as pe,M as He}from"./menu-14981356.js";import{r as _e}from"./XMarkIcon-c8cae34a.js";let Ke=F({props:{onFocus:{type:Function,required:!0}},setup(s){let C=T(!0);return()=>C.value?ie(Ae,{as:"button",type:"button",features:Pe.Focusable,onFocus(d){d.preventDefault();let o,c=50;function t(){var r;if(c--<=0){o&&cancelAnimationFrame(o);return}if((r=s.onFocus)!=null&&r.call(s)){C.value=!1,cancelAnimationFrame(o);return}o=requestAnimationFrame(t)}o=requestAnimationFrame(t)}}):null}});var Qe=(s=>(s[s.Forwards=0]="Forwards",s[s.Backwards=1]="Backwards",s))(Qe||{}),Xe=(s=>(s[s.Less=-1]="Less",s[s.Equal=0]="Equal",s[s.Greater=1]="Greater",s))(Xe||{});let Re=Symbol("TabsContext");function fe(s){let C=ge(Re,null);if(C===null){let d=new Error(`<${s} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,fe),d}return C}let we=Symbol("TabsSSRContext"),Ze=F({name:"TabGroup",emits:{change:s=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(s,{slots:C,attrs:d,emit:o}){var c;let t=T((c=s.selectedIndex)!=null?c:s.defaultIndex),r=T([]),y=T([]),A=E(()=>s.selectedIndex!==null),S=E(()=>A.value?s.selectedIndex:t.value);function I(a){var l;let m=le($.tabs.value,U),p=le($.panels.value,U),v=m.filter(_=>{var i;return!((i=U(_))!=null&&i.hasAttribute("disabled"))});if(a<0||a>m.length-1){let _=ne(t.value===null?0:Math.sign(a-t.value),{[-1]:()=>1,0:()=>ne(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),i=ne(_,{0:()=>m.indexOf(v[0]),1:()=>m.indexOf(v[v.length-1])});i!==-1&&(t.value=i),$.tabs.value=m,$.panels.value=p}else{let _=m.slice(0,a),i=[...m.slice(a),..._].find(u=>v.includes(u));if(!i)return;let b=(l=m.indexOf(i))!=null?l:$.selectedIndex.value;b===-1&&(b=$.selectedIndex.value),t.value=b,$.tabs.value=m,$.panels.value=p}}let $={selectedIndex:E(()=>{var a,l;return(l=(a=t.value)!=null?a:s.defaultIndex)!=null?l:null}),orientation:E(()=>s.vertical?"vertical":"horizontal"),activation:E(()=>s.manual?"manual":"auto"),tabs:r,panels:y,setSelectedIndex(a){S.value!==a&&o("change",a),A.value||I(a)},registerTab(a){var l;if(r.value.includes(a))return;let m=r.value[t.value];r.value.push(a),r.value=le(r.value,U);let p=(l=r.value.indexOf(m))!=null?l:t.value;p!==-1&&(t.value=p)},unregisterTab(a){let l=r.value.indexOf(a);l!==-1&&r.value.splice(l,1)},registerPanel(a){y.value.includes(a)||(y.value.push(a),y.value=le(y.value,U))},unregisterPanel(a){let l=y.value.indexOf(a);l!==-1&&y.value.splice(l,1)}};Te(Re,$);let j=T({tabs:[],panels:[]}),k=T(!1);z(()=>{k.value=!0}),Te(we,E(()=>k.value?null:j.value));let h=E(()=>s.selectedIndex);return z(()=>{Le([h],()=>{var a;return I((a=s.selectedIndex)!=null?a:s.defaultIndex)},{immediate:!0})}),Ve(()=>{if(!A.value||S.value==null||$.tabs.value.length<=0)return;let a=le($.tabs.value,U);a.some((l,m)=>U($.tabs.value[m])!==U(l))&&$.setSelectedIndex(a.findIndex(l=>U(l)===U($.tabs.value[S.value])))}),()=>{let a={selectedIndex:t.value};return ie(P,[r.value.length<=0&&ie(Ke,{onFocus:()=>{for(let l of r.value){let m=U(l);if((m==null?void 0:m.tabIndex)===0)return m.focus(),!0}return!1}}),ce({theirProps:{...d,...Fe(s,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:C,attrs:d,name:"TabGroup"})])}}}),et=F({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(s,{attrs:C,slots:d}){let o=fe("TabList");return()=>{let c={selectedIndex:o.selectedIndex.value},t={role:"tablist","aria-orientation":o.orientation.value};return ce({ourProps:t,theirProps:s,slot:c,attrs:C,slots:d,name:"TabList"})}}}),Se=F({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${Ee()}`}},setup(s,{attrs:C,slots:d,expose:o}){let c=fe("Tab"),t=T(null);o({el:t,$el:t}),z(()=>c.registerTab(t)),je(()=>c.unregisterTab(t));let r=ge(we),y=E(()=>{if(r.value){let l=r.value.tabs.indexOf(s.id);return l===-1?r.value.tabs.push(s.id)-1:l}return-1}),A=E(()=>{let l=c.tabs.value.indexOf(t);return l===-1?y.value:l}),S=E(()=>A.value===c.selectedIndex.value);function I(l){var m;let p=l();if(p===ae.Success&&c.activation.value==="auto"){let v=(m=Ue(t))==null?void 0:m.activeElement,_=c.tabs.value.findIndex(i=>U(i)===v);_!==-1&&c.setSelectedIndex(_)}return p}function $(l){let m=c.tabs.value.map(p=>U(p)).filter(Boolean);if(l.key===Y.Space||l.key===Y.Enter){l.preventDefault(),l.stopPropagation(),c.setSelectedIndex(A.value);return}switch(l.key){case Y.Home:case Y.PageUp:return l.preventDefault(),l.stopPropagation(),I(()=>te(m,J.First));case Y.End:case Y.PageDown:return l.preventDefault(),l.stopPropagation(),I(()=>te(m,J.Last))}if(I(()=>ne(c.orientation.value,{vertical(){return l.key===Y.ArrowUp?te(m,J.Previous|J.WrapAround):l.key===Y.ArrowDown?te(m,J.Next|J.WrapAround):ae.Error},horizontal(){return l.key===Y.ArrowLeft?te(m,J.Previous|J.WrapAround):l.key===Y.ArrowRight?te(m,J.Next|J.WrapAround):ae.Error}}))===ae.Success)return l.preventDefault()}let j=T(!1);function k(){var l;j.value||(j.value=!0,!s.disabled&&((l=U(t))==null||l.focus({preventScroll:!0}),c.setSelectedIndex(A.value),De(()=>{j.value=!1})))}function h(l){l.preventDefault()}let a=Be(E(()=>({as:s.as,type:C.type})),t);return()=>{var l;let m={selected:S.value},{id:p,...v}=s,_={ref:t,onKeydown:$,onMousedown:h,onClick:k,id:p,role:"tab",type:a.value,"aria-controls":(l=U(c.panels.value[A.value]))==null?void 0:l.id,"aria-selected":S.value,tabIndex:S.value?0:-1,disabled:s.disabled?!0:void 0};return ce({ourProps:_,theirProps:v,slot:m,attrs:C,slots:d,name:"Tab"})}}}),X=F({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${Ee()}`},tabIndex:{type:Number,default:0}},setup(s,{attrs:C,slots:d,expose:o}){let c=fe("TabPanel"),t=T(null);o({el:t,$el:t}),z(()=>c.registerPanel(t)),je(()=>c.unregisterPanel(t));let r=ge(we),y=E(()=>{if(r.value){let I=r.value.panels.indexOf(s.id);return I===-1?r.value.panels.push(s.id)-1:I}return-1}),A=E(()=>{let I=c.panels.value.indexOf(t);return I===-1?y.value:I}),S=E(()=>A.value===c.selectedIndex.value);return()=>{var I;let $={selected:S.value},{id:j,tabIndex:k,...h}=s,a={ref:t,id:j,role:"tabpanel","aria-labelledby":(I=U(c.tabs.value[A.value]))==null?void 0:I.id,tabIndex:S.value?k:-1};return!S.value&&s.unmount&&!s.static?ie(Ae,{as:"span",...a}):ce({ourProps:a,theirProps:h,slot:$,attrs:C,slots:d,features:ke.Static|ke.RenderStrategy,visible:S.value,name:"TabPanel"})}}});function tt(s,C){return n(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})])}const st={class:"relative bg-white p-2 rounded-xl shadow transition-shadow duration-300 hover:shadow-xl"},lt={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},ot={class:"relative w-full h-32 sm:h-52 sm:bg-gray-200 rounded-xl overflow-hidden"},at={key:1,class:"flex items-center justify-center h-full"},nt=e("p",{class:"text-gray-500"},"No Image Available",-1),it=[nt],ct={class:"sm:mt-2 space-y-2"},rt={class:"text-lg sm:text-2xl font-bold"},dt={class:"flex flex-col gap-2 justify-between"},ut={key:0,class:"flex flex-row gap-4 items-center"},vt=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),ft=e("p",{class:"text-sm text-green-500"},"LIVE",-1),mt=[vt,ft],ht={key:1,class:"flex flex-row gap-4 items-center"},pt=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),_t=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),gt=[pt,_t],xt={class:"text-sm bg-slate-200/50 p-2 italic rounded-md"},bt={class:"flex flex-col justify-between w-full"},yt={class:"flex flex-row gap-2 text-sm justify-between gap-2"},$t={class:"font-semibold truncate"},wt={class:"flex flex-row gap-2 text-sm justify-between gap-2"},Ct={class:"font-semibold truncate"},Tt={class:"flex justify-between sm:justify-end sm:space-x-4 mt-4"},kt=F({__name:"SellerAdDashboardCard",props:{ad:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit"],setup(s,{emit:C}){const d=L().NOTIFICATION_TYPES,{modals:o,notifications:c}=V(L()),t=xe(),r=s,y=T(!1),A=async a=>{if(!a)return;const{callFunction:l}=se("postAd",{adId:a},y,void 0,void 0,()=>{c.value.show=!0,c.value.type=d.SUCCESS,c.value.message="Ad is live!"},m=>{c.value.show=!0,c.value.type=d.ERROR,c.value.message="Error while posting ad, please try again later"});await l()},S=async a=>{if(!a)return;const{callFunction:l}=se("takedownAd",{adId:a},y,void 0,void 0,()=>{c.value.show=!0,c.value.type=d.SUCCESS,c.value.message="Ad taken down!"},m=>{c.value.show=!0,c.value.type=d.ERROR,c.value.message="Error while taken down ad, please try again later"});await l()},I=async a=>{a&&(console.log("removeAd",a),o.value.confirmremove=!0,o.value.context={adId:a,__key:"ad"})},$=a=>{a&&t.push({name:"ad",params:{adId:a}})},j=async a=>{a&&(console.log("removeAd",a),o.value.editad=!0,o.value.context=r.ad)},k=a=>{a&&t.push({name:"messaging",params:{adId:a}})},h=a=>{const l=new Date,m=a.toDate(),p=l.getTime()-m.getTime(),v=Math.floor(p/1e3),_=Math.floor(v/60),i=Math.floor(_/60),b=Math.floor(i/24);return b>1?`${b} days ago`:b==1?`${b} day ago`:i>0?`${i} hours ago`:_>0?`${_} minutes ago`:v>0?`${v} seconds ago`:"just now"};return(a,l)=>{const m=oe("currency");return n(),f("div",st,[y.value?(n(),f("div",lt,[g(M,{isLoading:y.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",ot,[s.ad.images&&s.ad.images.length>0?(n(),R(ze,{key:0,images:s.ad.resizedImages,class:"h-32 sm:h-full object-cover"},null,8,["images"])):(n(),f("div",at,it))]),e("div",ct,[e("h3",rt,w(s.ad.variety),1),e("div",dt,[s.ad.live?(n(),f("div",ut,mt)):(n(),f("div",ht,gt)),e("p",xt,w(x(re)(s.ad.createdAt)?h(s.ad.createdAt):a.gig.createdAt),1)]),e("div",bt,[e("div",yt,[K((n(),f("p",$t,[H("/ton")])),[[m,s.ad.pricePerTon]])]),e("div",wt,[e("p",Ct,w(s.ad.tons)+" tons",1)])]),e("div",Tt,[s.showButtons?(n(),f(P,{key:0},[s.ad.live?O("",!0):(n(),R(x(be),{key:0,class:"h-5 w-5 text-cyan-600",onClick:l[0]||(l[0]=p=>A(s.ad.id)),title:"Post ad'"})),s.ad.live?(n(),R(x(ye),{key:1,class:"h-5 w-5 text-cyan-600",onClick:l[1]||(l[1]=p=>S(s.ad.id)),title:"Take down ad"})):O("",!0),s.ad.status=="sold"?(n(),R(x(Oe),{key:2,class:"h-5 w-5 text-cyan-600",onClick:l[2]||(l[2]=p=>k(s.ad.id)),title:"Contact"})):O("",!0),g(x(de),{class:"h-5 w-5 text-cyan-600",onClick:l[3]||(l[3]=p=>I(s.ad.id)),title:"Remove"}),g(x($e),{class:"h-5 w-5 text-cyan-600",onClick:l[4]||(l[4]=p=>j(s.ad.id)),title:"Edit"})],64)):O("",!0),g(x(ve),{class:"h-5 w-5 text-cyan-600",onClick:l[5]||(l[5]=p=>$(s.ad.id)),title:"View"})])])])}}}),It={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-5"},St={class:"p-1 sm:p-2"},At=e("span",{class:"text-sm font-medium text-slate-300"},"Created",-1),Et={class:"text-4xl font-bold text-slate-500"},jt={class:"p-1 sm:p-2"},Ot=e("span",{class:"text-sm font-medium text-slate-300"},"Live",-1),Nt={class:"text-4xl font-bold text-slate-500"},Rt={class:"p-1 sm:p-2 relative"},Pt=e("span",{class:"text-sm font-medium text-slate-300"},"Views",-1),Lt={class:"text-4xl font-bold text-slate-500"},Vt={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Ft={class:"p-1 sm:p-2 relative"},Bt=e("span",{class:"text-sm font-medium text-slate-300"},"Bids",-1),Dt={class:"text-4xl font-bold text-slate-500"},Ut={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Mt={class:"p-1 sm:p-2 flex items-center justify-center"},Gt={key:0,class:"p-2 sm:p-4 grid gap-2 sm:gap-4 grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},zt={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},Yt=e("div",{class:"italic"},"No ads found",-1),Jt=[Yt],qt={key:2},Wt=F({__name:"SellerContentComponent",setup(s){const{user:C}=V(W()),{modals:d,notifications:o}=V(L()),c=L().NOTIFICATION_TYPES,t=T([]),r=T(!1),{subscribe:y,unsubscribe:A}=G("ads",[["uid","==",C.value.uid]],["createdAt","desc"],v=>{t.value.docs=v,t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:{}},v=>{o.value.show=!0,o.value.type=c.ERROR,o.value.message="Error loading ads, please try again later."},r,()=>{},()=>{},v=>{o.value.show=!0,o.value.type=c.SUCCESS,o.value.message="Ad has been created."},v=>{o.value.show=!0,o.value.type=c.SUCCESS,o.value.message="Ad has been removed."});z(async()=>{y(),k(),m()}),Z(()=>{A(),h(),p()});const S=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.live==!0).length),I=()=>{d.value.addad=!0},$=T(0),j=T(!1),{subscribe:k,unsubscribe:h}=G("bids",[["sellerId","==",C.value.uid]],["createdAt","desc"],v=>{$.value=v.length},void 0,j),a=T(0),l=T(!1),{subscribe:m,unsubscribe:p}=G("ads",[["uid","==",C.value.uid]],["createdAt","desc"],v=>{let _=0;v.forEach(i=>{_+=i.viewCount?i.viewCount:0}),a.value=_},void 0,l);return(v,_)=>(n(),f(P,null,[e("div",It,[e("div",St,[At,e("p",Et,w(t.value.docs&&t.value.docs.length),1)]),e("div",jt,[Ot,e("p",Nt,w(S.value),1)]),e("div",Rt,[Pt,e("p",Lt,w(a.value),1),l.value?(n(),f("div",Vt,[g(M,{isLoading:l.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Ft,[Bt,e("p",Dt,w($.value),1),j.value?(n(),f("div",Ut,[g(M,{isLoading:j.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Mt,[g(ue,{onClick:I,classes:"w-full"},{default:N(()=>[H("Create ad")]),_:1})])]),t.value.docs&&t.value.docs.length>0&&!r.value?(n(),f("span",Gt,[(n(!0),f(P,null,Q(t.value.docs,(i,b)=>(n(),R(kt,{key:b,ad:i},null,8,["ad"]))),128))])):t.value.docs&&t.value.docs.length==0&&!r.value?(n(),f("div",zt,Jt)):(n(),f("div",qt,[g(M,{isLoading:r.value},null,8,["isLoading"])]))],64))}}),Ht={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-5"},Kt={class:"p-2"},Qt=e("span",{class:"text-sm font-medium text-slate-300"},"Number of ads",-1),Xt={class:"text-4xl font-bold text-slate-500"},Zt={class:"p-2"},es=e("span",{class:"text-sm font-medium text-slate-300"},"Number of live ads",-1),ts={class:"text-4xl font-bold text-slate-500"},ss=e("div",{class:"p-2"},[e("span",{class:"text-sm font-medium text-slate-300"},"Total views"),e("p",{class:"text-4xl font-bold text-slate-500"},"0")],-1),ls={class:"p-2 flex items-center justify-center"},os={key:0,class:"grid grid-flow-col gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},as={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},ns=e("div",{class:"italic"},"No ads found",-1),is=[ns],cs={key:2},rs=F({__name:"BuyerContentComponent",setup(s){const{user:C}=V(W()),{modals:d,notifications:o}=V(L()),c=L().NOTIFICATION_TYPES,t=T([]),r=T(!1),{subscribe:y,unsubscribe:A}=G("ads",[["uid","==",C.value.uid]],["createdAt","desc"],$=>{t.value.docs=$,t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:{}},$=>{o.value.show=!0,o.value.type=c.ERROR,o.value.message="Error loading ads, please try again later."},r,()=>{},()=>{},$=>{o.value.show=!0,o.value.type=c.SUCCESS,o.value.message="Ad has been created."},$=>{o.value.show=!0,o.value.type=c.SUCCESS,o.value.message="Ad has been removed."});z(async()=>{y()}),Z(()=>{A()});const S=()=>{d.value.addad=!0},I=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter($=>$.live==!0).length);return($,j)=>(n(),f(P,null,[e("div",Ht,[e("div",Kt,[Qt,e("p",Xt,w(t.value.docs&&t.value.docs.length),1)]),e("div",Zt,[es,e("p",ts,w(I.value),1)]),ss,e("div",ls,[g(ue,{onClick:S,classes:"w-32 p-2"},{default:N(()=>[H("Create an ad")]),_:1})])]),t.value.docs&&t.value.docs.length>0&&!r.value?(n(),f("span",os,[(n(!0),f(P,null,Q(t.value.docs,(k,h)=>(n(),R(Ye,{key:h,ad:k},null,8,["ad"]))),128))])):O("",!0),t.value.docs&&t.value.docs.length==0&&!r.value?(n(),f("div",as,is)):(n(),f("div",cs,[g(M,{isLoading:r.value},null,8,["isLoading"])]))],64))}}),ds={key:0,class:"grid grid-flow-row space-y-4"},us={key:1},vs={key:2,class:"h-96 p-2 flex items-center justify-center"},fs=e("p",{class:"italic"},"No bids yet",-1),ms=[fs],hs=F({__name:"BidContentComponent",setup(s){const{user:C}=V(W()),d=T([]),o=T(!1),c=async()=>{o.value=!0,d.value=await Me("bids","buyerId","==",C.value.uid,["createdAt","desc"],10),o.value=!1};return z(async()=>{await c()}),(t,r)=>d.value.docs&&d.value.docs.length>0&&!o.value?(n(),f("span",ds,[(n(!0),f(P,null,Q(d.value.docs,y=>(n(),R(Je,{bid:y},null,8,["bid"]))),256))])):o.value?(n(),f("div",us,[g(M,{isLoading:o.value},null,8,["isLoading"])])):(n(),f("span",vs,ms))}}),ps={class:"bg-white rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4 relative"},_s={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},gs={class:"flex flex-col sm:flex-row justify-between p-2 gap-2 sm:p-4"},xs={key:0,class:"flex flex-row gap-4 items-center"},bs=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),ys=e("p",{class:"text-sm text-green-500"},"LIVE",-1),$s=[bs,ys],ws={key:1,class:"flex flex-row gap-4 items-center"},Cs=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),Ts=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),ks=[Cs,Ts],Is={class:"text-sm bg-slate-200/50 p-2 italic rounded-md"},Ss={class:"flex flex-row border-top"},As={class:"text-lg capitalize my-2 pl-2 sm:pl-4 truncate"},Es={class:"flex flex-row gap-1 pl-2 sm:pl-4 mb-2"},js={class:"text-sm truncate italic text-slate-500"},Os={class:"flex flex-row gap-4 p-2 sm:p-4"},Ns={class:"text-sm truncate md:text-clip"},Rs={class:"flex flex-col gap-2 divide-y px-2"},Ps={class:"flex flex-col p-2 justify-between"},Ls=e("p",{class:"text-xs italic"},"Milestones",-1),Vs={class:"text-2xl"},Fs={class:"flex flex-col p-2 justify-between"},Bs=e("p",{class:"text-xs italic"},"Total",-1),Ds={class:"text-xl sm:text-2xl"},Us={key:1,class:"w-full flex justify-end gap-4 pr-4 pb-4"},Ms=F({__name:"GigDashboardCard",props:{gig:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit","remove"],setup(s,{emit:C}){const{notifications:d,modals:o}=V(L()),c=L().NOTIFICATION_TYPES,t=C,r=s,y=T(!1),A=async a=>{const{callFunction:l}=se("postGigPost",{gigId:a},y,void 0,void 0,()=>{d.value.show=!0,d.value.type=c.SUCCESS,d.value.message="Gig posted successfully"},()=>{d.value.show=!0,d.value.type=c.ERROR,d.value.message="An error occured while posting gig, please try again later"});await l()},S=async a=>{const{callFunction:l}=se("takeDownGigPost",{gigId:a},y,void 0,void 0,()=>{d.value.show=!0,d.value.type=c.SUCCESS,d.value.message="Gig taken down successfully"},()=>{d.value.show=!0,d.value.type=c.ERROR,d.value.message="An error occured while taking down the gig, please try again later"});await l()},I=E(()=>!r.gig.milestones||r.gig.milestones.length===0?0:r.gig.milestones.reduce((a,l)=>a+l.price,0)),$=a=>{const l=new Date,m=a.toDate(),p=l.getTime()-m.getTime(),v=Math.floor(p/1e3),_=Math.floor(v/60),i=Math.floor(_/60),b=Math.floor(i/24);return b>1?`${b} days ago`:b==1?`${b} day ago`:i>0?`${i} hours ago`:_>0?`${_} minutes ago`:v>0?`${v} seconds ago`:"just now"},j=a=>{a&&(o.value.viewgig=!0,o.value.context.__key=a)},k=a=>{t("edit",a)},h=a=>{t("remove",a)};return(a,l)=>{const m=oe("currency");return n(),f("span",ps,[y.value?(n(),f("div",_s,[g(M,{isLoading:y.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",gs,[s.gig.live?(n(),f("div",xs,$s)):(n(),f("div",ws,ks)),e("p",Is,w(x(re)(s.gig.createdAt)?$(s.gig.createdAt):s.gig.createdAt),1)]),e("div",Ss,[e("p",As,w(s.gig.title),1)]),e("div",Es,[g(x(Ne),{class:"w-5 h-5 text-slate-500"}),e("p",js,w(s.gig.location),1)]),e("div",Os,[e("p",Ns,w(s.gig.description.substring(0,197)+"..."),1)]),e("div",Rs,[e("div",Ps,[Ls,e("p",Vs,w(s.gig.milestones.length),1)]),e("div",Fs,[Bs,K(e("p",Ds,null,512),[[m,I.value]])])]),s.showButtons?(n(),f("div",Us,[s.showButtons?(n(),f(P,{key:0},[s.gig.live?O("",!0):(n(),R(x(be),{key:0,onClick:l[0]||(l[0]=p=>A(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})),s.gig.live?(n(),R(x(ye),{key:1,onClick:l[1]||(l[1]=p=>S(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})):O("",!0),g(x(de),{onClick:l[2]||(l[2]=p=>h(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"}),g(x($e),{onClick:l[3]||(l[3]=p=>k(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})],64)):O("",!0),g(x(ve),{onClick:l[4]||(l[4]=p=>j(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})])):O("",!0)])}}}),Gs={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-4 sm:grid-cols-5"},zs={class:"p-2 h-16"},Ys=e("span",{class:"text-sm font-medium text-slate-300"},"Created",-1),Js={class:"text-2xl font-bold text-slate-500"},qs={class:"p-2 h-16"},Ws=e("span",{class:"text-sm font-medium text-slate-300"},"Live",-1),Hs={class:"text-2xl font-bold text-slate-500"},Ks={class:"p-2 h-16"},Qs=e("span",{class:"text-sm font-medium text-slate-300"},"Views",-1),Xs={class:"text-2xl font-bold text-slate-500"},Zs={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},el={class:"p-2 flex-col justify-between h-16 hidden sm:flex"},tl=e("span",{class:"text-sm font-medium text-slate-300"},"Total",-1),sl={class:"text-2xl font-bold text-slate-500"},ll={class:"p-2 flex items-center justify-center"},ol={class:"p-2 sm:p-4 grid gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},al={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},nl=e("p",{class:"italic"},"No gig posts",-1),il=[nl],cl={key:2},rl=F({__name:"GigsContentComponent",setup(s){const{user:C}=V(W()),{modals:d,notifications:o}=V(L()),c=L().NOTIFICATION_TYPES,t=T([]),r=T(!1),{subscribe:y,unsubscribe:A}=G("gigs",[["posterId","==",C.value.uid]],["createdAt","desc"],p=>{t.value.docs=p},p=>{o.value.show=!0,o.value.type=c.ERROR,o.value.message="Error loading gigs, please try again later."},r,()=>{},()=>{},p=>{o.value.show=!0,o.value.type=c.SUCCESS,o.value.message="Gig has been created."},p=>{o.value.show=!0,o.value.type=c.SUCCESS,o.value.message="Gig has been removed."}),S=()=>{d.value.addgig=!0},I=p=>{d.value.confirmremove=!0,d.value.context={__key:"gig",gigId:p}},$=p=>{d.value.editgig=!0;const v=t.value.docs.find(_=>_.gigId==p);d.value.context=v};z(async()=>{y(),l()}),Z(()=>{A(),m()});const j=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.reduce((p,v)=>v.milestones?p+v.milestones.reduce((_,i)=>_+i.price,0):p,0)),k=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(p=>p.live==!0).length),h=T(0),a=T(!1),{subscribe:l,unsubscribe:m}=G("ads",[["posterId","==",C.value.uid]],["createdAt","desc"],p=>{let v=0;p.forEach(_=>{v+=_.viewCount?_.viewCount:0}),h.value=v},void 0,a);return(p,v)=>{const _=oe("currency");return n(),f(P,null,[e("div",Gs,[e("div",zs,[Ys,e("p",Js,w(t.value.docs&&t.value.docs.length),1)]),e("div",qs,[Ws,e("p",Hs,w(k.value),1)]),e("div",Ks,[Qs,e("p",Xs,w(h.value),1),a.value?(n(),f("div",Zs,[g(M,{isLoading:a.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",el,[tl,K(e("p",sl,null,512),[[_,j.value]])]),e("div",ll,[g(ue,{classes:"w-full",onClick:S},{default:N(()=>[H(" Create gig ")]),_:1})])]),e("span",ol,[t.value.docs&&t.value.docs.length>0&&!r.value?(n(!0),f(P,{key:0},Q(t.value.docs,(i,b)=>(n(),R(Ms,{key:b,gig:i,onEdit:$,onRemove:I},null,8,["gig"]))),128)):t.value.docs&&t.value.docs.length==0&&!r.value?(n(),f("span",al,il)):(n(),f("div",cl,[g(M,{isLoading:r.value},null,8,["isLoading"])]))])],64)}}}),dl={class:"absolute top-2 left-0 text-right"},ul={class:"px-1 py-1"},vl={class:"px-1 py-1"},fl=F({__name:"ApplicationDropdownMenu",emits:["remove","view","contact"],setup(s,{emit:C}){return(d,o)=>(n(),f("div",dl,[g(x(He),{as:"div",class:"relative inline-block text-left"},{default:N(()=>[e("div",null,[g(x(qe),{class:"inline-flex w-full justify-center rounded-md px-4 py-2 text-sm font-medium text-bg/30 hover:bg-cyan-600/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75"},{default:N(()=>[H(" Options "),g(x(tt),{class:"-mr-1 ml-2 h-5 w-5 text-cyan-600 hover:text-cyan-600","aria-hidden":"true"})]),_:1})]),g(Ge,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:N(()=>[g(x(We),{class:"absolute right-0 mt-2 z-10 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:N(()=>[e("div",ul,[g(x(pe),null,{default:N(({active:c})=>[e("button",{class:q([c?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:o[0]||(o[0]=t=>d.$emit("contact"))},[g(x(Oe),{active:c,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),H(" Reach out ")],2)]),_:1}),g(x(pe),null,{default:N(({active:c})=>[e("button",{class:q([c?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:o[1]||(o[1]=t=>d.$emit("remove"))},[g(x(de),{active:c,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),H(" Remove ")],2)]),_:1})]),e("div",vl,[g(x(pe),null,{default:N(({active:c})=>[e("button",{class:q([c?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:o[2]||(o[2]=t=>d.$emit("view"))},[g(x(ve),{active:c,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),H(" View Application ")],2)]),_:1})])]),_:1})]),_:1})]),_:1})]))}}),ml={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-3"},hl={class:"p-2"},pl=e("span",{class:"text-sm font-medium text-slate-300"},"Recieved",-1),_l={class:"text-4xl font-bold text-slate-500"},gl={class:"p-2"},xl=e("span",{class:"text-sm font-medium text-slate-300"},"Gigs",-1),bl={class:"text-4xl font-bold text-slate-500"},yl={class:"p-2"},$l=e("span",{class:"text-sm font-medium text-slate-300"},"Jobs",-1),wl={class:"text-4xl font-bold text-slate-500"},Cl={class:"sm:p-4"},Tl={class:"flex flex-row gap-4 h-6 sm:mb-2 items-center p-4"},kl={class:"flex flex-row gap-2 items-center"},Il=e("p",{class:"text-sm font-medium text-slate-300"},"Gig",-1),Sl={class:"flex flex-row gap-2 items-center"},Al=e("p",{class:"text-sm font-medium text-slate-300"},"Job",-1),El={key:0,class:"table-fixed w-full border-collapse"},jl=e("thead",{class:"border-y"},[e("tr",{class:"text-left"},[e("th",{class:"py-4 hidden sm:table-cell"},"ID"),e("th",{class:"py-4"},"Name"),e("th",{class:"py-4 hidden sm:table-cell"},"Email"),e("th",{class:"py-4 hidden sm:table-cell"},"For"),e("th",{class:"py-4"},"Recieved"),e("th",{class:"py-4"},"Action")])],-1),Ol={class:"py-2 hidden sm:table-cell"},Nl={class:"py-2 capitalize truncate"},Rl={class:"py-2 truncate hidden sm:table-cell"},Pl={class:"py-2 hidden sm:table-cell"},Ll={class:"flex flex-row gap-2 items-center"},Vl={class:"pb-1 capitalize"},Fl={class:"py-2 italic text-xs sm:text-base"},Bl={class:"relative"},Dl={key:0},Ul={colspan:"6"},Ml=["src"],Gl={key:1,class:"h-96 p-2 flex items-center justify-center"},zl=e("p",{class:"italic"},"No application posts",-1),Yl=[zl],Jl={key:2},ql=F({__name:"ApplicationsContentComponent",setup(s){const{user:C}=V(W()),{modals:d,notifications:o,messaging:c}=V(L()),t=L().NOTIFICATION_TYPES,r=T([]),y=T(!1),{subscribe:A,unsubscribe:S}=G("applications",[["ownerId","==",C.value.uid]],["createdAt","desc"],i=>{r.value.docs=i},i=>{o.value.show=!0,o.value.type=t.ERROR,o.value.message="Error loading applications, please try again later."},y,()=>{},()=>{},i=>{o.value.show=!0,o.value.type=t.SUCCESS,o.value.message="A new application has been received."},i=>{o.value.show=!0,o.value.type=t.SUCCESS,o.value.message="Application has been removed."}),I=i=>{d.value.confirmremove=!0,d.value.context={__key:"application",applicationId:i}},$=T(""),j=i=>{var b;if(window.innerWidth<768){window.open((b=r.value.docs.find(u=>u.applicationId===i))==null?void 0:b.resume);return}if($.value===i){$.value="";return}$.value=i},k=()=>{console.log("loaded")},h=async i=>{console.log("onMessage",i.applicationId),c.value.show=!0,c.value.to={id:i.applicantId,name:i.name},c.value.context={__key:"application",application:i}};z(async()=>{A()}),Z(()=>{S()});const a=T(!1),l=T(!1),m=E(()=>r.value.docs?a.value&&l.value?r.value.docs:a.value?r.value.docs.filter(i=>i.parentType==="gig"):l.value?r.value.docs.filter(i=>i.parentType==="job"):r.value.docs:[]),p=i=>{const b=new Date,u=i.toDate(),B=b.getTime()-u.getTime(),D=Math.floor(B/1e3),ee=Math.floor(D/60),me=Math.floor(ee/60),Ce=Math.floor(me/24);return Ce>0?`${Ce} days ago`:me>0?`${me} hours ago`:ee>0?`${ee} minutes ago`:D>0?`${D} seconds ago`:"just now"},v=E(()=>r.value.docs?r.value.docs.filter(i=>i.parentType==="gig").length:0),_=E(()=>r.value.docs?r.value.docs.filter(i=>i.parentType==="job").length:0);return(i,b)=>(n(),f(P,null,[e("div",ml,[e("div",hl,[pl,e("p",_l,w(r.value.docs?r.value.docs.length:0),1)]),e("div",gl,[xl,e("p",bl,w(v.value),1)]),e("div",yl,[$l,e("p",wl,w(_.value),1)])]),e("div",Cl,[e("div",Tl,[e("div",kl,[K(e("input",{type:"checkbox",class:"w-4 h-4","onUpdate:modelValue":b[0]||(b[0]=u=>a.value=u)},null,512),[[Ie,a.value]]),Il]),e("div",Sl,[K(e("input",{type:"checkbox",class:"w-4 h-4","onUpdate:modelValue":b[1]||(b[1]=u=>l.value=u)},null,512),[[Ie,l.value]]),Al])]),r.value.docs&&r.value.docs.length>0&&!y.value?(n(),f("table",El,[jl,e("tbody",null,[(n(!0),f(P,null,Q(m.value,(u,B)=>(n(),f(P,{key:B},[e("tr",null,[e("td",Ol,w(u.applicationId.substring(0,5)),1),e("td",Nl,w(u.name),1),e("td",Rl,w(u.email),1),e("td",Pl,[e("div",Ll,[e("div",{class:q(["rounded-full w-2 h-2",{"bg-green-500":u.parentType=="gig","bg-blue-500":u.parentType=="job"}])},null,2),e("p",Vl,w(u.parentType),1)])]),e("td",Fl,w(x(re)(u.createdAt)?p(u.createdAt):u.createdAt),1),e("td",Bl,[g(fl,{onRemove:D=>I(u.applicationId),onView:D=>j(u.applicationId),onContact:D=>h(u)},null,8,["onRemove","onView","onContact"])])]),$.value==u.applicationId?(n(),f("tr",Dl,[e("td",Ul,[e("iframe",{ref_for:!0,ref:"iframeRef",src:u.resume,width:"100%",height:"500px",onLoad:k},null,40,Ml)])])):O("",!0)],64))),128))])])):r.value.docs&&r.value.docs.length==0&&!y.value?(n(),f("span",Gl,Yl)):(n(),f("div",Jl,[g(M,{isLoading:y.value},null,8,["isLoading"])]))])],64))}}),Wl={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-3"},Hl={class:"p-2"},Kl=e("span",{class:"text-sm font-medium text-slate-300"},"Pending",-1),Ql={class:"text-4xl font-bold text-slate-500"},Xl={class:"p-2"},Zl=e("span",{class:"text-sm font-medium text-slate-300"},"Accepted",-1),eo={class:"text-4xl font-bold text-slate-500"},to={class:"p-2"},so=e("span",{class:"text-sm font-medium text-slate-300"},"Rejected",-1),lo={class:"text-4xl font-bold text-slate-500"},oo={class:"sm:p-4"},ao={key:0,class:"table-fixed w-full border-collapse"},no=e("thead",{class:"border-b"},[e("tr",{class:"text-left"},[e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"Contract ID"),e("th",{class:"p-2 sm:pb-4"},"User"),e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"Ad ID"),e("th",{class:"p-2 sm:pb-4"},"Status"),e("th",{class:"p-2 sm:pb-4"},"Updated"),e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"Created"),e("th",{class:"p-2 sm:pb-4"},"Action")])],-1),io={class:"py-2 hidden sm:table-cell"},co={class:"py-2"},ro={class:"flex flex-row justify-start items-center"},uo=["src"],vo={class:"pl-2 truncate"},fo={class:"py-2 hidden sm:table-cell"},mo={class:"py-2"},ho={class:"flex flex-row sm:w-3/4 gap-1 sm:gap-2 items-center justify-start px-1"},po={class:"italic capitalize"},_o={class:"py-2"},go={class:"py-2 hidden sm:table-cell"},xo={class:"py-2 w-5"},bo=["onClick"],yo={key:1,class:"h-96 p-2 flex items-center justify-center"},$o=e("p",{class:"italic"},"No contracts yet",-1),wo=[$o],Co={key:2},To=F({__name:"ContractsContentComponent",setup(s){const C=xe(),d=L().NOTIFICATION_TYPES,{notifications:o}=V(L()),{user:c}=V(W()),t=T([]),r=T(!1);let y=[],A=[];const S=()=>{t.value.docs=[...y,...A]},{subscribe:I,unsubscribe:$}=G("contracts",[["sellerId","==",c.value.uid]],["createdAt","desc"],v=>{A=v,S()},v=>{o.value.show=!0,o.value.type=d.ERROR,o.value.message="Error loading contracts, please try again later."},r),{subscribe:j,unsubscribe:k}=G("contracts",[["buyerId","==",c.value.uid]],["createdAt","desc"],v=>{y=v,S()},v=>{o.value.show=!0,o.value.type=d.ERROR,o.value.message="Error loading contracts, please try again later."},r);z(async()=>{I(),j()}),Z(()=>{$(),k()});const h=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.status=="pending").length),a=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.status=="accepted").length),l=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.status=="rejected").length),m=v=>{const _=new Date,i=v.toDate(),b=_.getTime()-i.getTime(),u=Math.floor(b/1e3),B=Math.floor(u/60),D=Math.floor(B/60),ee=Math.floor(D/24);return ee>0?`${ee} days ago`:D>0?`${D} hours ago`:B>0?`${B} minutes ago`:u>0?`${u} seconds ago`:"just now"},p=v=>{C.push({name:"messaging",params:{adId:v}})};return(v,_)=>(n(),f(P,null,[e("div",Wl,[e("div",Hl,[Kl,e("p",Ql,w(h.value),1)]),e("div",Xl,[Zl,e("p",eo,w(a.value),1)]),e("div",to,[so,e("p",lo,w(l.value),1)])]),e("div",oo,[t.value.docs&&t.value.docs.length>0&&!r.value?(n(),f("table",ao,[no,e("tbody",null,[(n(!0),f(P,null,Q(t.value.docs,(i,b)=>(n(),f("tr",{key:b},[e("td",io,w(i.id.substring(0,5)),1),e("td",co,[e("div",ro,[e("img",{src:i.userSignature.profilePic,class:"w-8 h-8 rounded-full"},null,8,uo),e("p",vo,w(i.userSignature.name),1)])]),e("td",fo,w(i.adId.substring(0,5)),1),e("td",mo,[e("span",ho,[e("span",{class:q(["w-3 h-3 rounded-full",{"bg-green-500":i.status=="accepted","bg-red-500":i.status=="rejected","bg-yellow-500":i.status=="pending"}])},null,2),e("p",po,w(i.status),1)])]),e("td",_o,w(m(i.updatedAt)),1),e("td",go,w(m(i.createdAt)),1),e("td",xo,[e("button",{class:"text-cyan-600 font-bold italic",onClick:u=>p(i.adId)},"View",8,bo)])]))),128))])])):t.value.docs&&t.value.docs.length==0&&!r.value?(n(),f("div",yo,wo)):(n(),f("span",Co,[g(M,{isLoading:r.value},null,8,["isLoading"])]))])],64))}}),ko={class:"bg-white rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4 relative"},Io={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},So={class:"flex flex-col sm:flex-row justify-between p-2 gap-2 sm:p-4"},Ao={key:0,class:"flex flex-row gap-4 items-center"},Eo=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),jo=e("p",{class:"text-sm text-green-500"},"LIVE",-1),Oo=[Eo,jo],No={key:1,class:"flex flex-row gap-4 items-center"},Ro=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),Po=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),Lo=[Ro,Po],Vo={class:"text-sm bg-slate-200/50 p-2 italic rounded-md text-end"},Fo={class:"flex flex-row gap-4 bg-gradient-to-r from-blue-600/50 mb-2"},Bo={class:"text-xl capitalize my-2 text-white pl-2 sm:pl-4 truncate"},Do={class:"flex flex-row gap-1 pl-2 sm:pl-4 mb-2"},Uo={class:"text-sm truncate italic text-slate-500"},Mo={class:"flex flex-row gap-4 p-2 sm:p-4"},Go={class:"text-sm truncate md:text-clip"},zo={class:"flex flex-col gap-2 sm:gap-4 divide-y sm:px-2 sm:px-4 mb-2"},Yo={class:"flex flex-col p-2"},Jo=e("p",{class:"text-xs"}," Salary Min. ",-1),qo={class:"text-xl"},Wo={class:"flex flex-col p-2"},Ho=e("p",{class:"text-xs"}," Salary Max. ",-1),Ko={class:"text-xl"},Qo={class:"w-full flex justify-end gap-4 pr-4 pb-4"},Xo=F({__name:"JobDashboardCard",props:{job:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit","remove"],setup(s,{emit:C}){const{notifications:d,modals:o}=V(L()),c=L().NOTIFICATION_TYPES,t=C,r=T(!1),y=async k=>{const{callFunction:h}=se("postJobPost",{jobId:k},r,void 0,void 0,()=>{d.value.show=!0,d.value.type=c.SUCCESS,d.value.message="Job Posted"},()=>{d.value.show=!0,d.value.type=c.ERROR,d.value.message="An error occured during the process, please try again later"});await h()},A=async k=>{const{callFunction:h}=se("takeDownJobPost",{jobId:k},r,void 0,void 0,()=>{d.value.show=!0,d.value.type=c.SUCCESS,d.value.message="Job post is now down"},()=>{d.value.show=!0,d.value.type=c.ERROR,d.value.message="An error occured during the process, please try again later"});await h()},S=k=>{const h=new Date,a=k.toDate(),l=h.getTime()-a.getTime(),m=Math.floor(l/1e3),p=Math.floor(m/60),v=Math.floor(p/60),_=Math.floor(v/24);return _>1?`${_} days ago`:_==1?`${_} day ago`:v>0?`${v} hours ago`:p>0?`${p} minutes ago`:m>0?`${m} seconds ago`:"just now"},I=k=>{k&&(o.value.viewjob=!0,o.value.context.__key=k)},$=k=>{t("edit",k)},j=k=>{t("remove",k)};return(k,h)=>{const a=oe("currency");return n(),f("span",ko,[r.value?(n(),f("div",Io,[g(M,{isLoading:r.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",So,[s.job.live?(n(),f("div",Ao,Oo)):(n(),f("div",No,Lo)),e("p",Vo,w(x(re)(s.job.createdAt)?S(s.job.createdAt):s.job.createdAt),1)]),e("div",Fo,[e("p",Bo,w(s.job.title),1)]),e("div",Do,[g(x(Ne),{class:"w-5 h-5"}),e("p",Uo,w(s.job.location),1)]),e("div",Mo,[e("p",Go,w(s.job.description.substring(0,197)+"..."),1)]),e("div",zo,[e("div",Yo,[Jo,K(e("p",qo,null,512),[[a,s.job.salaryMin]])]),e("div",Wo,[Ho,K(e("p",Ko,null,512),[[a,s.job.salaryMax]])])]),e("div",Qo,[s.showButtons?(n(),f(P,{key:0},[s.job.live?O("",!0):(n(),R(x(be),{key:0,onClick:h[0]||(h[0]=l=>y(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})),s.job.live?(n(),R(x(ye),{key:1,onClick:h[1]||(h[1]=l=>A(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})):O("",!0),g(x(de),{onClick:h[2]||(h[2]=l=>j(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"}),g(x($e),{onClick:h[3]||(h[3]=l=>$(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})],64)):O("",!0),g(x(ve),{onClick:h[4]||(h[4]=l=>I(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})])])}}}),Zo={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-4"},ea={class:"p-2"},ta=e("span",{class:"text-sm font-medium text-slate-300"},"Created",-1),sa={class:"text-4xl font-bold text-slate-500"},la={class:"p-2"},oa=e("span",{class:"text-sm font-medium text-slate-300"},"Live",-1),aa={class:"text-4xl font-bold text-slate-500"},na={class:"p-2"},ia=e("span",{class:"text-sm font-medium text-slate-300"},"Views",-1),ca={class:"text-4xl font-bold text-slate-500"},ra={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},da={class:"p-2 flex items-center justify-center"},ua={class:"p-2 sm:p-4 grid gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},va={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},fa=e("p",{class:"italic"},"No job posts",-1),ma=[fa],ha={key:2},pa=F({__name:"JobsContentComponent",setup(s){const{user:C}=V(W()),{modals:d,notifications:o}=V(L()),c=L().NOTIFICATION_TYPES,t=T([]),r=T(!1),{subscribe:y,unsubscribe:A}=G("jobs",[["posterId","==",C.value.uid]],["createdAt","desc"],m=>{t.value.docs=m},m=>{o.value.show=!0,o.value.type=c.ERROR,o.value.message="Error loading jobs, please try again later."},r,()=>{},()=>{},m=>{o.value.show=!0,o.value.type=c.SUCCESS,o.value.message="Job has been created."},m=>{o.value.show=!0,o.value.type=c.SUCCESS,o.value.message="Job has been removed."}),S=()=>{d.value.addjob=!0},I=m=>{d.value.confirmremove=!0,d.value.context={__key:"job",jobId:m}},$=m=>{d.value.editjob=!0;const p=t.value.docs.find(v=>v.jobId==m);d.value.context=p},j=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(m=>m.live==!0).length);z(async()=>{y(),a()}),Z(()=>{A(),l()});const k=T(0),h=T(!1),{subscribe:a,unsubscribe:l}=G("ads",[["posterId","==",C.value.uid]],["createdAt","desc"],m=>{let p=0;m.forEach(v=>{p+=v.viewCount?v.viewCount:0}),k.value=p},void 0,h);return(m,p)=>(n(),f(P,null,[e("div",Zo,[e("div",ea,[ta,e("p",sa,w(t.value.docs&&t.value.docs.length),1)]),e("div",la,[oa,e("p",aa,w(j.value),1)]),e("div",na,[ia,e("p",ca,w(k.value),1),h.value?(n(),f("div",ra,[g(M,{isLoading:h.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",da,[g(ue,{classes:"w-full",onClick:S},{default:N(()=>[H(" Create job ")]),_:1})])]),e("span",ua,[t.value.docs&&t.value.docs.length>0&&!r.value?(n(!0),f(P,{key:0},Q(t.value.docs,(v,_)=>(n(),R(Xo,{key:_,job:v,onEdit:$,onRemove:I},null,8,["job"]))),128)):t.value.docs&&t.value.docs.length==0&&!r.value?(n(),f("span",va,ma)):(n(),f("div",ha,[g(M,{isLoading:r.value},null,8,["isLoading"])]))])],64))}}),_a={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-2 sm:grid-cols-4"},ga={class:"p-2 hidden"},xa=e("span",{class:"text-sm font-medium text-slate-300"},"Pending",-1),ba={class:"text-2xl truncate font-bold text-slate-500"},ya={class:"p-2"},$a=e("span",{class:"text-sm font-medium text-slate-300"},"Total Pending",-1),wa={class:"text-2xl truncate font-bold text-slate-500"},Ca={class:"p-2 hidden"},Ta=e("span",{class:"text-sm font-medium text-slate-300"},"Completed",-1),ka={class:"text-2xl truncate font-bold text-slate-500"},Ia={class:"p-2"},Sa=e("span",{class:"text-sm font-medium text-slate-300"},"Total Completed",-1),Aa={class:"text-2xl truncate font-bold text-slate-500"},Ea={class:"sm:p-4"},ja={key:0,class:"table-fixed w-full border-collapse"},Oa=e("thead",{class:"border-b"},[e("tr",{class:"text-left"},[e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"ID"),e("th",{class:"p-2 sm:pb-4"},"Parties"),e("th",{class:"p-2 sm:pb-4"},"Status"),e("th",{class:"p-2 sm:pb-4 text-center sm:text-left"},"Action")])],-1),Na={class:"py-2 hidden sm:table-cell"},Ra={key:0,class:"py-2 text-sm"},Pa={class:"truncate"},La={class:"truncate"},Va={class:"py-2 sm:text-base text-xs space-y-1"},Fa=e("p",null,"Sent",-1),Ba=e("p",null,"Recieved",-1),Da=e("p",null,"Disbursed",-1),Ua={class:"py-2 w-5 text-center sm:text-left"},Ma=["onClick"],Ga={key:1,class:"h-96 p-2 flex items-center justify-center"},za=e("p",{class:"italic"},"No transactions yet",-1),Ya=[za],Ja={key:2},qa=F({__name:"TransactionContentComponent",setup(s){const C=xe(),d=L().NOTIFICATION_TYPES,{notifications:o}=V(L()),{user:c}=V(W()),t=T([]),r=T(!1);let y=[],A=[];const S=()=>{t.value.docs=[...y,...A]},{subscribe:I,unsubscribe:$}=G("transactions",[["sellerId","==",c.value.uid]],["createdAt","desc"],_=>{A=_,S()},_=>{o.value.show=!0,o.value.type=d.ERROR,o.value.message="Error loading transactions, please try again later."},r),{subscribe:j,unsubscribe:k}=G("transactions",[["buyerId","==",c.value.uid]],["createdAt","desc"],_=>{y=_,S()},_=>{o.value.show=!0,o.value.type=d.ERROR,o.value.message="Error loading transactions, please try again later."},r);z(async()=>{I(),j()}),Z(()=>{$(),k()});const h=_=>{const i=_.items;if(!i||i.length===0)return!1;const b=i[0].schedule;if(!b||b.length===0)return!1;const u=b[0].status;return u||!1},a=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(_=>{const i=_.items;if(!i||i.length===0)return!1;const b=i[0].schedule;if(!b||b.length===0)return!1;const u=b[0].status;return u?u.payment_sent===!1:!1}).length),l=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(_=>{const i=_.items;if(!i||i.length===0)return!1;const b=i[0].schedule;if(!b||b.length===0)return!1;const u=b[0].status;return u?u.disbursed_to_beneficiary==!0:!1}).length),m=E(()=>{if(!t.value.docs||t.value.docs.length===0)return 0;const _=t.value.docs.filter(b=>{const u=b.items;if(!u||u.length===0)return!1;const B=u[0].schedule;if(!B||B.length===0)return!1;const D=B[0].status;return D?D.disbursed_to_beneficiary==!0:!1});let i=0;return _.forEach(b=>{i+=parseInt(b.items[0].schedule[0].amount)}),i}),p=E(()=>{if(!t.value.docs||t.value.docs.length===0)return 0;const _=t.value.docs.filter(b=>{const u=b.items;if(!u||u.length===0)return!1;const B=u[0].schedule;if(!B||B.length===0)return!1;const D=B[0].status;return D?D.payment_sent==!1:!1});let i=0;return _.forEach(b=>{i+=parseInt(b.items[0].schedule[0].amount)}),i}),v=(_,i)=>{C.push({name:"banking",params:{adId:_,contractId:i}})};return(_,i)=>{const b=oe("currency");return n(),f(P,null,[e("div",_a,[e("div",ga,[xa,e("p",ba,w(a.value),1)]),e("div",ya,[$a,K(e("p",wa,null,512),[[b,p.value]])]),e("div",Ca,[Ta,e("p",ka,w(l.value),1)]),e("div",Ia,[Sa,K(e("p",Aa,null,512),[[b,m.value]])])]),e("div",Ea,[t.value.docs&&t.value.docs.length>0&&!r.value?(n(),f("table",ja,[Oa,e("tbody",null,[(n(!0),f(P,null,Q(t.value.docs,(u,B)=>(n(),f("tr",{key:B,class:"text-left"},[e("td",Na,w(u.transaction_id),1),u.parties&&u.parties.length>1?(n(),f("td",Ra,[e("p",Pa,w(u.parties[0].customer),1),e("p",La,w(u.parties[1].customer),1)])):O("",!0),e("td",Va,[e("div",{class:q(["flex flex-row gap-2 items-center w-1/2 justify-between px-2 rounded-md",{"text-green-500":h(u).payment_sent==!0,"text-red-500":h(u).payment_sent==!1,"bg-green-500/20":h(u).payment_sent==!0,"bg-red-500/20":h(u).payment_sent==!1,"border border-green-500":h(u).payment_sent==!0,"border border-red-500":h(u).payment_sent==!1}])},[Fa,h(u).payment_sent==!0?(n(),R(x(he),{key:0,class:"w-4 h-4 text-green-500"})):(n(),R(x(_e),{key:1,class:"w-4 h-4 text-red-500"}))],2),e("div",{class:q(["flex flex-row gap-2 items-center w-1/2 justify-between px-2 rounded-md",{"text-green-500":h(u).payment_received==!0,"text-red-500":h(u).payment_received==!1,"bg-green-500/20":h(u).payment_received==!0,"bg-red-500/20":h(u).payment_received==!1,"border border-green-500":h(u).payment_received==!0,"border border-red-500":h(u).payment_received==!1}])},[Ba,h(u).payment_received==!0?(n(),R(x(he),{key:0,class:"w-4 h-4 text-green-500"})):(n(),R(x(_e),{key:1,class:"w-4 h-4 text-red-500"}))],2),e("div",{class:q(["flex flex-row gap-2 items-center w-1/2 justify-between px-2 rounded-md",{"text-green-500":h(u).disbursed_to_beneficiary==!0,"text-red-500":h(u).disbursed_to_beneficiary==!1,"bg-green-500/20":h(u).disbursed_to_beneficiary==!0,"bg-red-500/20":h(u).disbursed_to_beneficiary==!1,"border border-green-500":h(u).disbursed_to_beneficiary==!0,"border border-red-500":h(u).disbursed_to_beneficiary==!1}])},[Da,h(u).disbursed_to_beneficiary==!0?(n(),R(x(he),{key:0,class:"w-4 h-4 text-green-500"})):(n(),R(x(_e),{key:1,class:"w-4 h-4 text-red-500"}))],2)]),e("td",Ua,[e("button",{class:"text-cyan-600 font-bold italic",onClick:D=>v(u.adId,u.contractId)},"View",8,Ma)])]))),128))])])):t.value.docs&&t.value.docs.length==0&&!r.value?(n(),f("div",Ga,Ya)):(n(),f("span",Ja,[g(M,{isLoading:r.value},null,8,["isLoading"])]))])],64)}}}),Wa={class:"w-full"},Ha={key:0,class:"w-full"},ln=F({__name:"UserBoardView",setup(s){const{profile:C}=V(W()),d=W().ACCOUNT_TYPES,o=T(0),c={ADS:"Ads",CONTRACTS:"Contracts",TRANSACTIONS:"Transactions",JOBS:"Jobs",GIGS:"Gigs",APPLICATIONS:"Resumes"};return(t,r)=>(n(),f("div",Wa,[x(C)?(n(),f("div",Ha,[g(x(Ze),null,{default:N(()=>[g(x(et),{class:"w-full flex justify-between sm:justify-start sm:space-x-1 p-1"},{default:N(()=>[(n(),f(P,null,Q(c,(y,A,S)=>g(x(Se),{as:"template",key:A,onClick:I=>o.value=S},{default:N(({selected:I})=>[e("button",{class:q(["sm:w-24 rounded-lg py-2.5 text-sm font-medium cursor-pointer",I?"text-blue-500 focus:outline-none":"text-slate-500"])},w(y),3)]),_:2},1032,["onClick"])),64)),x(C).accountType===x(d).BUYER?(n(),R(x(Se),{key:0,as:"template",onClick:r[0]||(r[0]=y=>o.value=5)},{default:N(({selected:y})=>[e("button",{class:q(["w-24 rounded-lg py-2.5 text-sm font-medium cursor-pointer",y?"text-blue-500 focus:outline-none":"text-slate-500"])}," Bids ",2)]),_:1})):O("",!0)]),_:1}),g(x(X),null,{default:N(()=>[x(C).accountType==x(d).SELLER?(n(),R(Wt,{key:0})):O("",!0),x(C).accountType==x(d).BUYER?(n(),R(rs,{key:1})):O("",!0)]),_:1}),g(x(X),null,{default:N(()=>[g(To)]),_:1}),g(x(X),null,{default:N(()=>[g(qa)]),_:1}),g(x(X),null,{default:N(()=>[g(pa)]),_:1}),g(x(X),null,{default:N(()=>[g(rl)]),_:1}),g(x(X),null,{default:N(()=>[g(ql)]),_:1}),g(x(X),null,{default:N(()=>[g(hs)]),_:1})]),_:1})])):O("",!0)]))}});export{ln as default};
