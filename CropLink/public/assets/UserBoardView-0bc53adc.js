import{d as V,r as $,a6 as ne,a7 as Le,a8 as ke,G as j,a9 as le,aa as we,o as U,O as Ne,ab as Pe,ac as B,ad as ie,ae as Re,F as N,af as Ie,ag as Se,ah as pe,ai as Ve,aj as $e,ak as ae,al as z,am as oe,an as Be,ao as Fe,ap as Z,aq as Y,e as d,f as m,k as e,n as P,s as R,u as Ae,K as ce,p,L as M,A as O,B as F,t as w,C as g,a1 as de,w as Q,j as J,a0 as Ee,a2 as ue,z as te,a as q,a4 as D,c as se,q as L,x as re,m as W,W as Me,V as je,T as De,X as K,I as Ce}from"./index-d604ebf2.js";import{I as Ue}from"./ImageCarousel-67a385db.js";import{r as ge,a as _e,b as xe,c as ve}from"./PencilIcon-613fb7db.js";import{_ as Ge}from"./BuyerAdCard.vue_vue_type_script_setup_true_lang-7dbc70c8.js";import{_ as ze}from"./BidCard.vue_vue_type_script_setup_true_lang-c7fe0c1e.js";import{R as Ye,h as Je,y as he,M as qe}from"./menu-76956716.js";let We=V({props:{onFocus:{type:Function,required:!0}},setup(s){let x=$(!0);return()=>x.value?ne(ke,{as:"button",type:"button",features:Le.Focusable,onFocus(c){c.preventDefault();let l,n=50;function t(){var i;if(n--<=0){l&&cancelAnimationFrame(l);return}if((i=s.onFocus)!=null&&i.call(s)){x.value=!1,cancelAnimationFrame(l);return}l=requestAnimationFrame(t)}l=requestAnimationFrame(t)}}):null}});var He=(s=>(s[s.Forwards=0]="Forwards",s[s.Backwards=1]="Backwards",s))(He||{}),Ke=(s=>(s[s.Less=-1]="Less",s[s.Equal=0]="Equal",s[s.Greater=1]="Greater",s))(Ke||{});let Oe=Symbol("TabsContext");function fe(s){let x=pe(Oe,null);if(x===null){let c=new Error(`<${s} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,fe),c}return x}let be=Symbol("TabsSSRContext"),Qe=V({name:"TabGroup",emits:{change:s=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(s,{slots:x,attrs:c,emit:l}){var n;let t=$((n=s.selectedIndex)!=null?n:s.defaultIndex),i=$([]),b=$([]),I=j(()=>s.selectedIndex!==null),k=j(()=>I.value?s.selectedIndex:t.value);function T(a){var o;let r=le(_.tabs.value,B),h=le(_.panels.value,B),v=r.filter(y=>{var u;return!((u=B(y))!=null&&u.hasAttribute("disabled"))});if(a<0||a>r.length-1){let y=ae(t.value===null?0:Math.sign(a-t.value),{[-1]:()=>1,0:()=>ae(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),u=ae(y,{0:()=>r.indexOf(v[0]),1:()=>r.indexOf(v[v.length-1])});u!==-1&&(t.value=u),_.tabs.value=r,_.panels.value=h}else{let y=r.slice(0,a),u=[...r.slice(a),...y].find(S=>v.includes(S));if(!u)return;let E=(o=r.indexOf(u))!=null?o:_.selectedIndex.value;E===-1&&(E=_.selectedIndex.value),t.value=E,_.tabs.value=r,_.panels.value=h}}let _={selectedIndex:j(()=>{var a,o;return(o=(a=t.value)!=null?a:s.defaultIndex)!=null?o:null}),orientation:j(()=>s.vertical?"vertical":"horizontal"),activation:j(()=>s.manual?"manual":"auto"),tabs:i,panels:b,setSelectedIndex(a){k.value!==a&&l("change",a),I.value||T(a)},registerTab(a){var o;if(i.value.includes(a))return;let r=i.value[t.value];i.value.push(a),i.value=le(i.value,B);let h=(o=i.value.indexOf(r))!=null?o:t.value;h!==-1&&(t.value=h)},unregisterTab(a){let o=i.value.indexOf(a);o!==-1&&i.value.splice(o,1)},registerPanel(a){b.value.includes(a)||(b.value.push(a),b.value=le(b.value,B))},unregisterPanel(a){let o=b.value.indexOf(a);o!==-1&&b.value.splice(o,1)}};we(Oe,_);let A=$({tabs:[],panels:[]}),C=$(!1);U(()=>{C.value=!0}),we(be,j(()=>C.value?null:A.value));let f=j(()=>s.selectedIndex);return U(()=>{Ne([f],()=>{var a;return T((a=s.selectedIndex)!=null?a:s.defaultIndex)},{immediate:!0})}),Pe(()=>{if(!I.value||k.value==null||_.tabs.value.length<=0)return;let a=le(_.tabs.value,B);a.some((o,r)=>B(_.tabs.value[r])!==B(o))&&_.setSelectedIndex(a.findIndex(o=>B(o)===B(_.tabs.value[k.value])))}),()=>{let a={selectedIndex:t.value};return ne(N,[i.value.length<=0&&ne(We,{onFocus:()=>{for(let o of i.value){let r=B(o);if((r==null?void 0:r.tabIndex)===0)return r.focus(),!0}return!1}}),ie({theirProps:{...c,...Re(s,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:x,attrs:c,name:"TabGroup"})])}}}),Xe=V({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(s,{attrs:x,slots:c}){let l=fe("TabList");return()=>{let n={selectedIndex:l.selectedIndex.value},t={role:"tablist","aria-orientation":l.orientation.value};return ie({ourProps:t,theirProps:s,slot:n,attrs:x,slots:c,name:"TabList"})}}}),Te=V({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${Ie()}`}},setup(s,{attrs:x,slots:c,expose:l}){let n=fe("Tab"),t=$(null);l({el:t,$el:t}),U(()=>n.registerTab(t)),Se(()=>n.unregisterTab(t));let i=pe(be),b=j(()=>{if(i.value){let o=i.value.tabs.indexOf(s.id);return o===-1?i.value.tabs.push(s.id)-1:o}return-1}),I=j(()=>{let o=n.tabs.value.indexOf(t);return o===-1?b.value:o}),k=j(()=>I.value===n.selectedIndex.value);function T(o){var r;let h=o();if(h===oe.Success&&n.activation.value==="auto"){let v=(r=Fe(t))==null?void 0:r.activeElement,y=n.tabs.value.findIndex(u=>B(u)===v);y!==-1&&n.setSelectedIndex(y)}return h}function _(o){let r=n.tabs.value.map(h=>B(h)).filter(Boolean);if(o.key===z.Space||o.key===z.Enter){o.preventDefault(),o.stopPropagation(),n.setSelectedIndex(I.value);return}switch(o.key){case z.Home:case z.PageUp:return o.preventDefault(),o.stopPropagation(),T(()=>Z(r,Y.First));case z.End:case z.PageDown:return o.preventDefault(),o.stopPropagation(),T(()=>Z(r,Y.Last))}if(T(()=>ae(n.orientation.value,{vertical(){return o.key===z.ArrowUp?Z(r,Y.Previous|Y.WrapAround):o.key===z.ArrowDown?Z(r,Y.Next|Y.WrapAround):oe.Error},horizontal(){return o.key===z.ArrowLeft?Z(r,Y.Previous|Y.WrapAround):o.key===z.ArrowRight?Z(r,Y.Next|Y.WrapAround):oe.Error}}))===oe.Success)return o.preventDefault()}let A=$(!1);function C(){var o;A.value||(A.value=!0,!s.disabled&&((o=B(t))==null||o.focus({preventScroll:!0}),n.setSelectedIndex(I.value),Be(()=>{A.value=!1})))}function f(o){o.preventDefault()}let a=Ve(j(()=>({as:s.as,type:x.type})),t);return()=>{var o;let r={selected:k.value},{id:h,...v}=s,y={ref:t,onKeydown:_,onMousedown:f,onClick:C,id:h,role:"tab",type:a.value,"aria-controls":(o=B(n.panels.value[I.value]))==null?void 0:o.id,"aria-selected":k.value,tabIndex:k.value?0:-1,disabled:s.disabled?!0:void 0};return ie({ourProps:y,theirProps:v,slot:r,attrs:x,slots:c,name:"Tab"})}}}),ee=V({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${Ie()}`},tabIndex:{type:Number,default:0}},setup(s,{attrs:x,slots:c,expose:l}){let n=fe("TabPanel"),t=$(null);l({el:t,$el:t}),U(()=>n.registerPanel(t)),Se(()=>n.unregisterPanel(t));let i=pe(be),b=j(()=>{if(i.value){let T=i.value.panels.indexOf(s.id);return T===-1?i.value.panels.push(s.id)-1:T}return-1}),I=j(()=>{let T=n.panels.value.indexOf(t);return T===-1?b.value:T}),k=j(()=>I.value===n.selectedIndex.value);return()=>{var T;let _={selected:k.value},{id:A,tabIndex:C,...f}=s,a={ref:t,id:A,role:"tabpanel","aria-labelledby":(T=B(n.tabs.value[I.value]))==null?void 0:T.id,tabIndex:k.value?C:-1};return!k.value&&s.unmount&&!s.static?ne(ke,{as:"span",...a}):ie({ourProps:a,theirProps:f,slot:_,attrs:x,slots:c,features:$e.Static|$e.RenderStrategy,visible:k.value,name:"TabPanel"})}}});function Ze(s,x){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})])}const et={class:"relative bg-white p-2 rounded-xl shadow transition-shadow duration-300 hover:shadow-xl"},tt={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},st={class:"relative w-full h-32 sm:h-52 sm:bg-gray-200 rounded-xl overflow-hidden"},lt={key:1,class:"flex items-center justify-center h-full"},ot=e("p",{class:"text-gray-500"},"No Image Available",-1),at=[ot],nt={class:"sm:mt-2 space-y-2"},it={class:"text-lg sm:text-2xl font-bold"},ct={class:"flex flex-col gap-2 justify-between"},dt={key:0,class:"flex flex-row gap-4 items-center"},ut=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),rt=e("p",{class:"text-sm text-green-500"},"LIVE",-1),vt=[ut,rt],ft={key:1,class:"flex flex-row gap-4 items-center"},mt=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),ht=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),pt=[mt,ht],gt={class:"text-sm bg-slate-200/50 p-2 italic rounded-md"},_t={class:"flex flex-col justify-between w-full"},xt={class:"flex flex-row gap-2 text-sm justify-between gap-2"},bt={class:"font-semibold truncate"},yt={class:"flex flex-row gap-2 text-sm justify-between gap-2"},wt={class:"font-semibold truncate"},$t={class:"flex justify-between sm:justify-end sm:space-x-4 mt-4"},Ct=V({__name:"SellerAdDashboardCard",props:{ad:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit"],setup(s,{emit:x}){const c=P().NOTIFICATION_TYPES,{modals:l,notifications:n}=R(P()),t=Ae(),i=$(!1),b=async f=>{if(!f)return;const{callFunction:a}=te("postAd",{adId:f},i,void 0,void 0,()=>{n.value.show=!0,n.value.type=c.SUCCESS,n.value.message="Ad is live!"},o=>{n.value.show=!0,n.value.type=c.ERROR,n.value.message="Error while posting ad, please try again later"});await a()},I=async f=>{if(!f)return;const{callFunction:a}=te("takedownAd",{adId:f},i,void 0,void 0,()=>{n.value.show=!0,n.value.type=c.SUCCESS,n.value.message="Ad taken down!"},o=>{n.value.show=!0,n.value.type=c.ERROR,n.value.message="Error while taken down ad, please try again later"});await a()},k=async f=>{f&&(console.log("removeAd",f),l.value.confirmremove=!0,l.value.context={adId:f,__key:"ad"})},T=f=>{f&&t.push({name:"ad",params:{adId:f}})},_=async f=>{f&&(console.log("removeAd",f),l.value.editad=!0,l.value.context=ad)},A=f=>{f&&t.push({name:"messaging",params:{adId:f}})},C=f=>{const a=new Date,o=f.toDate(),r=a.getTime()-o.getTime(),h=Math.floor(r/1e3),v=Math.floor(h/60),y=Math.floor(v/60),u=Math.floor(y/24);return u>1?`${u} days ago`:u==1?`${u} day ago`:y>0?`${y} hours ago`:v>0?`${v} minutes ago`:h>0?`${h} seconds ago`:"just now"};return(f,a)=>{const o=ce("currency");return d(),m("div",et,[i.value?(d(),m("div",tt,[p(M,{isLoading:i.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",st,[s.ad.images&&s.ad.images.length>0?(d(),F(Ue,{key:0,images:s.ad.resizedImages,class:"h-32 sm:h-full object-cover"},null,8,["images"])):(d(),m("div",lt,at))]),e("div",nt,[e("h3",it,w(s.ad.variety),1),e("div",ct,[s.ad.live?(d(),m("div",dt,vt)):(d(),m("div",ft,pt)),e("p",gt,w(g(de)(s.ad.createdAt)?C(s.ad.createdAt):f.gig.createdAt),1)]),e("div",_t,[e("div",xt,[Q((d(),m("p",bt,[J("/ton")])),[[o,s.ad.pricePerTon]])]),e("div",yt,[e("p",wt,w(s.ad.tons)+" tons",1)])]),e("div",$t,[s.showButtons?(d(),m(N,{key:0},[s.ad.live?O("",!0):(d(),F(g(ge),{key:0,class:"h-5 w-5 text-cyan-600",onClick:a[0]||(a[0]=r=>b(s.ad.id)),title:"Post ad'"})),s.ad.live?(d(),F(g(_e),{key:1,class:"h-5 w-5 text-cyan-600",onClick:a[1]||(a[1]=r=>I(s.ad.id)),title:"Take down ad"})):O("",!0),p(g(Ee),{class:"h-5 w-5 text-cyan-600",onClick:a[2]||(a[2]=r=>A(s.ad.id)),title:"Contact"}),p(g(ue),{class:"h-5 w-5 text-cyan-600",onClick:a[3]||(a[3]=r=>k(s.ad.id)),title:"Remove"}),p(g(xe),{class:"h-5 w-5 text-cyan-600",onClick:a[4]||(a[4]=r=>_(s.ad.id)),title:"Edit"})],64)):O("",!0),p(g(ve),{class:"h-5 w-5 text-cyan-600",onClick:a[5]||(a[5]=r=>T(s.ad.id)),title:"View"})])])])}}}),Tt={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-5"},kt={class:"p-1 sm:p-2"},It=e("span",{class:"text-sm font-medium text-slate-300"},"Created",-1),St={class:"text-4xl font-bold text-slate-500"},At={class:"p-1 sm:p-2"},Et=e("span",{class:"text-sm font-medium text-slate-300"},"Live",-1),jt={class:"text-4xl font-bold text-slate-500"},Ot={class:"p-1 sm:p-2 relative"},Lt=e("span",{class:"text-sm font-medium text-slate-300"},"Views",-1),Nt={class:"text-4xl font-bold text-slate-500"},Pt={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Rt={class:"p-1 sm:p-2 relative"},Vt=e("span",{class:"text-sm font-medium text-slate-300"},"Bids",-1),Bt={class:"text-4xl font-bold text-slate-500"},Ft={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Mt={class:"p-1 sm:p-2 flex items-center justify-center"},Dt={key:0,class:"p-2 sm:p-4 grid gap-2 sm:gap-4 grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},Ut={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},Gt=e("div",{class:"italic"},"No ads found",-1),zt=[Gt],Yt={key:2},Jt=V({__name:"SellerContentComponent",setup(s){const{user:x}=R(q()),{modals:c,notifications:l}=R(P()),n=P().NOTIFICATION_TYPES,t=$([]),i=$(!1),{subscribe:b,unsubscribe:I}=D("ads",[["uid","==",x.value.uid]],["createdAt","desc"],v=>{t.value.docs=v,t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:{}},v=>{l.value.show=!0,l.value.type=n.ERROR,l.value.message="Error loading ads, please try again later."},i,()=>{},()=>{},v=>{l.value.show=!0,l.value.type=n.SUCCESS,l.value.message="Ad has been created."},v=>{l.value.show=!0,l.value.type=n.SUCCESS,l.value.message="Ad has been removed."});U(async()=>{b(),C(),r()}),se(()=>{I(),f(),h()});const k=j(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.live==!0).length),T=()=>{c.value.addad=!0},_=$(0),A=$(!1),{subscribe:C,unsubscribe:f}=D("bids",[["sellerId","==",x.value.uid]],["createdAt","desc"],v=>{_.value=v.length},void 0,A),a=$(0),o=$(!1),{subscribe:r,unsubscribe:h}=D("ads",[["uid","==",x.value.uid]],["createdAt","desc"],v=>{let y=0;v.forEach(u=>{y+=u.viewCount?u.viewCount:0}),a.value=y},void 0,o);return(v,y)=>(d(),m(N,null,[e("div",Tt,[e("div",kt,[It,e("p",St,w(t.value.docs&&t.value.docs.length),1)]),e("div",At,[Et,e("p",jt,w(k.value),1)]),e("div",Ot,[Lt,e("p",Nt,w(a.value),1),o.value?(d(),m("div",Pt,[p(M,{isLoading:o.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Rt,[Vt,e("p",Bt,w(_.value),1),A.value?(d(),m("div",Ft,[p(M,{isLoading:A.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Mt,[p(re,{onClick:T,classes:"w-full"},{default:L(()=>[J("Create ad")]),_:1})])]),t.value.docs&&t.value.docs.length>0&&!i.value?(d(),m("span",Dt,[(d(!0),m(N,null,W(t.value.docs,(u,E)=>(d(),F(Ct,{key:E,ad:u},null,8,["ad"]))),128))])):t.value.docs&&t.value.docs.length==0&&!i.value?(d(),m("div",Ut,zt)):(d(),m("div",Yt,[p(M,{isLoading:i.value},null,8,["isLoading"])]))],64))}}),qt={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-5"},Wt={class:"p-2"},Ht=e("span",{class:"text-sm font-medium text-slate-300"},"Number of ads",-1),Kt={class:"text-4xl font-bold text-slate-500"},Qt={class:"p-2"},Xt=e("span",{class:"text-sm font-medium text-slate-300"},"Number of live ads",-1),Zt={class:"text-4xl font-bold text-slate-500"},es=e("div",{class:"p-2"},[e("span",{class:"text-sm font-medium text-slate-300"},"Total views"),e("p",{class:"text-4xl font-bold text-slate-500"},"0")],-1),ts={class:"p-2 flex items-center justify-center"},ss={key:0,class:"grid grid-flow-col gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},ls={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},os=e("div",{class:"italic"},"No ads found",-1),as=[os],ns={key:2},is=V({__name:"BuyerContentComponent",setup(s){const{user:x}=R(q()),{modals:c,notifications:l}=R(P()),n=P().NOTIFICATION_TYPES,t=$([]),i=$(!1),{subscribe:b,unsubscribe:I}=D("ads",[["uid","==",x.value.uid]],["createdAt","desc"],_=>{t.value.docs=_,t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:{}},_=>{l.value.show=!0,l.value.type=n.ERROR,l.value.message="Error loading ads, please try again later."},i,()=>{},()=>{},_=>{l.value.show=!0,l.value.type=n.SUCCESS,l.value.message="Ad has been created."},_=>{l.value.show=!0,l.value.type=n.SUCCESS,l.value.message="Ad has been removed."});U(async()=>{b()}),se(()=>{I()});const k=()=>{c.value.addad=!0},T=computed(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(_=>_.live==!0).length);return(_,A)=>(d(),m(N,null,[e("div",qt,[e("div",Wt,[Ht,e("p",Kt,w(t.value.docs&&t.value.docs.length),1)]),e("div",Qt,[Xt,e("p",Zt,w(g(T)),1)]),es,e("div",ts,[p(re,{onClick:k,classes:"w-32 p-2"},{default:L(()=>[J("Create an ad")]),_:1})])]),t.value.docs&&t.value.docs.length>0&&!i.value?(d(),m("span",ss,[(d(!0),m(N,null,W(t.value.docs,(C,f)=>(d(),F(Ge,{key:f,ad:C},null,8,["ad"]))),128))])):O("",!0),t.value.docs&&t.value.docs.length==0&&!i.value?(d(),m("div",ls,as)):(d(),m("div",ns,[p(M,{isLoading:i.value},null,8,["isLoading"])]))],64))}}),cs={key:0,class:"grid grid-flow-row space-y-4"},ds={key:1},us={key:2,class:"h-96 p-2 flex items-center justify-center"},rs=e("p",{class:"italic"},"No bids yet",-1),vs=[rs],fs=V({__name:"BidContentComponent",setup(s){const{user:x}=R(q()),c=$([]),l=$(!1),n=async()=>{l.value=!0,c.value=await Me("bids","buyerId","==",x.value.uid,["createdAt","desc"],10),l.value=!1};return U(async()=>{await n()}),(t,i)=>c.value.docs&&c.value.docs.length>0&&!l.value?(d(),m("span",cs,[(d(!0),m(N,null,W(c.value.docs,b=>(d(),F(ze,{bid:b},null,8,["bid"]))),256))])):l.value?(d(),m("div",ds,[p(M,{isLoading:l.value},null,8,["isLoading"])])):(d(),m("span",us,vs))}}),ms={class:"bg-white rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4 relative"},hs={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},ps={class:"flex flex-col sm:flex-row justify-between p-2 gap-2 sm:p-4"},gs={key:0,class:"flex flex-row gap-4 items-center"},_s=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),xs=e("p",{class:"text-sm text-green-500"},"LIVE",-1),bs=[_s,xs],ys={key:1,class:"flex flex-row gap-4 items-center"},ws=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),$s=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),Cs=[ws,$s],Ts={class:"text-sm bg-slate-200/50 p-2 italic rounded-md"},ks={class:"flex flex-row border-top"},Is={class:"text-lg capitalize my-2 pl-2 sm:pl-4 truncate"},Ss={class:"flex flex-row gap-1 pl-2 sm:pl-4 mb-2"},As={class:"text-sm truncate italic text-slate-500"},Es={class:"flex flex-row gap-4 p-2 sm:p-4"},js={class:"text-sm truncate md:text-clip"},Os={class:"flex sm:flex-row flex-col gap-2 sm:gap-4 divide-y sm:divide-y-0 sm:divide-x sm:px-2 sm:px-4 mb-2"},Ls={class:"flex flex-col p-2 justify-between"},Ns=e("p",{class:"text-xs italic"},"Milestones",-1),Ps={class:"text-2xl"},Rs={class:"flex flex-col p-2 justify-between"},Vs=e("p",{class:"text-xs italic"},"Total",-1),Bs={class:"text-xl sm:text-2xl"},Fs={key:1,class:"w-full flex justify-end gap-4 pr-4 pb-4"},Ms=V({__name:"GigDashboardCard",props:{gig:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit","remove"],setup(s,{emit:x}){const{notifications:c,modals:l}=R(P()),n=P().NOTIFICATION_TYPES,t=x,i=s,b=$(!1),I=async a=>{const{callFunction:o}=te("postGigPost",{gigId:a},b,void 0,void 0,()=>{c.value.show=!0,c.value.type=n.SUCCESS,c.value.message="Gig posted successfully"},()=>{c.value.show=!0,c.value.type=n.ERROR,c.value.message="An error occured while posting gig, please try again later"});await o()},k=async a=>{const{callFunction:o}=te("takeDownGigPost",{gigId:a},b,void 0,void 0,()=>{c.value.show=!0,c.value.type=n.SUCCESS,c.value.message="Gig taken down successfully"},()=>{c.value.show=!0,c.value.type=n.ERROR,c.value.message="An error occured while taking down the gig, please try again later"});await o()},T=j(()=>!i.gig.milestones||i.gig.milestones.length===0?0:i.gig.milestones.reduce((a,o)=>a+o.price,0)),_=a=>{const o=new Date,r=a.toDate(),h=o.getTime()-r.getTime(),v=Math.floor(h/1e3),y=Math.floor(v/60),u=Math.floor(y/60),E=Math.floor(u/24);return E>1?`${E} days ago`:E==1?`${E} day ago`:u>0?`${u} hours ago`:y>0?`${y} minutes ago`:v>0?`${v} seconds ago`:"just now"},A=a=>{a&&(l.value.viewgig=!0,l.value.context.__key=a)},C=a=>{t("edit",a)},f=a=>{t("remove",a)};return(a,o)=>{const r=ce("currency");return d(),m("span",ms,[b.value?(d(),m("div",hs,[p(M,{isLoading:b.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",ps,[s.gig.live?(d(),m("div",gs,bs)):(d(),m("div",ys,Cs)),e("p",Ts,w(g(de)(s.gig.createdAt)?_(s.gig.createdAt):s.gig.createdAt),1)]),e("div",ks,[e("p",Is,w(s.gig.title),1)]),e("div",Ss,[p(g(je),{class:"w-5 h-5 text-slate-500"}),e("p",As,w(s.gig.location),1)]),e("div",Es,[e("p",js,w(s.gig.description.substring(0,197)+"..."),1)]),e("div",Os,[e("div",Ls,[Ns,e("p",Ps,w(s.gig.milestones.length),1)]),e("div",Rs,[Vs,Q(e("p",Bs,null,512),[[r,T.value]])])]),s.showButtons?(d(),m("div",Fs,[s.showButtons?(d(),m(N,{key:0},[s.gig.live?O("",!0):(d(),F(g(ge),{key:0,onClick:o[0]||(o[0]=h=>I(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})),s.gig.live?(d(),F(g(_e),{key:1,onClick:o[1]||(o[1]=h=>k(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})):O("",!0),p(g(ue),{onClick:o[2]||(o[2]=h=>f(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"}),p(g(xe),{onClick:o[3]||(o[3]=h=>C(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})],64)):O("",!0),p(g(ve),{onClick:o[4]||(o[4]=h=>A(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})])):O("",!0)])}}}),Ds={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-4 sm:grid-cols-5"},Us={class:"p-2 h-16"},Gs=e("span",{class:"text-sm font-medium text-slate-300"},"Created",-1),zs={class:"text-2xl font-bold text-slate-500"},Ys={class:"p-2 h-16"},Js=e("span",{class:"text-sm font-medium text-slate-300"},"Live",-1),qs={class:"text-2xl font-bold text-slate-500"},Ws={class:"p-2 h-16"},Hs=e("span",{class:"text-sm font-medium text-slate-300"},"Views",-1),Ks={class:"text-2xl font-bold text-slate-500"},Qs={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Xs={class:"p-2 flex-col justify-between h-16 hidden sm:flex"},Zs=e("span",{class:"text-sm font-medium text-slate-300"},"Total",-1),el={class:"text-2xl font-bold text-slate-500"},tl={class:"p-2 flex items-center justify-center"},sl={class:"p-2 sm:p-4 grid gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},ll={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},ol=e("p",{class:"italic"},"No gig posts",-1),al=[ol],nl={key:2},il=V({__name:"GigsContentComponent",setup(s){const{user:x}=R(q()),{modals:c,notifications:l}=R(P()),n=P().NOTIFICATION_TYPES,t=$([]),i=$(!1),{subscribe:b,unsubscribe:I}=D("gigs",[["posterId","==",x.value.uid]],["createdAt","desc"],h=>{t.value.docs=h},h=>{l.value.show=!0,l.value.type=n.ERROR,l.value.message="Error loading gigs, please try again later."},i,()=>{},()=>{},h=>{l.value.show=!0,l.value.type=n.SUCCESS,l.value.message="Gig has been created."},h=>{l.value.show=!0,l.value.type=n.SUCCESS,l.value.message="Gig has been removed."}),k=()=>{c.value.addgig=!0},T=h=>{c.value.confirmremove=!0,c.value.context={__key:"gig",gigId:h}},_=h=>{c.value.editgig=!0;const v=t.value.docs.find(y=>y.gigId==h);c.value.context=v};U(async()=>{b(),o()}),se(()=>{I(),r()});const A=j(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.reduce((h,v)=>v.milestones?h+v.milestones.reduce((y,u)=>y+u.price,0):h,0)),C=j(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(h=>h.live==!0).length),f=$(0),a=$(!1),{subscribe:o,unsubscribe:r}=D("ads",[["posterId","==",x.value.uid]],["createdAt","desc"],h=>{let v=0;h.forEach(y=>{v+=y.viewCount?y.viewCount:0}),f.value=v},void 0,a);return(h,v)=>{const y=ce("currency");return d(),m(N,null,[e("div",Ds,[e("div",Us,[Gs,e("p",zs,w(t.value.docs&&t.value.docs.length),1)]),e("div",Ys,[Js,e("p",qs,w(C.value),1)]),e("div",Ws,[Hs,e("p",Ks,w(f.value),1),a.value?(d(),m("div",Qs,[p(M,{isLoading:a.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Xs,[Zs,Q(e("p",el,null,512),[[y,A.value]])]),e("div",tl,[p(re,{classes:"w-full",onClick:k},{default:L(()=>[J(" Create gig ")]),_:1})])]),e("span",sl,[t.value.docs&&t.value.docs.length>0&&!i.value?(d(!0),m(N,{key:0},W(t.value.docs,(u,E)=>(d(),F(Ms,{key:E,gig:u,onEdit:_,onRemove:T},null,8,["gig"]))),128)):t.value.docs&&t.value.docs.length==0&&!i.value?(d(),m("span",ll,al)):(d(),m("div",nl,[p(M,{isLoading:i.value},null,8,["isLoading"])]))])],64)}}}),cl={class:"absolute top-2 left-0 text-right"},dl={class:"px-1 py-1"},ul={class:"px-1 py-1"},rl=V({__name:"ApplicationDropdownMenu",emits:["remove","view","contact"],setup(s,{emit:x}){return(c,l)=>(d(),m("div",cl,[p(g(qe),{as:"div",class:"relative inline-block text-left"},{default:L(()=>[e("div",null,[p(g(Ye),{class:"inline-flex w-full justify-center rounded-md px-4 py-2 text-sm font-medium text-bg/30 hover:bg-cyan-600/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75"},{default:L(()=>[J(" Options "),p(g(Ze),{class:"-mr-1 ml-2 h-5 w-5 text-cyan-600 hover:text-cyan-600","aria-hidden":"true"})]),_:1})]),p(De,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:L(()=>[p(g(Je),{class:"absolute right-0 mt-2 z-10 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:L(()=>[e("div",dl,[p(g(he),null,{default:L(({active:n})=>[e("button",{class:K([n?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:l[0]||(l[0]=t=>c.$emit("contact"))},[p(g(Ee),{active:n,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),J(" Reach out ")],2)]),_:1}),p(g(he),null,{default:L(({active:n})=>[e("button",{class:K([n?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:l[1]||(l[1]=t=>c.$emit("remove"))},[p(g(ue),{active:n,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),J(" Remove ")],2)]),_:1})]),e("div",ul,[p(g(he),null,{default:L(({active:n})=>[e("button",{class:K([n?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:l[2]||(l[2]=t=>c.$emit("view"))},[p(g(ve),{active:n,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),J(" View Application ")],2)]),_:1})])]),_:1})]),_:1})]),_:1})]))}}),vl={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-3"},fl={class:"p-2"},ml=e("span",{class:"text-sm font-medium text-slate-300"},"Recieved",-1),hl={class:"text-4xl font-bold text-slate-500"},pl={class:"p-2"},gl=e("span",{class:"text-sm font-medium text-slate-300"},"Gigs",-1),_l={class:"text-4xl font-bold text-slate-500"},xl={class:"p-2"},bl=e("span",{class:"text-sm font-medium text-slate-300"},"Jobs",-1),yl={class:"text-4xl font-bold text-slate-500"},wl={class:"sm:p-4"},$l={class:"flex flex-row gap-4 h-6 sm:mb-2 items-center p-4"},Cl={class:"flex flex-row gap-2 items-center"},Tl=e("p",{class:"text-sm font-medium text-slate-300"},"Gig",-1),kl={class:"flex flex-row gap-2 items-center"},Il=e("p",{class:"text-sm font-medium text-slate-300"},"Job",-1),Sl={key:0,class:"table-fixed w-full border-collapse"},Al=e("thead",{class:"border-y"},[e("tr",{class:"text-left"},[e("th",{class:"py-4 hidden sm:table-cell"},"ID"),e("th",{class:"py-4"},"Name"),e("th",{class:"py-4 hidden sm:table-cell"},"Email"),e("th",{class:"py-4 hidden sm:table-cell"},"For"),e("th",{class:"py-4"},"Recieved"),e("th",{class:"py-4"},"Action")])],-1),El={class:"py-2 hidden sm:table-cell"},jl={class:"py-2 capitalize truncate"},Ol={class:"py-2 truncate hidden sm:table-cell"},Ll={class:"py-2 hidden sm:table-cell"},Nl={class:"flex flex-row gap-2 items-center"},Pl={class:"pb-1 capitalize"},Rl={class:"py-2 italic text-xs sm:text-base"},Vl={class:"relative"},Bl={key:0},Fl={colspan:"6"},Ml=["src"],Dl={key:1,class:"h-96 p-2 flex items-center justify-center"},Ul=e("p",{class:"italic"},"No application posts",-1),Gl=[Ul],zl={key:2},Yl=V({__name:"ApplicationsContentComponent",setup(s){const{user:x}=R(q()),{modals:c,notifications:l,messaging:n}=R(P()),t=P().NOTIFICATION_TYPES,i=$([]),b=$(!1),{subscribe:I,unsubscribe:k}=D("applications",[["ownerId","==",x.value.uid]],["createdAt","desc"],u=>{i.value.docs=u},u=>{l.value.show=!0,l.value.type=t.ERROR,l.value.message="Error loading applications, please try again later."},b,()=>{},()=>{},u=>{l.value.show=!0,l.value.type=t.SUCCESS,l.value.message="A new application has been received."},u=>{l.value.show=!0,l.value.type=t.SUCCESS,l.value.message="Application has been removed."}),T=u=>{c.value.confirmremove=!0,c.value.context={__key:"application",applicationId:u}},_=$(""),A=u=>{var E;if(window.innerWidth<768){window.open((E=i.value.docs.find(S=>S.applicationId===u))==null?void 0:E.resume);return}if(_.value===u){_.value="";return}_.value=u},C=()=>{console.log("loaded")},f=async u=>{console.log("onMessage",u.applicationId),n.value.show=!0,n.value.to={id:u.applicantId,name:u.name},n.value.context={__key:"application",application:u}};U(async()=>{I()}),se(()=>{k()});const a=$(!1),o=$(!1),r=j(()=>i.value.docs?a.value&&o.value?i.value.docs:a.value?i.value.docs.filter(u=>u.parentType==="gig"):o.value?i.value.docs.filter(u=>u.parentType==="job"):i.value.docs:[]),h=u=>{const E=new Date,S=u.toDate(),H=E.getTime()-S.getTime(),G=Math.floor(H/1e3),X=Math.floor(G/60),me=Math.floor(X/60),ye=Math.floor(me/24);return ye>0?`${ye} days ago`:me>0?`${me} hours ago`:X>0?`${X} minutes ago`:G>0?`${G} seconds ago`:"just now"},v=j(()=>i.value.docs?i.value.docs.filter(u=>u.parentType==="gig").length:0),y=j(()=>i.value.docs?i.value.docs.filter(u=>u.parentType==="job").length:0);return(u,E)=>(d(),m(N,null,[e("div",vl,[e("div",fl,[ml,e("p",hl,w(i.value.docs?i.value.docs.length:0),1)]),e("div",pl,[gl,e("p",_l,w(v.value),1)]),e("div",xl,[bl,e("p",yl,w(y.value),1)])]),e("div",wl,[e("div",$l,[e("div",Cl,[Q(e("input",{type:"checkbox",class:"w-4 h-4","onUpdate:modelValue":E[0]||(E[0]=S=>a.value=S)},null,512),[[Ce,a.value]]),Tl]),e("div",kl,[Q(e("input",{type:"checkbox",class:"w-4 h-4","onUpdate:modelValue":E[1]||(E[1]=S=>o.value=S)},null,512),[[Ce,o.value]]),Il])]),i.value.docs&&i.value.docs.length>0&&!b.value?(d(),m("table",Sl,[Al,e("tbody",null,[(d(!0),m(N,null,W(r.value,(S,H)=>(d(),m(N,{key:H},[e("tr",null,[e("td",El,w(S.applicationId.substring(0,5)),1),e("td",jl,w(S.name),1),e("td",Ol,w(S.email),1),e("td",Ll,[e("div",Nl,[e("div",{class:K(["rounded-full w-2 h-2",{"bg-green-500":S.parentType=="gig","bg-blue-500":S.parentType=="job"}])},null,2),e("p",Pl,w(S.parentType),1)])]),e("td",Rl,w(g(de)(S.createdAt)?h(S.createdAt):S.createdAt),1),e("td",Vl,[p(rl,{onRemove:G=>T(S.applicationId),onView:G=>A(S.applicationId),onContact:G=>f(S)},null,8,["onRemove","onView","onContact"])])]),_.value==S.applicationId?(d(),m("tr",Bl,[e("td",Fl,[e("iframe",{ref_for:!0,ref:"iframeRef",src:S.resume,width:"100%",height:"500px",onLoad:C},null,40,Ml)])])):O("",!0)],64))),128))])])):i.value.docs&&i.value.docs.length==0&&!b.value?(d(),m("span",Dl,Gl)):(d(),m("div",zl,[p(M,{isLoading:b.value},null,8,["isLoading"])]))])],64))}}),Jl={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-3"},ql={class:"p-2"},Wl=e("span",{class:"text-sm font-medium text-slate-300"},"Pending",-1),Hl={class:"text-4xl font-bold text-slate-500"},Kl={class:"p-2"},Ql=e("span",{class:"text-sm font-medium text-slate-300"},"Accepted",-1),Xl={class:"text-4xl text-4xl font-bold text-slate-500"},Zl={class:"p-2"},eo=e("span",{class:"text-sm font-medium text-slate-300"},"Rejected",-1),to={class:"text-4xl text-4xl font-bold text-slate-500"},so={class:"sm:p-4"},lo={key:0,class:"table-fixed w-full border-collapse"},oo=e("thead",{class:"border-b"},[e("tr",{class:"text-left"},[e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"Contract ID"),e("th",{class:"p-2 sm:pb-4"},"User"),e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"Ad ID"),e("th",{class:"p-2 sm:pb-4"},"Status"),e("th",{class:"p-2 sm:pb-4"},"Updated"),e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"Created"),e("th",{class:"p-2 sm:pb-4"},"Action")])],-1),ao={class:"py-2 hidden sm:table-cell"},no={class:"py-2"},io={class:"flex flex-row justify-start items-center"},co=["src"],uo={class:"pl-2 truncate"},ro={class:"py-2 hidden sm:table-cell"},vo={class:"py-2"},fo={class:"flex flex-row sm:w-3/4 gap-1 sm:gap-2 items-center justify-start px-1"},mo={class:"italic capitalize"},ho={class:"py-2"},po={class:"py-2 hidden sm:table-cell"},go={class:"py-2 w-5"},_o=["onClick"],xo={key:1,class:"h-96 p-2 flex items-center justify-center"},bo=e("p",{class:"italic"},"No contracts yet",-1),yo=[bo],wo={key:2},$o=V({__name:"ContractsContentComponent",setup(s){const x=Ae(),c=P().NOTIFICATION_TYPES,{notifications:l}=R(P()),{user:n}=R(q()),t=$([]),i=$(!1);let b=[],I=[];const k=()=>{t.value.docs=[...b,...I]},{subscribe:T,unsubscribe:_}=D("contracts",[["sellerId","==",n.value.uid]],["createdAt","desc"],v=>{I=v,k()},v=>{l.value.show=!0,l.value.type=c.ERROR,l.value.message="Error loading contracts, please try again later."},i),{subscribe:A,unsubscribe:C}=D("contracts",[["buyerId","==",n.value.uid]],["createdAt","desc"],v=>{b=v,k()},v=>{l.value.show=!0,l.value.type=c.ERROR,l.value.message="Error loading contracts, please try again later."},i);U(async()=>{T(),A()}),se(()=>{_(),C()});const f=j(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.status=="pending").length),a=j(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.status=="accepted").length),o=j(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.status=="rejected").length),r=v=>{const y=new Date,u=v.toDate(),E=y.getTime()-u.getTime(),S=Math.floor(E/1e3),H=Math.floor(S/60),G=Math.floor(H/60),X=Math.floor(G/24);return X>0?`${X} days ago`:G>0?`${G} hours ago`:H>0?`${H} minutes ago`:S>0?`${S} seconds ago`:"just now"},h=v=>{x.push({name:"messaging",params:{adId:v}})};return(v,y)=>(d(),m(N,null,[e("div",Jl,[e("div",ql,[Wl,e("p",Hl,w(f.value),1)]),e("div",Kl,[Ql,e("p",Xl,w(a.value),1)]),e("div",Zl,[eo,e("p",to,w(o.value),1)])]),e("div",so,[t.value.docs&&t.value.docs.length>0&&!i.value?(d(),m("table",lo,[oo,e("tbody",null,[(d(!0),m(N,null,W(t.value.docs,(u,E)=>(d(),m("tr",{key:E},[e("td",ao,w(u.id.substring(0,5)),1),e("td",no,[e("div",io,[e("img",{src:u.userSignature.profilePic,class:"w-8 h-8 rounded-full"},null,8,co),e("p",uo,w(u.userSignature.name),1)])]),e("td",ro,w(u.adId.substring(0,5)),1),e("td",vo,[e("span",fo,[e("span",{class:K(["w-3 h-3 rounded-full",{"bg-green-500":u.status=="accepted","bg-red-500":u.status=="rejected","bg-yellow-500":u.status=="pending"}])},null,2),e("p",mo,w(u.status),1)])]),e("td",ho,w(r(u.updatedAt)),1),e("td",po,w(r(u.createdAt)),1),e("td",go,[e("button",{class:"text-cyan-600 font-bold italic",onClick:S=>h(u.adId)},"View",8,_o)])]))),128))])])):t.value.docs&&t.value.docs.length==0&&!i.value?(d(),m("div",xo,yo)):(d(),m("span",wo,[p(M,{isLoading:i.value},null,8,["isLoading"])]))])],64))}}),Co={class:"bg-white rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4 relative"},To={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},ko={class:"flex flex-col sm:flex-row justify-between p-2 gap-2 sm:p-4"},Io={key:0,class:"flex flex-row gap-4 items-center"},So=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),Ao=e("p",{class:"text-sm text-green-500"},"LIVE",-1),Eo=[So,Ao],jo={key:1,class:"flex flex-row gap-4 items-center"},Oo=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),Lo=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),No=[Oo,Lo],Po={class:"text-sm bg-slate-200/50 p-2 italic rounded-md text-end"},Ro={class:"flex flex-row gap-4 bg-gradient-to-r from-sky-600/50 mb-2"},Vo={class:"text-xl capitalize my-2 text-white pl-2 sm:pl-4 truncate"},Bo={class:"flex flex-row gap-1 pl-2 sm:pl-4 mb-2"},Fo={class:"text-sm truncate italic text-slate-500"},Mo={class:"flex flex-row gap-4 p-2 sm:p-4"},Do={class:"text-sm truncate md:text-clip"},Uo={class:"flex sm:flex-row flex-col gap-2 sm:gap-4 divide-y sm:divide-y-0 sm:divide-x sm:px-2 sm:px-4 mb-2"},Go={class:"flex flex-col p-2"},zo=e("p",{class:"text-xs"}," Salary Min. ",-1),Yo={class:"text-xl"},Jo={class:"flex flex-col p-2"},qo=e("p",{class:"text-xs"}," Salary Max. ",-1),Wo={class:"text-xl"},Ho={class:"w-full flex justify-end gap-4 pr-4 pb-4"},Ko=V({__name:"JobDashboardCard",props:{job:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit","remove"],setup(s,{emit:x}){const{notifications:c,modals:l}=R(P()),n=P().NOTIFICATION_TYPES,t=x,i=$(!1),b=async C=>{const{callFunction:f}=te("postJobPost",{jobId:C},i,void 0,void 0,()=>{c.value.show=!0,c.value.type=n.SUCCESS,c.value.message="Job Posted"},()=>{c.value.show=!0,c.value.type=n.ERROR,c.value.message="An error occured during the process, please try again later"});await f()},I=async C=>{const{callFunction:f}=te("takeDownJobPost",{jobId:C},i,void 0,void 0,()=>{c.value.show=!0,c.value.type=n.SUCCESS,c.value.message="Job post is now down"},()=>{c.value.show=!0,c.value.type=n.ERROR,c.value.message="An error occured during the process, please try again later"});await f()},k=C=>{const f=new Date,a=C.toDate(),o=f.getTime()-a.getTime(),r=Math.floor(o/1e3),h=Math.floor(r/60),v=Math.floor(h/60),y=Math.floor(v/24);return y>1?`${y} days ago`:y==1?`${y} day ago`:v>0?`${v} hours ago`:h>0?`${h} minutes ago`:r>0?`${r} seconds ago`:"just now"},T=C=>{C&&(l.value.viewjob=!0,l.value.context.__key=C)},_=C=>{t("edit",C)},A=C=>{t("remove",C)};return(C,f)=>{const a=ce("currency");return d(),m("span",Co,[i.value?(d(),m("div",To,[p(M,{isLoading:i.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",ko,[s.job.live?(d(),m("div",Io,Eo)):(d(),m("div",jo,No)),e("p",Po,w(g(de)(s.job.createdAt)?k(s.job.createdAt):s.job.createdAt),1)]),e("div",Ro,[e("p",Vo,w(s.job.title),1)]),e("div",Bo,[p(g(je),{class:"w-5 h-5"}),e("p",Fo,w(s.job.location),1)]),e("div",Mo,[e("p",Do,w(s.job.description.substring(0,197)+"..."),1)]),e("div",Uo,[e("div",Go,[zo,Q(e("p",Yo,null,512),[[a,s.job.salaryMin]])]),e("div",Jo,[qo,Q(e("p",Wo,null,512),[[a,s.job.salaryMax]])])]),e("div",Ho,[s.showButtons?(d(),m(N,{key:0},[s.job.live?O("",!0):(d(),F(g(ge),{key:0,onClick:f[0]||(f[0]=o=>b(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})),s.job.live?(d(),F(g(_e),{key:1,onClick:f[1]||(f[1]=o=>I(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})):O("",!0),p(g(ue),{onClick:f[2]||(f[2]=o=>A(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"}),p(g(xe),{onClick:f[3]||(f[3]=o=>_(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})],64)):O("",!0),p(g(ve),{onClick:f[4]||(f[4]=o=>T(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})])])}}}),Qo={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-4"},Xo={class:"p-2"},Zo=e("span",{class:"text-sm font-medium text-slate-300"},"Created",-1),ea={class:"text-4xl font-bold text-slate-500"},ta={class:"p-2"},sa=e("span",{class:"text-sm font-medium text-slate-300"},"Live",-1),la={class:"text-4xl font-bold text-slate-500"},oa={class:"p-2"},aa=e("span",{class:"text-sm font-medium text-slate-300"},"Views",-1),na={class:"text-4xl font-bold text-slate-500"},ia={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},ca={class:"p-2 flex items-center justify-center"},da={class:"p-2 sm:p-4 grid gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},ua={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},ra=e("p",{class:"italic"},"No job posts",-1),va=[ra],fa={key:2},ma=V({__name:"JobsContentComponent",setup(s){const{user:x}=R(q()),{modals:c,notifications:l}=R(P()),n=P().NOTIFICATION_TYPES,t=$([]),i=$(!1),{subscribe:b,unsubscribe:I}=D("jobs",[["posterId","==",x.value.uid]],["createdAt","desc"],r=>{t.value.docs=r},r=>{l.value.show=!0,l.value.type=n.ERROR,l.value.message="Error loading jobs, please try again later."},i,()=>{},()=>{},r=>{l.value.show=!0,l.value.type=n.SUCCESS,l.value.message="Job has been created."},r=>{l.value.show=!0,l.value.type=n.SUCCESS,l.value.message="Job has been removed."}),k=()=>{c.value.addjob=!0},T=r=>{c.value.confirmremove=!0,c.value.context={__key:"job",jobId:r}},_=r=>{c.value.editjob=!0;const h=t.value.docs.find(v=>v.jobId==r);c.value.context=h},A=j(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(r=>r.live==!0).length);U(async()=>{b(),a()}),se(()=>{I(),o()});const C=$(0),f=$(!1),{subscribe:a,unsubscribe:o}=D("ads",[["posterId","==",x.value.uid]],["createdAt","desc"],r=>{let h=0;r.forEach(v=>{h+=v.viewCount?v.viewCount:0}),C.value=h},void 0,f);return(r,h)=>(d(),m(N,null,[e("div",Qo,[e("div",Xo,[Zo,e("p",ea,w(t.value.docs&&t.value.docs.length),1)]),e("div",ta,[sa,e("p",la,w(A.value),1)]),e("div",oa,[aa,e("p",na,w(C.value),1),f.value?(d(),m("div",ia,[p(M,{isLoading:f.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",ca,[p(re,{classes:"w-full",onClick:k},{default:L(()=>[J(" Create job ")]),_:1})])]),e("span",da,[t.value.docs&&t.value.docs.length>0&&!i.value?(d(!0),m(N,{key:0},W(t.value.docs,(v,y)=>(d(),F(Ko,{key:y,job:v,onEdit:_,onRemove:T},null,8,["job"]))),128)):t.value.docs&&t.value.docs.length==0&&!i.value?(d(),m("span",ua,va)):(d(),m("div",fa,[p(M,{isLoading:i.value},null,8,["isLoading"])]))])],64))}}),ha={class:"w-full"},pa={key:0,class:"w-full"},$a=V({__name:"UserBoardView",setup(s){const{profile:x}=R(q()),c=q().ACCOUNT_TYPES,l=$(0),n={ADS:"Ads",CONTRACTS:"Contracts",JOBS:"Job posts",GIGS:"Gigs",APPLICATIONS:"Applications"};return(t,i)=>(d(),m("div",ha,[g(x)?(d(),m("div",pa,[p(g(Qe),null,{default:L(()=>[p(g(Xe),{class:"w-full flex justify-between sm:justify-start sm:space-x-1 p-1"},{default:L(()=>[(d(),m(N,null,W(n,(b,I,k)=>p(g(Te),{as:"template",key:I,onClick:T=>l.value=k},{default:L(({selected:T})=>[e("button",{class:K(["sm:w-24 rounded-lg py-2.5 text-sm font-medium cursor-pointer",T?"text-blue-500 focus:outline-none":"text-slate-500"])},w(b),3)]),_:2},1032,["onClick"])),64)),g(x).accountType===g(c).BUYER?(d(),F(g(Te),{key:0,as:"template",onClick:i[0]||(i[0]=b=>l.value=5)},{default:L(({selected:b})=>[e("button",{class:K(["w-24 rounded-lg py-2.5 text-sm font-medium cursor-pointer",b?"text-blue-500 focus:outline-none":"text-slate-500"])}," Bids ",2)]),_:1})):O("",!0)]),_:1}),p(g(ee),null,{default:L(()=>[g(x).accountType==g(c).SELLER?(d(),F(Jt,{key:0})):O("",!0),g(x).accountType==g(c).BUYER?(d(),F(is,{key:1})):O("",!0)]),_:1}),p(g(ee),null,{default:L(()=>[p($o)]),_:1}),p(g(ee),null,{default:L(()=>[p(ma)]),_:1}),p(g(ee),null,{default:L(()=>[p(il)]),_:1}),p(g(ee),null,{default:L(()=>[p(Yl)]),_:1}),p(g(ee),null,{default:L(()=>[p(fs)]),_:1})]),_:1})])):O("",!0)]))}});export{$a as default};
