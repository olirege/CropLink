import{d as v,u as $,e as s,f as o,g as r,t as G,F as p,k as f,p as i,h as g,o as w,q as _,l as m,L,D as h,s as E,a as y,G as A,y as k}from"./index-bd340418.js";import{_ as T}from"./SellerAdThumbnailCard.vue_vue_type_script_setup_true_lang-8f4625c1.js";import{_ as V}from"./BuyerAdCard.vue_vue_type_script_setup_true_lang-3a3b6389.js";import"./ImageCarousel-df949461.js";const b={key:0,class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300"},x={class:"flex flex-wrap flex-row gap-4"},S=["src","alt","onClick"],R=v({__name:"GroupedAdCard",props:{adGroup:{type:Object,required:!0}},setup(u){const l=$(),e=(a,n)=>{console.log("go to seller ads",a),l.push({name:"seller-ads",params:{id:a,sellerName:n}})},c=a=>{console.log("go to ad",a),l.push({name:"ad",params:{adId:a}})};return(a,n)=>u.adGroup?(s(),o("span",b,[r("h1",{class:"font-lg mb-4 underline",onClick:n[0]||(n[0]=t=>e(u.adGroup.id,u.adGroup.name))},G(`${u.adGroup.name}'s ads`),1),r("div",x,[(s(!0),o(p,null,f(u.adGroup.samples,t=>(s(),o("span",null,[r("img",{src:t.image,alt:t.name,class:"w-20 h-20 object-cover rounded-lg",onClick:d=>c(t.adId)},null,8,S)]))),256))])])):i("",!0)}}),B={key:0,class:"grid grid-cols-3 gap-4"},N={key:0},O=r("p",null,"No ads yet",-1),P=[O],U={key:1},Y=v({__name:"GroupedAdsComponent",setup(u){const l=g(!1),e=g([]),c=async()=>{l.value=!0,e.value=await h("ads",["updatedAt","desc"],3),l.value=!1},a=async()=>{const n=e.value.lastVisible,t=await h("ads",["updatedAt","desc"],6,n);e.value={lastVisible:t.lastVisible,docs:[...e.value.docs,...t.docs]}};return w(async()=>{await c()}),(n,t)=>(s(),o(p,null,[r("div",null,[e.value&&e.value.docs&&e.value.docs.length>0&&!l.value?(s(),o("span",B,[(s(!0),o(p,null,f(e.value.docs,d=>(s(),_(R,{adGroup:d,key:d.id},null,8,["adGroup"]))),128))])):i("",!0),r("div",{class:"flex flex-row justify-end"},[r("p",{onClick:a,class:"font-sm underline font-bold"}," View more ")])]),e.value&&e.value.docs&&e.value.docs.length==0&&!l.value?(s(),o("span",N,P)):(s(),o("div",U,[m(L,{isLoading:l.value},null,8,["isLoading"])]))],64))}}),j={class:"p-6"},D={key:0,class:"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},F={key:1},H=v({__name:"FeedView",setup(u){const{profile:l}=E(y()),e=y().ACCOUNT_TYPES,c=g([]),a=g(!1);return w(async()=>{var t;a.value=!0,((t=l.value)==null?void 0:t.accountType)==e.SELLER?e.BUYER:e.SELLER;const n=await A("ads","live","==",!0,["postedOn","desc"],25);console.log("ads",n),c.value=n.docs,a.value=!1}),(n,t)=>(s(),o(p,null,[r("div",j,[m(Y)]),c.value.length>0&&!a.value?(s(),o("div",D,[(s(!0),o(p,null,f(c.value,(d,C)=>(s(),o(p,{key:C},[d.adType==k(e).SELLER?(s(),_(T,{key:0,ad:d},null,8,["ad"])):i("",!0),d.adType==k(e).BUYER?(s(),_(V,{key:1,ad:d},null,8,["ad"])):i("",!0)],64))),128))])):i("",!0),a.value?(s(),o("div",F,[m(L,{isLoading:a.value},null,8,["isLoading"])])):i("",!0)],64))}});export{H as default};
