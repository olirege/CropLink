import{d as v,u as C,e as s,f as a,g as u,t as A,F as c,k as m,p,h as g,o as y,q as k,l as _,L as w,D as f,s as G,a as h,G as $,y as L}from"./index-990be236.js";import{_ as V}from"./SellerAdThumbnailCard.vue_vue_type_script_setup_true_lang-7518a980.js";import"./ImageCarousel-235e652f.js";const b={key:0,class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300"},x={class:"flex flex-wrap flex-row gap-4"},T=["src","alt","onClick"],S=v({__name:"GroupedAdCard",props:{adGroup:{type:Object,required:!0}},setup(r){const n=C(),e=(o,d)=>{console.log("go to seller ads",o),n.push({name:"seller-ads",params:{id:o,sellerName:d}})},l=o=>{console.log("go to ad",o),n.push({name:"ad",params:{adId:o}})};return(o,d)=>r.adGroup?(s(),a("span",b,[u("h1",{class:"font-lg mb-4 underline",onClick:d[0]||(d[0]=t=>e(r.adGroup.id,r.adGroup.name))},A(`${r.adGroup.name}'s ads`),1),u("div",x,[(s(!0),a(c,null,m(r.adGroup.samples,t=>(s(),a("span",null,[u("img",{src:t.image,alt:t.name,class:"w-20 h-20 object-cover rounded-lg",onClick:i=>l(t.adId)},null,8,T)]))),256))])])):p("",!0)}}),N={key:0,class:"grid grid-cols-3 gap-4"},B={key:0},E=u("p",null,"No ads yet",-1),O=[E],P={key:1},j=v({__name:"GroupedAdsComponent",setup(r){const n=g(!1),e=g([]),l=async()=>{n.value=!0,e.value=await f("ads",["updatedAt","desc"],3),n.value=!1},o=async()=>{const d=e.value.lastVisible,t=await f("ads",["updatedAt","desc"],6,d);e.value={lastVisible:t.lastVisible,docs:[...e.value.docs,...t.docs]}};return y(async()=>{await l()}),(d,t)=>(s(),a(c,null,[u("div",null,[e.value&&e.value.docs&&e.value.docs.length>0&&!n.value?(s(),a("span",N,[(s(!0),a(c,null,m(e.value.docs,i=>(s(),k(S,{adGroup:i,key:i.id},null,8,["adGroup"]))),128))])):p("",!0),u("div",{class:"flex flex-row justify-end"},[u("p",{onClick:o,class:"font-sm underline font-bold"}," View more ")])]),e.value&&e.value.docs&&e.value.docs.length==0&&!n.value?(s(),a("span",B,O)):(s(),a("div",P,[_(w,{isLoading:n.value},null,8,["isLoading"])]))],64))}}),D={class:"p-6"},F={key:0,class:"p-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},M={key:1},Y=v({__name:"FeedView",setup(r){G(h());const n=h().ACCOUNT_TYPES,e=g([]),l=g(!1);return y(async()=>{l.value=!0;const o=await $("ads","live","==",!0,["postedOn","desc"],25);console.log("ads",o),e.value=o.docs,l.value=!1}),(o,d)=>(s(),a(c,null,[u("div",D,[_(j)]),e.value.length>0&&!l.value?(s(),a("div",F,[(s(!0),a(c,null,m(e.value,(t,i)=>(s(),a(c,{key:i},[t.adType==L(n).SELLER?(s(),k(V,{key:0,ad:t,showButtons:!1},null,8,["ad"])):p("",!0)],64))),128))])):p("",!0),l.value?(s(),a("div",M,[_(w,{isLoading:l.value},null,8,["isLoading"])])):p("",!0)],64))}});export{Y as default};
