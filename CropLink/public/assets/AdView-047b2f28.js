import{d as k,s as w,y as I,h as _,o as A,z as B,e as a,f as n,g as e,A as T,x as i,t,i as c,F as g,k as C,p as D,L,B as S,m as V,C as N,D as F,G,H as h,I as P,l as v,J as q,K as H,M}from"./index-b85785d0.js";import{I as j}from"./ImageCarousel-19a04952.js";const E={key:0,class:"grid grid-cols-2 gap-x-4 p-5"},W={class:"w-full h-48 object-cover rounded-lg"},z={class:"text-xl font-semibold mb-2"},J={class:"text-sm mb-2"},K=e("strong",null,"Id:",-1),O={class:"text-sm mb-2"},R=e("strong",null,"Variety:",-1),U={class:"text-sm mb-2"},Y=e("strong",null,"Yield Tonnage:",-1),Q={class:"text-sm mb-2"},X=e("strong",null,"Expected Harvest Date:",-1),Z={class:"text-sm mb-2"},$=e("strong",null,"Price:",-1),ee={key:0},se=e("p",null,"No bids yet",-1),te=[se],ae={key:1},oe={class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4"},ne={class:"flex flex-row space-x-4"},le=e("label",{class:"block text-sm font-medium text-gray-700"},"Buyer",-1),de={class:"text-sm"},ie={class:"flex flex-row space-x-4"},ce=e("label",{class:"block text-sm font-medium text-gray-700"},"Offer",-1),re={class:"text-sm"},ue={class:"flex flex-row space-x-4"},_e=e("label",{class:"block text-sm font-medium text-gray-700"},"Time",-1),me={class:"text-sm"},pe={key:1},ve=k({__name:"AdView",props:{adId:{type:String,required:!0}},setup(x){const{modals:b}=w(I()),r=x,s=_({}),o=_([]),l=_(!1);let m;const f=async()=>{l.value=!0,s.value=await S("ads",r.adId),o.value=await V("bids","adId","==",r.adId,"status","==","pending",["createdAt","desc"],10),l.value=!1,m=N(F(P(M,"bids"),h("adId","==",r.adId),h("status","==","pending"),G("createdAt","desc")),p=>{o.value=p.docs.map(u=>({id:u.id,...u.data()}))})},y=()=>{b.value.addbid=!0};return A(async()=>{await f()}),B(()=>{m()}),(p,u)=>(a(),n(g,null,[s.value&&!l.value?(a(),n("div",E,[e("div",null,[e("div",W,[s.value.images&&s.value.images.length>0?(a(),T(j,{key:0,images:s.value.images},null,8,["images"])):i("",!0)]),e("h3",z,t(s.value.type),1),e("p",J,[K,c(" "+t(s.value.id),1)]),e("p",O,[R,c(" "+t(s.value.variety),1)]),e("p",U,[Y,c(" "+t(s.value.yieldTonnage),1)]),e("p",Q,[X,c(" "+t(s.value.expectedHarvestDate),1)]),e("p",Z,[$,c(" "+t(s.value.price),1)])]),e("div",null,[e("button",{onClick:y,class:"mt-2 mb-2 w-full inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},"Place a bid"),!o.value||o.value.length==0?(a(),n("span",ee,te)):i("",!0),o.value&&o.value.length>0?(a(),n("span",ae,[(a(!0),n(g,null,C(o.value,d=>(a(),n("div",oe,[e("div",ne,[le,e("p",de,t(d.buyerId.substring(0,5)),1)]),e("div",ie,[ce,e("p",re,t(d.price),1)]),e("div",ue,[_e,e("p",me,t(v(q)(d.createdAt)?v(H)(d.createdAt):d.createdAt),1)])]))),256))])):i("",!0)])])):i("",!0),l.value?(a(),n("div",pe,[D(L,{isLoading:l.value},null,8,["isLoading"])])):i("",!0)],64))}});export{ve as default};
