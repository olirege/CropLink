import{d as v,u as C,e as s,f as a,g as r,t as A,F as i,k as m,p as g,h as p,o as y,q as k,l as _,L as w,D as f,s as G,a as h,G as $,y as L}from"./index-77675d52.js";import{_ as V}from"./SellerAdThumbnailCard.vue_vue_type_script_setup_true_lang-62b56017.js";import"./ImageCarousel-86bf2d28.js";const b={key:0,class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300"},x={class:"flex flex-wrap flex-row gap-4"},T=["src","alt","onClick"],S=v({__name:"GroupedAdCard",props:{adGroup:{type:Object,required:!0}},setup(u){const n=C(),e=(o,d)=>{console.log("go to seller ads",o),n.push({name:"seller-ads",params:{id:o,sellerName:d}})},l=o=>{console.log("go to ad",o),n.push({name:"ad",params:{adId:o}})};return(o,d)=>u.adGroup?(s(),a("span",b,[r("h1",{class:"font-lg mb-4 underline",onClick:d[0]||(d[0]=t=>e(u.adGroup.id,u.adGroup.name))},A(`${u.adGroup.name}'s ads`),1),r("div",x,[(s(!0),a(i,null,m(u.adGroup.samples,t=>(s(),a("span",null,[r("img",{src:t.image,alt:t.name,class:"w-20 h-20 object-cover rounded-lg",onClick:c=>l(t.adId)},null,8,T)]))),256))])])):g("",!0)}}),N={key:0,class:"grid grid sm:grid-cols-1 md:grid-cols-3 gap-4"},B={key:0},E=r("p",null,"No ads yet",-1),O=[E],P={key:1},j=v({__name:"GroupedAdsComponent",setup(u){const n=p(!1),e=p([]),l=async()=>{n.value=!0,e.value=await f("ads",["updatedAt","desc"],3),n.value=!1},o=async()=>{const d=e.value.lastVisible,t=await f("ads",["updatedAt","desc"],6,d);e.value={lastVisible:t.lastVisible,docs:[...e.value.docs,...t.docs]}};return y(async()=>{await l()}),(d,t)=>(s(),a(i,null,[r("div",null,[e.value&&e.value.docs&&e.value.docs.length>0&&!n.value?(s(),a("span",N,[(s(!0),a(i,null,m(e.value.docs,c=>(s(),k(S,{adGroup:c,key:c.id},null,8,["adGroup"]))),128))])):g("",!0),r("div",{class:"flex flex-row justify-end"},[r("p",{onClick:o,class:"font-sm underline font-bold"}," View more ")])]),e.value&&e.value.docs&&e.value.docs.length==0&&!n.value?(s(),a("span",B,O)):(s(),a("div",P,[_(w,{isLoading:n.value},null,8,["isLoading"])]))],64))}}),D={class:"p-6"},F={key:0,class:"p-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},M={key:1},Y=v({__name:"FeedView",setup(u){G(h());const n=h().ACCOUNT_TYPES,e=p([]),l=p(!1);return y(async()=>{l.value=!0;const o=await $("ads","live","==",!0,["postedOn","desc"],25);console.log("ads",o),e.value=o.docs,l.value=!1}),(o,d)=>(s(),a(i,null,[r("div",D,[_(j)]),e.value.length>0&&!l.value?(s(),a("div",F,[(s(!0),a(i,null,m(e.value,(t,c)=>(s(),a(i,{key:c},[t.adType==L(n).SELLER?(s(),k(V,{key:0,ad:t,showButtons:!1},null,8,["ad"])):g("",!0)],64))),128))])):g("",!0),l.value?(s(),a("div",M,[_(w,{isLoading:l.value},null,8,["isLoading"])])):g("",!0)],64))}});export{Y as default};
