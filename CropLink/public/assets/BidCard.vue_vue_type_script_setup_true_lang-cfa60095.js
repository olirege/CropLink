import{d as _,s as T,n as E,a as S,u as O,r as V,K as j,e as l,f as k,C as n,k as s,t as b,A as m,a1 as F,w as M,B as h,q as g,j as y,y as P,x as A,z as R}from"./index-d4d9ec3f.js";const q={class:"bg-white p-2 rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4"},U={key:0,class:"flex flex-row space-x-4"},L={class:"text-sm text-green-400"},W={class:"flex flex-row space-x-4 justify-end h-6"},Y={class:"text-xs italic"},z={class:"flex flex-row justify-between h-6 items-center"},G={class:"flex flex-row space-x-4"},K=s("label",{class:"block text-sm font-medium text-gray-700"},"Buyer",-1),H={class:"text-sm"},J={class:"flex flex-row space-x-4"},Q=s("label",{class:"block text-sm font-medium text-gray-700"},"Offer",-1),X={class:"text-sm font-bold"},Z={class:"flex justify-end mt-2 space-x-4"},ee=_({__name:"BidCard",props:{bid:{type:Object,required:!0},sellerId:{type:String,required:!0},showViewButton:{type:Boolean,default:!0}},setup(e){const{notifications:i}=T(E()),w=E().NOTIFICATION_TYPES,{user:x}=T(S()),d=S().BID_STATUSES,C=O(),v=V(!1),D=async t=>{if(!t)return;const{callFunction:a}=R("cancelBid",{bidId:t},v,void 0,void 0,()=>{i.value.show=!0,i.value.type=w.SUCCESS,i.value.message="Bid cancelled successfully"},u=>{i.value.show=!0,i.value.type=w.ERROR,i.value.message="Error while cancelling bid, please try again later"});await a()},I=t=>{t&&C.push({name:"ad",params:{adId:t}})},N=t=>{t&&(console.log("contactWinner",t),C.push({name:"messaging",params:{adId:t}}))},$=t=>{const a=new Date,u=t.toDate(),f=a.getTime()-u.getTime(),o=Math.floor(f/1e3),c=Math.floor(o/60),r=Math.floor(c/60),B=Math.floor(r/24);return B>0?`${B} days ago`:r>0?`${r} hours ago`:c>0?`${c} minutes ago`:o>0?`${o} seconds ago`:"just now"};return(t,a)=>{var f,o,c;const u=j("currency");return l(),k("div",q,[e.bid.status==n(d).ACCEPTED?(l(),k("div",U,[s("p",L,b(e.bid.status==n(d).ACCEPTED?"Winning Bid":e.bid.status),1)])):m("",!0),s("div",W,[s("p",Y,b(n(F)(e.bid.createdAt)?$(e.bid.createdAt):e.bid.createdAt),1)]),s("span",z,[s("div",G,[K,s("p",H,b(e.bid.buyerId.substring(0,5)),1)]),s("div",J,[Q,M(s("p",X,null,512),[[u,e.bid.price]])])]),s("div",Z,[e.bid.status===n(d).PENDING&&e.bid.buyerId==((f=n(x))==null?void 0:f.uid)?(l(),h(P,{key:0,isLoading:v.value,onClick:a[0]||(a[0]=r=>D(e.bid.id))},{default:g(()=>[y(" Cancel Bid ")]),_:1},8,["isLoading"])):m("",!0),e.showViewButton?(l(),h(A,{key:1,onClick:a[1]||(a[1]=r=>I(e.bid.adId))},{default:g(()=>[y(" View ")]),_:1})):m("",!0),e.bid.status==n(d).ACCEPTED&&(e.bid.buyerId==((o=n(x))==null?void 0:o.uid)||e.sellerId==((c=n(x))==null?void 0:c.uid))?(l(),h(A,{key:2,onClick:a[2]||(a[2]=r=>N(e.bid.adId))},{default:g(()=>[y(" Contact ")]),_:1})):m("",!0)])])}}});export{ee as _};
