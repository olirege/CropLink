import{_ as I}from"./SellerAdCard.vue_vue_type_script_setup_true_lang-fcd1834a.js";import{e as s,f as l,j as e,d as y,r as d,t as o,F as B,l as L,n as g,L as k,B as r,aO as S,s as T,m as b,o as $,A as i,p as C,q as N,y as j,aR as h,i as F,c as q,a4 as O,Z as A}from"./index-6a4b7e8c.js";import"./ImageCarousel-481bf7b6.js";import"./CheckCircleIcon-8459d036.js";function x(a,c){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}const E={class:"flex min-h-full items-center"},P={key:0},R={class:"flex flex-col gap-2 justify-start items-start border rounded-md"},D={class:"px-5 pt-5 text-left"},M={class:"text-xl font-bold"},V={class:"text-md"},G={class:"w-full border-t-2 max-h-64 overflow-y-scroll"},Y={class:"text-md text-left p-5"},z={class:"w-full flex flex-col gap-2 justify-start items-start px-5 pb-5"},U=e("label",{class:"text-lg font-semibold border-b pb-2"},"Milestones:",-1),Z={class:"w-full p-2 border rounded-md resize-none focus:border-blue-500 focus:ring-0 flex flex-col gap-2"},H={class:"flex flex-row justify-between"},J={class:"flex flex-row items-center gap-2"},K={class:"font-bold text-xl"},Q={class:"italic text-xl"},W={class:"flex flex-row gap-4"},X={key:1},ee=y({__name:"GigDetailCard",props:{gig:{type:Object,required:!0}},setup(a){const c=d(!1);return(p,u)=>(s(),l("div",E,[a.gig&&!c.value?(s(),l("div",P,[e("div",R,[e("span",D,[e("h1",M,o(a.gig.title),1),e("p",V,o(a.gig.location),1)]),e("div",G,[e("p",Y,o(a.gig.description),1)]),e("div",z,[U,(s(!0),l(B,null,L(a.gig.milestones,(t,n)=>(s(),l("span",Z,[e("span",H,[e("span",J,[e("p",K,o(n+1+"."),1),e("p",Q,o(t.name),1)]),e("span",W,[g(r(S),{class:"h-6 w-6"}),e("p",null,o(t.price),1)])]),e("p",null,o(t.description.substring(0,300)+"..."),1)]))),256))])])])):(s(),l("div",X,[g(k,{isLoading:c.value},null,8,["isLoading"])]))]))}}),se={class:"sm:sticky sm:top-0"},te={key:0,class:"border rounded-md p-2 sm:p-4 flex flex-col gap-4"},oe={class:"flex flex-row justify-between gap-4"},ae=e("label",null,"Escrow Transaction:",-1),ne={class:"font-bold"},le={class:"sm:ml-2 flex flex-col"},ce={class:"flex flex row gap-4"},ie=e("label",{class:"font-bold"},"Amount:",-1),re={class:"flex flex row gap-4"},de=e("label",{class:"font-bold"},"Seller:",-1),ue={class:"flex flex row gap-4"},_e=e("label",{class:"font-bold"},"Buyer:",-1),fe={class:"flex flex-col gap-2 sm:gap-4 mt-2"},pe=e("label",{class:"font-bold"},"Payment status:",-1),ge={class:"flex flex-row gap-4 justify-between"},he={class:"flex flex-col items-center p-2"},xe=e("label",null,"Sent",-1),me={class:"flex flex-col items-center p-2"},ve=e("label",null,"Recieved",-1),ye={class:"flex flex-col items-center p-2"},we=e("label",null,"Secured",-1),be={class:"flex flex-col items-center p-2"},ke=e("label",null,"Disbursed",-1),$e={key:1,class:"flex items-center justify-center h-[300px]"},Ie=y({__name:"BankingComponent",props:{contractId:{type:String,required:!0},transactionId:{type:String,required:!1}},setup(a){const{notifications:c}=T(b()),p=b().NOTIFICATION_TYPES,u=a,t=d({}),n=d(!1),_=d({}),m=async()=>{if(!u.contractId)return console.error("No contract id provided");const{callFunction:v}=j("getTransaction",{transactionId:u.contractId},n,void 0,f=>{if(!f||!f.data.transaction)return console.error("No transaction found");t.value=f.data.transaction,_.value=f.data.landingPage},()=>{},f=>{c.value.show=!0,c.value.type=p.ERROR,c.value.message="Error while fetching transaction, please try again later"});await v()},w=()=>{if(!_.value)return console.error("No landing page found");window.open(_.value,"_blank")};return $(async()=>{await m()}),(v,f)=>(s(),l("div",se,[t.value.id?(s(),l("div",te,[e("div",oe,[ae,e("p",ne,o(t.value.id)+"#",1)]),e("p",null,o(t.value.description),1),e("div",le,[e("div",ce,[ie,e("p",null,o(t.value.items[0].schedule[0].amount),1)]),e("div",re,[de,e("p",null,o(t.value.items[0].schedule[0].beneficiary_customer),1)]),e("div",ue,[_e,e("p",null,o(t.value.items[0].schedule[0].payer_customer),1)]),e("div",fe,[pe,e("div",ge,[e("div",he,[xe,t.value.items[0].schedule[0].status.payment_sent?(s(),i(r(h),{key:0,class:"text-green-500 w-5 h-5"})):(s(),i(r(x),{key:1,class:"text-red-500 w-5 h-5"}))]),e("div",me,[ve,t.value.items[0].schedule[0].status.payment_sent?(s(),i(r(h),{key:0,class:"text-green-500 w-5 h-5"})):(s(),i(r(x),{key:1,class:"text-red-500 w-5 h-5"}))]),e("div",ye,[we,t.value.items[0].schedule[0].status.secured?(s(),i(r(h),{key:0,class:"text-green-500 w-5 h-5"})):(s(),i(r(x),{key:1,class:"text-red-500 w-5 h-5"}))]),e("div",be,[ke,t.value.items[0].schedule[0].status.disbursed_to_beneficiary?(s(),i(r(h),{key:0,class:"text-green-500 w-5 h-5"})):(s(),i(r(x),{key:1,class:"text-red-500 w-5 h-5"}))])])])])])):(s(),l("div",$e,[g(k,{isLoading:n.value},null,8,["isLoading"])])),g(N,{onClick:w,classes:"w-full"},{default:C(()=>[F("View")]),_:1})]))}}),Be={class:"flex flex-col sm:grid sm:grid-cols-2 sm:gap-x-4 sm:p-4"},Le={key:2},Se=e("p",null," Failed to load ad ",-1),Te=[Se],qe=y({__name:"BankingView",props:{adId:{type:String,required:!0},contractId:{type:String,required:!0},transactionId:{type:String,required:!0}},setup(a){const c=a,p=d({}),u=d(!1),t=async()=>{u.value=!0,p.value=await O("ads",c.adId),u.value=!1},n=d({}),_=d(!1),m=async()=>{_.value=!0,n.value=await A("contracts",c.contractId),_.value=!1};return $(async()=>{await t(),await m()}),q(()=>{}),(w,v)=>(s(),l("div",Be,[n.value&&n.value.type=="sell"?(s(),i(I,{key:0,ad:p.value,showButtons:!1},null,8,["ad"])):n.value&&n.value.type=="gig"?(s(),i(ee,{key:1,gig:n.value.context,showButtons:!1,class:"sm:order-first order-last"},null,8,["gig"])):(s(),l("div",Le,Te)),g(Ie,{contractId:a.contractId},null,8,["contractId"])]))}});export{qe as default};
