import{d as S,s as T,m as g,r as h,J as N,e as y,f as w,j as o,t as l,i as n,w as C,n as r,p as u,q as _,x,z as B,y as b}from"./index-6a4b7e8c.js";const O={class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300"},P={class:"text-xl font-semibold mb-2"},k={class:"text-sm mb-2"},F=o("strong",null,"Id:",-1),D={class:"text-sm mb-2"},$={class:"text-sm mb-2"},p=o("strong",null,"Quantity:",-1),q={key:0,class:"flex justify-end mt-2 space-x-4"},L={class:"text-sm mb-2"},V=o("strong",null,"Request Date:",-1),I=S({__name:"BuyerAdCard",props:{ad:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},setup(e){const{modals:c,notifications:t}=T(g()),i=g().NOTIFICATION_TYPES,v=h(!1),A=async a=>{if(!a)return;const{callFunction:s}=b("postAd",{adId:a},v,void 0,void 0,()=>{t.value.show=!0,t.value.type=i.SUCCESS,t.value.message="Ad is live!"},d=>{t.value.show=!0,t.value.type=i.ERROR,t.value.message="Error while posting ad, please try again later"});await s()},m=h(!1),E=async a=>{if(!a)return;const{callFunction:s}=b("removeAd",{adId:a},m,void 0,void 0,()=>{t.value.show=!0,t.value.type=i.SUCCESS,t.value.message="Ad removed!"},d=>{t.value.show=!0,t.value.type=i.ERROR,t.value.message="Error while removing ad, please try again later"});await s()},R=async a=>{a&&(console.log("removeAd",a),c.value.editad=!0,c.value.context=ads.value.docs.find(s=>s.id===a))};return(a,s)=>{const d=N("currency");return y(),w("div",O,[o("h3",P,l(e.ad.type),1),o("p",k,[F,n(" "+l(e.ad.id),1)]),o("p",D,[C(o("span",null,null,512),[[d,e.ad.minCostPerTon]]),n("-"),C(o("span",null,null,512),[[d,e.ad.maxCostPerTon]]),n("/ton ")]),o("p",$,[p,n(" ~ "+l(e.ad.tons)+" tons ",1)]),e.showButtons?(y(),w("div",q,[o("p",L,[V,n(" "+l(e.ad.requestDate),1)]),r(_,{onClick:s[0]||(s[0]=f=>R(e.ad.id))},{default:u(()=>[n(" Edit ")]),_:1}),r(x,{isLoading:v.value,disabled:e.ad.live,onClick:s[1]||(s[1]=f=>A(e.ad.id))},{default:u(()=>[n(" Post ")]),_:1},8,["isLoading","disabled"]),r(x,{isLoading:m.value==e.ad.id,disabled:!e.ad.live,onClick:s[2]||(s[2]=f=>E(e.ad.id))},{default:u(()=>[n(" Remove ")]),_:1},8,["isLoading","disabled"])])):B("",!0)])}}});export{I as _};
