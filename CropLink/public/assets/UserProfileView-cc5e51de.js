import{d as C,h as m,e as p,f as b,g as e,w as d,v as u,l as $,m as h,i as v,_ as U,n as A,a as _,s as w,o as F,p as x,q as k,x as E,y as g,z as L,A as N,B as V,c as O,t as R}from"./index-77675d52.js";const T={class:"container mx-auto"},I={class:"w-full max-w-lg"},J={class:"flex flex-wrap -mx-3 mb-6"},K={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},B=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"first-name"}," First Name ",-1),D={class:"w-full md:w-1/2 px-3"},M=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"middle-name"}," Middle Name ",-1),Y={class:"flex flex-wrap -mx-3 mb-6"},j={class:"w-full px-3"},W=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"last-name"}," Last Name ",-1),q={class:"flex flex-wrap -mx-3 mb-6"},z={class:"w-full px-3"},G=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"email"}," Email ",-1),H={class:"flex flex-wrap -mx-3 mb-6"},Q={class:"w-full px-3"},X=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"address-line1"}," Address Line 1 ",-1),Z={class:"w-full px-3"},ee=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"address-line2"}," Address Line 2 ",-1),te={class:"flex flex-wrap -mx-3 mb-6"},se={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},oe=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"city"}," City ",-1),ae={class:"w-full md:w-1/2 px-3"},le=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"state"}," State ",-1),ne={class:"flex flex-wrap -mx-3 mb-6"},ie={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},re=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"country"}," Country ",-1),ce={class:"w-full md:w-1/2 px-3"},de=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"post-code"}," Postal Code ",-1),ue={class:"flex flex-wrap -mx-3 mb-6"},pe={class:"w-full px-3"},fe=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"phone-number"}," Phone Number ",-1),me={class:"flex flex-wrap -mx-3 mb-2"},be={class:"w-full md:w-1/3 px-3 mb-6 md:mb-0"},ge=C({__name:"EscrowSignupForm",emits:["success","failure","cancel"],setup(S,{emit:n}){const i=n,o=m({email:"",first_name:"",middle_name:"",last_name:"",address:{line1:"",line2:"",city:"",state:"",country:"",post_code:""},phone_number:""}),r=m(!1),c=()=>{o.value={email:"test@test.com",first_name:"John",middle_name:"Kane",last_name:"Smith",address:{line1:"1829 West Lane",line2:"Apartment 301020",city:"San Francisco",state:"CA",country:"US",post_code:"10203"},phone_number:"+18885118600"}},f=async()=>{r.value=!0;const l=JSON.parse(JSON.stringify(o.value)),s=await _().createEscrowUserAccount(l);r.value=!1,i(s?"success":"failure")};return(l,s)=>(p(),b("div",T,[e("span",I,[e("div",J,[e("div",K,[B,d(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.value.first_name=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",id:"first-name",type:"text",placeholder:"John"},null,512),[[u,o.value.first_name]])]),e("div",D,[M,d(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.value.middle_name=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"middle-name",type:"text",placeholder:"Kane"},null,512),[[u,o.value.middle_name]])])]),e("div",Y,[e("div",j,[W,d(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.last_name=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"last-name",type:"text",placeholder:"Smith"},null,512),[[u,o.value.last_name]])])]),e("div",q,[e("div",z,[G,d(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.value.email=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"email",type:"email",placeholder:"john@test.escrow.com"},null,512),[[u,o.value.email]])])]),e("div",H,[e("div",Q,[X,d(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.value.address.line1=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"address-line1",type:"text",placeholder:"1829 West Lane"},null,512),[[u,o.value.address.line1]])]),e("div",Z,[ee,d(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.value.address.line2=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"address-line2",type:"text",placeholder:"Apartment 301020"},null,512),[[u,o.value.address.line2]])])]),e("div",te,[e("div",se,[oe,d(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>o.value.address.city=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"city",type:"text",placeholder:"San Francisco"},null,512),[[u,o.value.address.city]])]),e("div",ae,[le,d(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>o.value.address.state=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"state",type:"text",placeholder:"CA"},null,512),[[u,o.value.address.state]])])]),e("div",ne,[e("div",ie,[re,d(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>o.value.address.country=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"country",type:"text",placeholder:"US"},null,512),[[u,o.value.address.country]])]),e("div",ce,[de,d(e("input",{"onUpdate:modelValue":s[9]||(s[9]=t=>o.value.address.post_code=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"post-code",type:"text",placeholder:"10203"},null,512),[[u,o.value.address.post_code]])])]),e("div",ue,[e("div",pe,[fe,d(e("input",{"onUpdate:modelValue":s[10]||(s[10]=t=>o.value.phone_number=t),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"phone-number",type:"text",placeholder:"+18885118600"},null,512),[[u,o.value.phone_number]])])]),e("div",me,[$(U,{onClick:c},{default:h(()=>[v(" Dev Fill Form ")]),_:1}),e("div",be,[$(A,{isLoading:r.value,onClick:f},{default:h(()=>[v(" Submit ")]),_:1},8,["isLoading"]),e("button",{onClick:s[11]||(s[11]=t=>l.$emit("cancel"))}," Cancel ")])])])]))}}),ye={class:"container mx-auto"},_e={class:"w-full max-w-lg"},xe={class:"flex flex-wrap -mx-3 mb-6"},ve={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},he=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"email"}," Escrow Email ",-1),we=["disabled"],ke={class:"flex flex-wrap -mx-3 mb-6"},Ce={class:"w-full px-3"},Se=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"api-key"}," Escrow Api Key ",-1),$e=["disabled"],Pe={class:"w-full flex justify-between"},Ee={key:0},Ue={key:1},Ae=C({__name:"EscrowLinkForm",emits:["success","failure"],setup(S,{emit:n}){const{profile:i}=w(_()),o=n,r=m({email:"",apiKey:""}),c=m(!1),f=async()=>{c.value=!0;const s=JSON.parse(JSON.stringify(r.value)),t=await _().linkEscrowUserAccount(s);c.value=!1,o(t?"success":"failure")},l=m(!0);return F(()=>{var s,t,a;(s=i.value)!=null&&s.escrowAuth&&(l.value=!1,r.value={email:(t=i.value)==null?void 0:t.escrowAuth.email,apiKey:(a=i.value)==null?void 0:a.escrowAuth.apiKey})}),(s,t)=>(p(),b("div",ye,[e("span",_e,[e("div",xe,[e("div",ve,[he,d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value.email=a),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",id:"email",type:"email",placeholder:"example@example.com",disabled:!l.value},null,8,we),[[u,r.value.email]])])]),e("div",ke,[e("div",Ce,[Se,d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.value.apiKey=a),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"api-key",type:"secret",placeholder:"1a2w3E4a5x6E7AD89",disabled:!l.value},null,8,$e),[[u,r.value.apiKey]])])]),e("div",Pe,[e("button",{onClick:t[2]||(t[2]=()=>l.value=!l.value)},[l.value?x("",!0):(p(),b("span",Ee,"Edit")),l.value?(p(),b("span",Ue,"Cancel")):x("",!0)]),l.value?(p(),k(A,{key:0,isLoading:c.value,onClick:f},{default:h(()=>[v(" Submit ")]),_:1},8,["isLoading"])):x("",!0)])])]))}}),Fe=e("h1",{class:"text-xl mb-4"},"Escrow Account Details",-1),Le=e("p",{class:"text-sm mb-6"}," In order to sell crops on CropLink, you must have an escrow account to hold the buyers money until the transaction is complete. You can either link an existing escrow account or create a new one. ",-1),Ne={key:0},Ve=e("p",{class:"text-lg italic mb-2"},"Link an Existing Escrow Account",-1),Oe=e("p",{class:"text-xs"}," If you already have an escrow account, you can link it to your CropLink account by entering your escrow email and api key below. ",-1),Re=e("p",{class:"text-xs font-bold mt-2 mb-4"},[v("For more info visit "),e("a",{href:"https://escrow.com",target:"_blank"},"escrow.com")],-1),Te=e("p",{class:"text-lg italic mb-4"},"Create an Escrow Account",-1),Ie=e("p",{class:"text-xs"}," If you do not have an escrow account, you can create one by clicking the button below. ",-1),Je=C({__name:"EscrowAccountComponent",setup(S){w(_());const{notifications:n}=w(E()),i=E().NOTIFICATION_TYPES,o=m(!1),r=m(!1),c=()=>{o.value=!o.value,o.value&&(r.value=!1)},f=s=>{s==i.ERROR&&(n.value.show=!0,n.value.type=i.ERROR,n.value.message="Failed to create escrow account"),s==i.SUCCESS&&(n.value.show=!0,n.value.type=i.SUCCESS,n.value.message="Successfully created escrow account")},l=()=>{f("success"),c()};return(s,t)=>(p(),b("div",null,[Fe,Le,o.value?x("",!0):(p(),b("div",Ne,[Ve,Oe,Re,$(Ae,{class:"mb-4",onSuccess:t[0]||(t[0]=a=>f(g(i).SUCCESS)),onFailure:t[1]||(t[1]=a=>f(g(i).ERROR))})])),e("span",null,[Te,Ie,o.value?x("",!0):(p(),k(U,{key:0,onClick:c},{default:h(()=>[v(" Create Escrow Account ")]),_:1})),o.value?(p(),k(ge,{key:1,onCancel:t[2]||(t[2]=()=>o.value=!1),onSuccess:l,onFailure:t[3]||(t[3]=a=>f(g(i).ERROR))})):x("",!0)])]))}}),Ke={class:"grid grid-cols-2 gap-x-4 p-5"},Be=e("h1",null,"User Profile",-1),De={key:0},Me=["src"],Ye={key:1},je=e("h2",null,"Change Profile Pic",-1),We=e("h2",null,"Change Banner Pic",-1),qe=["disabled"],Ge=C({__name:"UserProfileView",setup(S){const{profile:n,user:i}=w(_()),o=_().ACCOUNT_TYPES;let r;const c=m({profilePic:null,bannerPic:null});F(()=>{r=L(N(V,"users",i.value.uid),a=>{n.value=a.data()})}),O(()=>{r&&r()});const f=m(!1),l=a=>{const P=a.target.files[0],y=new FileReader;y.readAsDataURL(P),y.onload=()=>{a.target.name=="profilePic"&&(c.value.profilePic=y.result),a.target.name=="bannerPic"&&(c.value.bannerPic=y.result),f.value=!0}},s=m(!1),t=async()=>{s.value=!0,f.value=!1;const a=JSON.parse(JSON.stringify(c.value));a.profilePic=c.value.profilePic?c.value.profilePic.split(",")[1]:null,a.bannerPic=c.value.bannerPic?c.value.bannerPic.split(",")[1]:null,await _().updateProfileChanges(a),s.value=!1};return(a,P)=>{var y;return p(),b("div",Ke,[e("span",null,[Be,g(n)?(p(),b("div",De,[e("h2",null,R(g(n).name),1),e("img",{src:g(n).profilePic,class:"w-32 h-32 object-cover rounded-full"},null,8,Me)])):(p(),b("div",Ye,"Loading...")),e("div",null,[e("div",null,[je,e("input",{type:"file",onChange:l,ref:"profilePic",name:"profilePic"},null,544)]),e("div",null,[We,e("input",{type:"file",onChange:l,ref:"bannerPic",name:"bannerPic"},null,544)]),e("button",{disabled:!f.value,onClick:t},"Accept changes",8,qe)])]),((y=g(n))==null?void 0:y.accountType)==g(o).SELLER?(p(),k(Je,{key:0})):x("",!0)])}}});export{Ge as default};
