import{d as V,r as T,a5 as ie,a6 as Ne,a7 as ke,D as E,a8 as le,a9 as we,o as z,N as Re,aa as Pe,ab as D,ac as ce,ad as Le,F as R,ae as Se,af as Ae,ag as pe,ah as Ve,ai as Ce,aj as ne,ak as Y,al as ae,am as Fe,an as Be,ao as te,ap as J,e as r,f as v,j as e,m as P,s as L,u as _e,J as oe,n as _,L as U,z as O,A as M,t as w,B as x,a0 as re,w as K,i as H,$ as Ee,a1 as ue,y as se,a as W,a3 as G,c as Z,p as N,q as de,l as Q,V as De,U as je,T as Ue,W as q,H as Te}from"./index-6a4b7e8c.js";import{I as Me}from"./ImageCarousel-481bf7b6.js";import{r as ge,a as xe,b as be,c as ve}from"./PencilIcon-6012585b.js";import{_ as Ge}from"./BuyerAdCard.vue_vue_type_script_setup_true_lang-281b130c.js";import{_ as ze}from"./BidCard.vue_vue_type_script_setup_true_lang-2a007019.js";import{R as Ye,h as Je,y as me,M as qe}from"./menu-300a0e20.js";let We=V({props:{onFocus:{type:Function,required:!0}},setup(s){let C=T(!0);return()=>C.value?ie(ke,{as:"button",type:"button",features:Ne.Focusable,onFocus(u){u.preventDefault();let o,i=50;function t(){var c;if(i--<=0){o&&cancelAnimationFrame(o);return}if((c=s.onFocus)!=null&&c.call(s)){C.value=!1,cancelAnimationFrame(o);return}o=requestAnimationFrame(t)}o=requestAnimationFrame(t)}}):null}});var He=(s=>(s[s.Forwards=0]="Forwards",s[s.Backwards=1]="Backwards",s))(He||{}),Ke=(s=>(s[s.Less=-1]="Less",s[s.Equal=0]="Equal",s[s.Greater=1]="Greater",s))(Ke||{});let Oe=Symbol("TabsContext");function fe(s){let C=pe(Oe,null);if(C===null){let u=new Error(`<${s} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,fe),u}return C}let ye=Symbol("TabsSSRContext"),Qe=V({name:"TabGroup",emits:{change:s=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(s,{slots:C,attrs:u,emit:o}){var i;let t=T((i=s.selectedIndex)!=null?i:s.defaultIndex),c=T([]),b=T([]),A=E(()=>s.selectedIndex!==null),S=E(()=>A.value?s.selectedIndex:t.value);function k(a){var l;let f=le(y.tabs.value,D),h=le(y.panels.value,D),d=f.filter(m=>{var n;return!((n=D(m))!=null&&n.hasAttribute("disabled"))});if(a<0||a>f.length-1){let m=ne(t.value===null?0:Math.sign(a-t.value),{[-1]:()=>1,0:()=>ne(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),n=ne(m,{0:()=>f.indexOf(d[0]),1:()=>f.indexOf(d[d.length-1])});n!==-1&&(t.value=n),y.tabs.value=f,y.panels.value=h}else{let m=f.slice(0,a),n=[...f.slice(a),...m].find(p=>d.includes(p));if(!n)return;let g=(l=f.indexOf(n))!=null?l:y.selectedIndex.value;g===-1&&(g=y.selectedIndex.value),t.value=g,y.tabs.value=f,y.panels.value=h}}let y={selectedIndex:E(()=>{var a,l;return(l=(a=t.value)!=null?a:s.defaultIndex)!=null?l:null}),orientation:E(()=>s.vertical?"vertical":"horizontal"),activation:E(()=>s.manual?"manual":"auto"),tabs:c,panels:b,setSelectedIndex(a){S.value!==a&&o("change",a),A.value||k(a)},registerTab(a){var l;if(c.value.includes(a))return;let f=c.value[t.value];c.value.push(a),c.value=le(c.value,D);let h=(l=c.value.indexOf(f))!=null?l:t.value;h!==-1&&(t.value=h)},unregisterTab(a){let l=c.value.indexOf(a);l!==-1&&c.value.splice(l,1)},registerPanel(a){b.value.includes(a)||(b.value.push(a),b.value=le(b.value,D))},unregisterPanel(a){let l=b.value.indexOf(a);l!==-1&&b.value.splice(l,1)}};we(Oe,y);let j=T({tabs:[],panels:[]}),I=T(!1);z(()=>{I.value=!0}),we(ye,E(()=>I.value?null:j.value));let $=E(()=>s.selectedIndex);return z(()=>{Re([$],()=>{var a;return k((a=s.selectedIndex)!=null?a:s.defaultIndex)},{immediate:!0})}),Pe(()=>{if(!A.value||S.value==null||y.tabs.value.length<=0)return;let a=le(y.tabs.value,D);a.some((l,f)=>D(y.tabs.value[f])!==D(l))&&y.setSelectedIndex(a.findIndex(l=>D(l)===D(y.tabs.value[S.value])))}),()=>{let a={selectedIndex:t.value};return ie(R,[c.value.length<=0&&ie(We,{onFocus:()=>{for(let l of c.value){let f=D(l);if((f==null?void 0:f.tabIndex)===0)return f.focus(),!0}return!1}}),ce({theirProps:{...u,...Le(s,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:C,attrs:u,name:"TabGroup"})])}}}),Xe=V({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(s,{attrs:C,slots:u}){let o=fe("TabList");return()=>{let i={selectedIndex:o.selectedIndex.value},t={role:"tablist","aria-orientation":o.orientation.value};return ce({ourProps:t,theirProps:s,slot:i,attrs:C,slots:u,name:"TabList"})}}}),Ie=V({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${Se()}`}},setup(s,{attrs:C,slots:u,expose:o}){let i=fe("Tab"),t=T(null);o({el:t,$el:t}),z(()=>i.registerTab(t)),Ae(()=>i.unregisterTab(t));let c=pe(ye),b=E(()=>{if(c.value){let l=c.value.tabs.indexOf(s.id);return l===-1?c.value.tabs.push(s.id)-1:l}return-1}),A=E(()=>{let l=i.tabs.value.indexOf(t);return l===-1?b.value:l}),S=E(()=>A.value===i.selectedIndex.value);function k(l){var f;let h=l();if(h===ae.Success&&i.activation.value==="auto"){let d=(f=Be(t))==null?void 0:f.activeElement,m=i.tabs.value.findIndex(n=>D(n)===d);m!==-1&&i.setSelectedIndex(m)}return h}function y(l){let f=i.tabs.value.map(h=>D(h)).filter(Boolean);if(l.key===Y.Space||l.key===Y.Enter){l.preventDefault(),l.stopPropagation(),i.setSelectedIndex(A.value);return}switch(l.key){case Y.Home:case Y.PageUp:return l.preventDefault(),l.stopPropagation(),k(()=>te(f,J.First));case Y.End:case Y.PageDown:return l.preventDefault(),l.stopPropagation(),k(()=>te(f,J.Last))}if(k(()=>ne(i.orientation.value,{vertical(){return l.key===Y.ArrowUp?te(f,J.Previous|J.WrapAround):l.key===Y.ArrowDown?te(f,J.Next|J.WrapAround):ae.Error},horizontal(){return l.key===Y.ArrowLeft?te(f,J.Previous|J.WrapAround):l.key===Y.ArrowRight?te(f,J.Next|J.WrapAround):ae.Error}}))===ae.Success)return l.preventDefault()}let j=T(!1);function I(){var l;j.value||(j.value=!0,!s.disabled&&((l=D(t))==null||l.focus({preventScroll:!0}),i.setSelectedIndex(A.value),Fe(()=>{j.value=!1})))}function $(l){l.preventDefault()}let a=Ve(E(()=>({as:s.as,type:C.type})),t);return()=>{var l;let f={selected:S.value},{id:h,...d}=s,m={ref:t,onKeydown:y,onMousedown:$,onClick:I,id:h,role:"tab",type:a.value,"aria-controls":(l=D(i.panels.value[A.value]))==null?void 0:l.id,"aria-selected":S.value,tabIndex:S.value?0:-1,disabled:s.disabled?!0:void 0};return ce({ourProps:m,theirProps:d,slot:f,attrs:C,slots:u,name:"Tab"})}}}),X=V({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${Se()}`},tabIndex:{type:Number,default:0}},setup(s,{attrs:C,slots:u,expose:o}){let i=fe("TabPanel"),t=T(null);o({el:t,$el:t}),z(()=>i.registerPanel(t)),Ae(()=>i.unregisterPanel(t));let c=pe(ye),b=E(()=>{if(c.value){let k=c.value.panels.indexOf(s.id);return k===-1?c.value.panels.push(s.id)-1:k}return-1}),A=E(()=>{let k=i.panels.value.indexOf(t);return k===-1?b.value:k}),S=E(()=>A.value===i.selectedIndex.value);return()=>{var k;let y={selected:S.value},{id:j,tabIndex:I,...$}=s,a={ref:t,id:j,role:"tabpanel","aria-labelledby":(k=D(i.tabs.value[A.value]))==null?void 0:k.id,tabIndex:S.value?I:-1};return!S.value&&s.unmount&&!s.static?ie(ke,{as:"span",...a}):ce({ourProps:a,theirProps:$,slot:y,attrs:C,slots:u,features:Ce.Static|Ce.RenderStrategy,visible:S.value,name:"TabPanel"})}}});function Ze(s,C){return r(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})])}const et={class:"relative bg-white p-2 rounded-xl shadow transition-shadow duration-300 hover:shadow-xl"},tt={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},st={class:"relative w-full h-32 sm:h-52 sm:bg-gray-200 rounded-xl overflow-hidden"},lt={key:1,class:"flex items-center justify-center h-full"},ot=e("p",{class:"text-gray-500"},"No Image Available",-1),at=[ot],nt={class:"sm:mt-2 space-y-2"},it={class:"text-lg sm:text-2xl font-bold"},ct={class:"flex flex-col gap-2 justify-between"},rt={key:0,class:"flex flex-row gap-4 items-center"},ut=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),dt=e("p",{class:"text-sm text-green-500"},"LIVE",-1),vt=[ut,dt],ft={key:1,class:"flex flex-row gap-4 items-center"},ht=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),mt=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),pt=[ht,mt],_t={class:"text-sm bg-slate-200/50 p-2 italic rounded-md"},gt={class:"flex flex-col justify-between w-full"},xt={class:"flex flex-row gap-2 text-sm justify-between gap-2"},bt={class:"font-semibold truncate"},yt={class:"flex flex-row gap-2 text-sm justify-between gap-2"},$t={class:"font-semibold truncate"},wt={class:"flex justify-between sm:justify-end sm:space-x-4 mt-4"},Ct=V({__name:"SellerAdDashboardCard",props:{ad:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit"],setup(s,{emit:C}){const u=P().NOTIFICATION_TYPES,{modals:o,notifications:i}=L(P()),t=_e(),c=s,b=T(!1),A=async a=>{if(!a)return;const{callFunction:l}=se("postAd",{adId:a},b,void 0,void 0,()=>{i.value.show=!0,i.value.type=u.SUCCESS,i.value.message="Ad is live!"},f=>{i.value.show=!0,i.value.type=u.ERROR,i.value.message="Error while posting ad, please try again later"});await l()},S=async a=>{if(!a)return;const{callFunction:l}=se("takedownAd",{adId:a},b,void 0,void 0,()=>{i.value.show=!0,i.value.type=u.SUCCESS,i.value.message="Ad taken down!"},f=>{i.value.show=!0,i.value.type=u.ERROR,i.value.message="Error while taken down ad, please try again later"});await l()},k=async a=>{a&&(console.log("removeAd",a),o.value.confirmremove=!0,o.value.context={adId:a,__key:"ad"})},y=a=>{a&&t.push({name:"ad",params:{adId:a}})},j=async a=>{a&&(console.log("removeAd",a),o.value.editad=!0,o.value.context=c.ad)},I=a=>{a&&t.push({name:"messaging",params:{adId:a}})},$=a=>{const l=new Date,f=a.toDate(),h=l.getTime()-f.getTime(),d=Math.floor(h/1e3),m=Math.floor(d/60),n=Math.floor(m/60),g=Math.floor(n/24);return g>1?`${g} days ago`:g==1?`${g} day ago`:n>0?`${n} hours ago`:m>0?`${m} minutes ago`:d>0?`${d} seconds ago`:"just now"};return(a,l)=>{const f=oe("currency");return r(),v("div",et,[b.value?(r(),v("div",tt,[_(U,{isLoading:b.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",st,[s.ad.images&&s.ad.images.length>0?(r(),M(Me,{key:0,images:s.ad.resizedImages,class:"h-32 sm:h-full object-cover"},null,8,["images"])):(r(),v("div",lt,at))]),e("div",nt,[e("h3",it,w(s.ad.variety),1),e("div",ct,[s.ad.live?(r(),v("div",rt,vt)):(r(),v("div",ft,pt)),e("p",_t,w(x(re)(s.ad.createdAt)?$(s.ad.createdAt):a.gig.createdAt),1)]),e("div",gt,[e("div",xt,[K((r(),v("p",bt,[H("/ton")])),[[f,s.ad.pricePerTon]])]),e("div",yt,[e("p",$t,w(s.ad.tons)+" tons",1)])]),e("div",wt,[s.showButtons?(r(),v(R,{key:0},[s.ad.live?O("",!0):(r(),M(x(ge),{key:0,class:"h-5 w-5 text-cyan-600",onClick:l[0]||(l[0]=h=>A(s.ad.id)),title:"Post ad'"})),s.ad.live?(r(),M(x(xe),{key:1,class:"h-5 w-5 text-cyan-600",onClick:l[1]||(l[1]=h=>S(s.ad.id)),title:"Take down ad"})):O("",!0),_(x(Ee),{class:"h-5 w-5 text-cyan-600",onClick:l[2]||(l[2]=h=>I(s.ad.id)),title:"Contact"}),_(x(ue),{class:"h-5 w-5 text-cyan-600",onClick:l[3]||(l[3]=h=>k(s.ad.id)),title:"Remove"}),_(x(be),{class:"h-5 w-5 text-cyan-600",onClick:l[4]||(l[4]=h=>j(s.ad.id)),title:"Edit"})],64)):O("",!0),_(x(ve),{class:"h-5 w-5 text-cyan-600",onClick:l[5]||(l[5]=h=>y(s.ad.id)),title:"View"})])])])}}}),Tt={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-5"},It={class:"p-1 sm:p-2"},kt=e("span",{class:"text-sm font-medium text-slate-300"},"Created",-1),St={class:"text-4xl font-bold text-slate-500"},At={class:"p-1 sm:p-2"},Et=e("span",{class:"text-sm font-medium text-slate-300"},"Live",-1),jt={class:"text-4xl font-bold text-slate-500"},Ot={class:"p-1 sm:p-2 relative"},Nt=e("span",{class:"text-sm font-medium text-slate-300"},"Views",-1),Rt={class:"text-4xl font-bold text-slate-500"},Pt={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Lt={class:"p-1 sm:p-2 relative"},Vt=e("span",{class:"text-sm font-medium text-slate-300"},"Bids",-1),Ft={class:"text-4xl font-bold text-slate-500"},Bt={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Dt={class:"p-1 sm:p-2 flex items-center justify-center"},Ut={key:0,class:"p-2 sm:p-4 grid gap-2 sm:gap-4 grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},Mt={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},Gt=e("div",{class:"italic"},"No ads found",-1),zt=[Gt],Yt={key:2},Jt=V({__name:"SellerContentComponent",setup(s){const{user:C}=L(W()),{modals:u,notifications:o}=L(P()),i=P().NOTIFICATION_TYPES,t=T([]),c=T(!1),{subscribe:b,unsubscribe:A}=G("ads",[["uid","==",C.value.uid]],["createdAt","desc"],d=>{t.value.docs=d,t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:{}},d=>{o.value.show=!0,o.value.type=i.ERROR,o.value.message="Error loading ads, please try again later."},c,()=>{},()=>{},d=>{o.value.show=!0,o.value.type=i.SUCCESS,o.value.message="Ad has been created."},d=>{o.value.show=!0,o.value.type=i.SUCCESS,o.value.message="Ad has been removed."});z(async()=>{b(),I(),f()}),Z(()=>{A(),$(),h()});const S=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(d=>d.live==!0).length),k=()=>{u.value.addad=!0},y=T(0),j=T(!1),{subscribe:I,unsubscribe:$}=G("bids",[["sellerId","==",C.value.uid]],["createdAt","desc"],d=>{y.value=d.length},void 0,j),a=T(0),l=T(!1),{subscribe:f,unsubscribe:h}=G("ads",[["uid","==",C.value.uid]],["createdAt","desc"],d=>{let m=0;d.forEach(n=>{m+=n.viewCount?n.viewCount:0}),a.value=m},void 0,l);return(d,m)=>(r(),v(R,null,[e("div",Tt,[e("div",It,[kt,e("p",St,w(t.value.docs&&t.value.docs.length),1)]),e("div",At,[Et,e("p",jt,w(S.value),1)]),e("div",Ot,[Nt,e("p",Rt,w(a.value),1),l.value?(r(),v("div",Pt,[_(U,{isLoading:l.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Lt,[Vt,e("p",Ft,w(y.value),1),j.value?(r(),v("div",Bt,[_(U,{isLoading:j.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Dt,[_(de,{onClick:k,classes:"w-full"},{default:N(()=>[H("Create ad")]),_:1})])]),t.value.docs&&t.value.docs.length>0&&!c.value?(r(),v("span",Ut,[(r(!0),v(R,null,Q(t.value.docs,(n,g)=>(r(),M(Ct,{key:g,ad:n},null,8,["ad"]))),128))])):t.value.docs&&t.value.docs.length==0&&!c.value?(r(),v("div",Mt,zt)):(r(),v("div",Yt,[_(U,{isLoading:c.value},null,8,["isLoading"])]))],64))}}),qt={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-5"},Wt={class:"p-2"},Ht=e("span",{class:"text-sm font-medium text-slate-300"},"Number of ads",-1),Kt={class:"text-4xl font-bold text-slate-500"},Qt={class:"p-2"},Xt=e("span",{class:"text-sm font-medium text-slate-300"},"Number of live ads",-1),Zt={class:"text-4xl font-bold text-slate-500"},es=e("div",{class:"p-2"},[e("span",{class:"text-sm font-medium text-slate-300"},"Total views"),e("p",{class:"text-4xl font-bold text-slate-500"},"0")],-1),ts={class:"p-2 flex items-center justify-center"},ss={key:0,class:"grid grid-flow-col gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},ls={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},os=e("div",{class:"italic"},"No ads found",-1),as=[os],ns={key:2},is=V({__name:"BuyerContentComponent",setup(s){const{user:C}=L(W()),{modals:u,notifications:o}=L(P()),i=P().NOTIFICATION_TYPES,t=T([]),c=T(!1),{subscribe:b,unsubscribe:A}=G("ads",[["uid","==",C.value.uid]],["createdAt","desc"],y=>{t.value.docs=y,t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:{}},y=>{o.value.show=!0,o.value.type=i.ERROR,o.value.message="Error loading ads, please try again later."},c,()=>{},()=>{},y=>{o.value.show=!0,o.value.type=i.SUCCESS,o.value.message="Ad has been created."},y=>{o.value.show=!0,o.value.type=i.SUCCESS,o.value.message="Ad has been removed."});z(async()=>{b()}),Z(()=>{A()});const S=()=>{u.value.addad=!0},k=computed(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(y=>y.live==!0).length);return(y,j)=>(r(),v(R,null,[e("div",qt,[e("div",Wt,[Ht,e("p",Kt,w(t.value.docs&&t.value.docs.length),1)]),e("div",Qt,[Xt,e("p",Zt,w(x(k)),1)]),es,e("div",ts,[_(de,{onClick:S,classes:"w-32 p-2"},{default:N(()=>[H("Create an ad")]),_:1})])]),t.value.docs&&t.value.docs.length>0&&!c.value?(r(),v("span",ss,[(r(!0),v(R,null,Q(t.value.docs,(I,$)=>(r(),M(Ge,{key:$,ad:I},null,8,["ad"]))),128))])):O("",!0),t.value.docs&&t.value.docs.length==0&&!c.value?(r(),v("div",ls,as)):(r(),v("div",ns,[_(U,{isLoading:c.value},null,8,["isLoading"])]))],64))}}),cs={key:0,class:"grid grid-flow-row space-y-4"},rs={key:1},us={key:2,class:"h-96 p-2 flex items-center justify-center"},ds=e("p",{class:"italic"},"No bids yet",-1),vs=[ds],fs=V({__name:"BidContentComponent",setup(s){const{user:C}=L(W()),u=T([]),o=T(!1),i=async()=>{o.value=!0,u.value=await De("bids","buyerId","==",C.value.uid,["createdAt","desc"],10),o.value=!1};return z(async()=>{await i()}),(t,c)=>u.value.docs&&u.value.docs.length>0&&!o.value?(r(),v("span",cs,[(r(!0),v(R,null,Q(u.value.docs,b=>(r(),M(ze,{bid:b},null,8,["bid"]))),256))])):o.value?(r(),v("div",rs,[_(U,{isLoading:o.value},null,8,["isLoading"])])):(r(),v("span",us,vs))}}),hs={class:"bg-white rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4 relative"},ms={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},ps={class:"flex flex-col sm:flex-row justify-between p-2 gap-2 sm:p-4"},_s={key:0,class:"flex flex-row gap-4 items-center"},gs=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),xs=e("p",{class:"text-sm text-green-500"},"LIVE",-1),bs=[gs,xs],ys={key:1,class:"flex flex-row gap-4 items-center"},$s=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),ws=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),Cs=[$s,ws],Ts={class:"text-sm bg-slate-200/50 p-2 italic rounded-md"},Is={class:"flex flex-row border-top"},ks={class:"text-lg capitalize my-2 pl-2 sm:pl-4 truncate"},Ss={class:"flex flex-row gap-1 pl-2 sm:pl-4 mb-2"},As={class:"text-sm truncate italic text-slate-500"},Es={class:"flex flex-row gap-4 p-2 sm:p-4"},js={class:"text-sm truncate md:text-clip"},Os={class:"flex flex-col gap-2 divide-y px-2"},Ns={class:"flex flex-col p-2 justify-between"},Rs=e("p",{class:"text-xs italic"},"Milestones",-1),Ps={class:"text-2xl"},Ls={class:"flex flex-col p-2 justify-between"},Vs=e("p",{class:"text-xs italic"},"Total",-1),Fs={class:"text-xl sm:text-2xl"},Bs={key:1,class:"w-full flex justify-end gap-4 pr-4 pb-4"},Ds=V({__name:"GigDashboardCard",props:{gig:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit","remove"],setup(s,{emit:C}){const{notifications:u,modals:o}=L(P()),i=P().NOTIFICATION_TYPES,t=C,c=s,b=T(!1),A=async a=>{const{callFunction:l}=se("postGigPost",{gigId:a},b,void 0,void 0,()=>{u.value.show=!0,u.value.type=i.SUCCESS,u.value.message="Gig posted successfully"},()=>{u.value.show=!0,u.value.type=i.ERROR,u.value.message="An error occured while posting gig, please try again later"});await l()},S=async a=>{const{callFunction:l}=se("takeDownGigPost",{gigId:a},b,void 0,void 0,()=>{u.value.show=!0,u.value.type=i.SUCCESS,u.value.message="Gig taken down successfully"},()=>{u.value.show=!0,u.value.type=i.ERROR,u.value.message="An error occured while taking down the gig, please try again later"});await l()},k=E(()=>!c.gig.milestones||c.gig.milestones.length===0?0:c.gig.milestones.reduce((a,l)=>a+l.price,0)),y=a=>{const l=new Date,f=a.toDate(),h=l.getTime()-f.getTime(),d=Math.floor(h/1e3),m=Math.floor(d/60),n=Math.floor(m/60),g=Math.floor(n/24);return g>1?`${g} days ago`:g==1?`${g} day ago`:n>0?`${n} hours ago`:m>0?`${m} minutes ago`:d>0?`${d} seconds ago`:"just now"},j=a=>{a&&(o.value.viewgig=!0,o.value.context.__key=a)},I=a=>{t("edit",a)},$=a=>{t("remove",a)};return(a,l)=>{const f=oe("currency");return r(),v("span",hs,[b.value?(r(),v("div",ms,[_(U,{isLoading:b.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",ps,[s.gig.live?(r(),v("div",_s,bs)):(r(),v("div",ys,Cs)),e("p",Ts,w(x(re)(s.gig.createdAt)?y(s.gig.createdAt):s.gig.createdAt),1)]),e("div",Is,[e("p",ks,w(s.gig.title),1)]),e("div",Ss,[_(x(je),{class:"w-5 h-5 text-slate-500"}),e("p",As,w(s.gig.location),1)]),e("div",Es,[e("p",js,w(s.gig.description.substring(0,197)+"..."),1)]),e("div",Os,[e("div",Ns,[Rs,e("p",Ps,w(s.gig.milestones.length),1)]),e("div",Ls,[Vs,K(e("p",Fs,null,512),[[f,k.value]])])]),s.showButtons?(r(),v("div",Bs,[s.showButtons?(r(),v(R,{key:0},[s.gig.live?O("",!0):(r(),M(x(ge),{key:0,onClick:l[0]||(l[0]=h=>A(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})),s.gig.live?(r(),M(x(xe),{key:1,onClick:l[1]||(l[1]=h=>S(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})):O("",!0),_(x(ue),{onClick:l[2]||(l[2]=h=>$(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"}),_(x(be),{onClick:l[3]||(l[3]=h=>I(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})],64)):O("",!0),_(x(ve),{onClick:l[4]||(l[4]=h=>j(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})])):O("",!0)])}}}),Us={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-4 sm:grid-cols-5"},Ms={class:"p-2 h-16"},Gs=e("span",{class:"text-sm font-medium text-slate-300"},"Created",-1),zs={class:"text-2xl font-bold text-slate-500"},Ys={class:"p-2 h-16"},Js=e("span",{class:"text-sm font-medium text-slate-300"},"Live",-1),qs={class:"text-2xl font-bold text-slate-500"},Ws={class:"p-2 h-16"},Hs=e("span",{class:"text-sm font-medium text-slate-300"},"Views",-1),Ks={class:"text-2xl font-bold text-slate-500"},Qs={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Xs={class:"p-2 flex-col justify-between h-16 hidden sm:flex"},Zs=e("span",{class:"text-sm font-medium text-slate-300"},"Total",-1),el={class:"text-2xl font-bold text-slate-500"},tl={class:"p-2 flex items-center justify-center"},sl={class:"p-2 sm:p-4 grid gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},ll={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},ol=e("p",{class:"italic"},"No gig posts",-1),al=[ol],nl={key:2},il=V({__name:"GigsContentComponent",setup(s){const{user:C}=L(W()),{modals:u,notifications:o}=L(P()),i=P().NOTIFICATION_TYPES,t=T([]),c=T(!1),{subscribe:b,unsubscribe:A}=G("gigs",[["posterId","==",C.value.uid]],["createdAt","desc"],h=>{t.value.docs=h},h=>{o.value.show=!0,o.value.type=i.ERROR,o.value.message="Error loading gigs, please try again later."},c,()=>{},()=>{},h=>{o.value.show=!0,o.value.type=i.SUCCESS,o.value.message="Gig has been created."},h=>{o.value.show=!0,o.value.type=i.SUCCESS,o.value.message="Gig has been removed."}),S=()=>{u.value.addgig=!0},k=h=>{u.value.confirmremove=!0,u.value.context={__key:"gig",gigId:h}},y=h=>{u.value.editgig=!0;const d=t.value.docs.find(m=>m.gigId==h);u.value.context=d};z(async()=>{b(),l()}),Z(()=>{A(),f()});const j=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.reduce((h,d)=>d.milestones?h+d.milestones.reduce((m,n)=>m+n.price,0):h,0)),I=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(h=>h.live==!0).length),$=T(0),a=T(!1),{subscribe:l,unsubscribe:f}=G("ads",[["posterId","==",C.value.uid]],["createdAt","desc"],h=>{let d=0;h.forEach(m=>{d+=m.viewCount?m.viewCount:0}),$.value=d},void 0,a);return(h,d)=>{const m=oe("currency");return r(),v(R,null,[e("div",Us,[e("div",Ms,[Gs,e("p",zs,w(t.value.docs&&t.value.docs.length),1)]),e("div",Ys,[Js,e("p",qs,w(I.value),1)]),e("div",Ws,[Hs,e("p",Ks,w($.value),1),a.value?(r(),v("div",Qs,[_(U,{isLoading:a.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Xs,[Zs,K(e("p",el,null,512),[[m,j.value]])]),e("div",tl,[_(de,{classes:"w-full",onClick:S},{default:N(()=>[H(" Create gig ")]),_:1})])]),e("span",sl,[t.value.docs&&t.value.docs.length>0&&!c.value?(r(!0),v(R,{key:0},Q(t.value.docs,(n,g)=>(r(),M(Ds,{key:g,gig:n,onEdit:y,onRemove:k},null,8,["gig"]))),128)):t.value.docs&&t.value.docs.length==0&&!c.value?(r(),v("span",ll,al)):(r(),v("div",nl,[_(U,{isLoading:c.value},null,8,["isLoading"])]))])],64)}}}),cl={class:"absolute top-2 left-0 text-right"},rl={class:"px-1 py-1"},ul={class:"px-1 py-1"},dl=V({__name:"ApplicationDropdownMenu",emits:["remove","view","contact"],setup(s,{emit:C}){return(u,o)=>(r(),v("div",cl,[_(x(qe),{as:"div",class:"relative inline-block text-left"},{default:N(()=>[e("div",null,[_(x(Ye),{class:"inline-flex w-full justify-center rounded-md px-4 py-2 text-sm font-medium text-bg/30 hover:bg-cyan-600/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75"},{default:N(()=>[H(" Options "),_(x(Ze),{class:"-mr-1 ml-2 h-5 w-5 text-cyan-600 hover:text-cyan-600","aria-hidden":"true"})]),_:1})]),_(Ue,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:N(()=>[_(x(Je),{class:"absolute right-0 mt-2 z-10 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:N(()=>[e("div",rl,[_(x(me),null,{default:N(({active:i})=>[e("button",{class:q([i?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:o[0]||(o[0]=t=>u.$emit("contact"))},[_(x(Ee),{active:i,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),H(" Reach out ")],2)]),_:1}),_(x(me),null,{default:N(({active:i})=>[e("button",{class:q([i?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:o[1]||(o[1]=t=>u.$emit("remove"))},[_(x(ue),{active:i,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),H(" Remove ")],2)]),_:1})]),e("div",ul,[_(x(me),null,{default:N(({active:i})=>[e("button",{class:q([i?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:o[2]||(o[2]=t=>u.$emit("view"))},[_(x(ve),{active:i,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),H(" View Application ")],2)]),_:1})])]),_:1})]),_:1})]),_:1})]))}}),vl={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-3"},fl={class:"p-2"},hl=e("span",{class:"text-sm font-medium text-slate-300"},"Recieved",-1),ml={class:"text-4xl font-bold text-slate-500"},pl={class:"p-2"},_l=e("span",{class:"text-sm font-medium text-slate-300"},"Gigs",-1),gl={class:"text-4xl font-bold text-slate-500"},xl={class:"p-2"},bl=e("span",{class:"text-sm font-medium text-slate-300"},"Jobs",-1),yl={class:"text-4xl font-bold text-slate-500"},$l={class:"sm:p-4"},wl={class:"flex flex-row gap-4 h-6 sm:mb-2 items-center p-4"},Cl={class:"flex flex-row gap-2 items-center"},Tl=e("p",{class:"text-sm font-medium text-slate-300"},"Gig",-1),Il={class:"flex flex-row gap-2 items-center"},kl=e("p",{class:"text-sm font-medium text-slate-300"},"Job",-1),Sl={key:0,class:"table-fixed w-full border-collapse"},Al=e("thead",{class:"border-y"},[e("tr",{class:"text-left"},[e("th",{class:"py-4 hidden sm:table-cell"},"ID"),e("th",{class:"py-4"},"Name"),e("th",{class:"py-4 hidden sm:table-cell"},"Email"),e("th",{class:"py-4 hidden sm:table-cell"},"For"),e("th",{class:"py-4"},"Recieved"),e("th",{class:"py-4"},"Action")])],-1),El={class:"py-2 hidden sm:table-cell"},jl={class:"py-2 capitalize truncate"},Ol={class:"py-2 truncate hidden sm:table-cell"},Nl={class:"py-2 hidden sm:table-cell"},Rl={class:"flex flex-row gap-2 items-center"},Pl={class:"pb-1 capitalize"},Ll={class:"py-2 italic text-xs sm:text-base"},Vl={class:"relative"},Fl={key:0},Bl={colspan:"6"},Dl=["src"],Ul={key:1,class:"h-96 p-2 flex items-center justify-center"},Ml=e("p",{class:"italic"},"No application posts",-1),Gl=[Ml],zl={key:2},Yl=V({__name:"ApplicationsContentComponent",setup(s){const{user:C}=L(W()),{modals:u,notifications:o,messaging:i}=L(P()),t=P().NOTIFICATION_TYPES,c=T([]),b=T(!1),{subscribe:A,unsubscribe:S}=G("applications",[["ownerId","==",C.value.uid]],["createdAt","desc"],n=>{c.value.docs=n},n=>{o.value.show=!0,o.value.type=t.ERROR,o.value.message="Error loading applications, please try again later."},b,()=>{},()=>{},n=>{o.value.show=!0,o.value.type=t.SUCCESS,o.value.message="A new application has been received."},n=>{o.value.show=!0,o.value.type=t.SUCCESS,o.value.message="Application has been removed."}),k=n=>{u.value.confirmremove=!0,u.value.context={__key:"application",applicationId:n}},y=T(""),j=n=>{var g;if(window.innerWidth<768){window.open((g=c.value.docs.find(p=>p.applicationId===n))==null?void 0:g.resume);return}if(y.value===n){y.value="";return}y.value=n},I=()=>{console.log("loaded")},$=async n=>{console.log("onMessage",n.applicationId),i.value.show=!0,i.value.to={id:n.applicantId,name:n.name},i.value.context={__key:"application",application:n}};z(async()=>{A()}),Z(()=>{S()});const a=T(!1),l=T(!1),f=E(()=>c.value.docs?a.value&&l.value?c.value.docs:a.value?c.value.docs.filter(n=>n.parentType==="gig"):l.value?c.value.docs.filter(n=>n.parentType==="job"):c.value.docs:[]),h=n=>{const g=new Date,p=n.toDate(),F=g.getTime()-p.getTime(),B=Math.floor(F/1e3),ee=Math.floor(B/60),he=Math.floor(ee/60),$e=Math.floor(he/24);return $e>0?`${$e} days ago`:he>0?`${he} hours ago`:ee>0?`${ee} minutes ago`:B>0?`${B} seconds ago`:"just now"},d=E(()=>c.value.docs?c.value.docs.filter(n=>n.parentType==="gig").length:0),m=E(()=>c.value.docs?c.value.docs.filter(n=>n.parentType==="job").length:0);return(n,g)=>(r(),v(R,null,[e("div",vl,[e("div",fl,[hl,e("p",ml,w(c.value.docs?c.value.docs.length:0),1)]),e("div",pl,[_l,e("p",gl,w(d.value),1)]),e("div",xl,[bl,e("p",yl,w(m.value),1)])]),e("div",$l,[e("div",wl,[e("div",Cl,[K(e("input",{type:"checkbox",class:"w-4 h-4","onUpdate:modelValue":g[0]||(g[0]=p=>a.value=p)},null,512),[[Te,a.value]]),Tl]),e("div",Il,[K(e("input",{type:"checkbox",class:"w-4 h-4","onUpdate:modelValue":g[1]||(g[1]=p=>l.value=p)},null,512),[[Te,l.value]]),kl])]),c.value.docs&&c.value.docs.length>0&&!b.value?(r(),v("table",Sl,[Al,e("tbody",null,[(r(!0),v(R,null,Q(f.value,(p,F)=>(r(),v(R,{key:F},[e("tr",null,[e("td",El,w(p.applicationId.substring(0,5)),1),e("td",jl,w(p.name),1),e("td",Ol,w(p.email),1),e("td",Nl,[e("div",Rl,[e("div",{class:q(["rounded-full w-2 h-2",{"bg-green-500":p.parentType=="gig","bg-blue-500":p.parentType=="job"}])},null,2),e("p",Pl,w(p.parentType),1)])]),e("td",Ll,w(x(re)(p.createdAt)?h(p.createdAt):p.createdAt),1),e("td",Vl,[_(dl,{onRemove:B=>k(p.applicationId),onView:B=>j(p.applicationId),onContact:B=>$(p)},null,8,["onRemove","onView","onContact"])])]),y.value==p.applicationId?(r(),v("tr",Fl,[e("td",Bl,[e("iframe",{ref_for:!0,ref:"iframeRef",src:p.resume,width:"100%",height:"500px",onLoad:I},null,40,Dl)])])):O("",!0)],64))),128))])])):c.value.docs&&c.value.docs.length==0&&!b.value?(r(),v("span",Ul,Gl)):(r(),v("div",zl,[_(U,{isLoading:b.value},null,8,["isLoading"])]))])],64))}}),Jl={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-3"},ql={class:"p-2"},Wl=e("span",{class:"text-sm font-medium text-slate-300"},"Pending",-1),Hl={class:"text-4xl font-bold text-slate-500"},Kl={class:"p-2"},Ql=e("span",{class:"text-sm font-medium text-slate-300"},"Accepted",-1),Xl={class:"text-4xl font-bold text-slate-500"},Zl={class:"p-2"},eo=e("span",{class:"text-sm font-medium text-slate-300"},"Rejected",-1),to={class:"text-4xl font-bold text-slate-500"},so={class:"sm:p-4"},lo={key:0,class:"table-fixed w-full border-collapse"},oo=e("thead",{class:"border-b"},[e("tr",{class:"text-left"},[e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"Contract ID"),e("th",{class:"p-2 sm:pb-4"},"User"),e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"Ad ID"),e("th",{class:"p-2 sm:pb-4"},"Status"),e("th",{class:"p-2 sm:pb-4"},"Updated"),e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"Created"),e("th",{class:"p-2 sm:pb-4"},"Action")])],-1),ao={class:"py-2 hidden sm:table-cell"},no={class:"py-2"},io={class:"flex flex-row justify-start items-center"},co=["src"],ro={class:"pl-2 truncate"},uo={class:"py-2 hidden sm:table-cell"},vo={class:"py-2"},fo={class:"flex flex-row sm:w-3/4 gap-1 sm:gap-2 items-center justify-start px-1"},ho={class:"italic capitalize"},mo={class:"py-2"},po={class:"py-2 hidden sm:table-cell"},_o={class:"py-2 w-5"},go=["onClick"],xo={key:1,class:"h-96 p-2 flex items-center justify-center"},bo=e("p",{class:"italic"},"No contracts yet",-1),yo=[bo],$o={key:2},wo=V({__name:"ContractsContentComponent",setup(s){const C=_e(),u=P().NOTIFICATION_TYPES,{notifications:o}=L(P()),{user:i}=L(W()),t=T([]),c=T(!1);let b=[],A=[];const S=()=>{t.value.docs=[...b,...A]},{subscribe:k,unsubscribe:y}=G("contracts",[["sellerId","==",i.value.uid]],["createdAt","desc"],d=>{A=d,S()},d=>{o.value.show=!0,o.value.type=u.ERROR,o.value.message="Error loading contracts, please try again later."},c),{subscribe:j,unsubscribe:I}=G("contracts",[["buyerId","==",i.value.uid]],["createdAt","desc"],d=>{b=d,S()},d=>{o.value.show=!0,o.value.type=u.ERROR,o.value.message="Error loading contracts, please try again later."},c);z(async()=>{k(),j()}),Z(()=>{y(),I()});const $=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(d=>d.status=="pending").length),a=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(d=>d.status=="accepted").length),l=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(d=>d.status=="rejected").length),f=d=>{const m=new Date,n=d.toDate(),g=m.getTime()-n.getTime(),p=Math.floor(g/1e3),F=Math.floor(p/60),B=Math.floor(F/60),ee=Math.floor(B/24);return ee>0?`${ee} days ago`:B>0?`${B} hours ago`:F>0?`${F} minutes ago`:p>0?`${p} seconds ago`:"just now"},h=d=>{C.push({name:"messaging",params:{adId:d}})};return(d,m)=>(r(),v(R,null,[e("div",Jl,[e("div",ql,[Wl,e("p",Hl,w($.value),1)]),e("div",Kl,[Ql,e("p",Xl,w(a.value),1)]),e("div",Zl,[eo,e("p",to,w(l.value),1)])]),e("div",so,[t.value.docs&&t.value.docs.length>0&&!c.value?(r(),v("table",lo,[oo,e("tbody",null,[(r(!0),v(R,null,Q(t.value.docs,(n,g)=>(r(),v("tr",{key:g},[e("td",ao,w(n.id.substring(0,5)),1),e("td",no,[e("div",io,[e("img",{src:n.userSignature.profilePic,class:"w-8 h-8 rounded-full"},null,8,co),e("p",ro,w(n.userSignature.name),1)])]),e("td",uo,w(n.adId.substring(0,5)),1),e("td",vo,[e("span",fo,[e("span",{class:q(["w-3 h-3 rounded-full",{"bg-green-500":n.status=="accepted","bg-red-500":n.status=="rejected","bg-yellow-500":n.status=="pending"}])},null,2),e("p",ho,w(n.status),1)])]),e("td",mo,w(f(n.updatedAt)),1),e("td",po,w(f(n.createdAt)),1),e("td",_o,[e("button",{class:"text-cyan-600 font-bold italic",onClick:p=>h(n.adId)},"View",8,go)])]))),128))])])):t.value.docs&&t.value.docs.length==0&&!c.value?(r(),v("div",xo,yo)):(r(),v("span",$o,[_(U,{isLoading:c.value},null,8,["isLoading"])]))])],64))}}),Co={class:"bg-white rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4 relative"},To={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Io={class:"flex flex-col sm:flex-row justify-between p-2 gap-2 sm:p-4"},ko={key:0,class:"flex flex-row gap-4 items-center"},So=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),Ao=e("p",{class:"text-sm text-green-500"},"LIVE",-1),Eo=[So,Ao],jo={key:1,class:"flex flex-row gap-4 items-center"},Oo=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),No=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),Ro=[Oo,No],Po={class:"text-sm bg-slate-200/50 p-2 italic rounded-md text-end"},Lo={class:"flex flex-row gap-4 bg-gradient-to-r from-sky-600/50 mb-2"},Vo={class:"text-xl capitalize my-2 text-white pl-2 sm:pl-4 truncate"},Fo={class:"flex flex-row gap-1 pl-2 sm:pl-4 mb-2"},Bo={class:"text-sm truncate italic text-slate-500"},Do={class:"flex flex-row gap-4 p-2 sm:p-4"},Uo={class:"text-sm truncate md:text-clip"},Mo={class:"flex flex-col gap-2 sm:gap-4 divide-y sm:px-2 sm:px-4 mb-2"},Go={class:"flex flex-col p-2"},zo=e("p",{class:"text-xs"}," Salary Min. ",-1),Yo={class:"text-xl"},Jo={class:"flex flex-col p-2"},qo=e("p",{class:"text-xs"}," Salary Max. ",-1),Wo={class:"text-xl"},Ho={class:"w-full flex justify-end gap-4 pr-4 pb-4"},Ko=V({__name:"JobDashboardCard",props:{job:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit","remove"],setup(s,{emit:C}){const{notifications:u,modals:o}=L(P()),i=P().NOTIFICATION_TYPES,t=C,c=T(!1),b=async I=>{const{callFunction:$}=se("postJobPost",{jobId:I},c,void 0,void 0,()=>{u.value.show=!0,u.value.type=i.SUCCESS,u.value.message="Job Posted"},()=>{u.value.show=!0,u.value.type=i.ERROR,u.value.message="An error occured during the process, please try again later"});await $()},A=async I=>{const{callFunction:$}=se("takeDownJobPost",{jobId:I},c,void 0,void 0,()=>{u.value.show=!0,u.value.type=i.SUCCESS,u.value.message="Job post is now down"},()=>{u.value.show=!0,u.value.type=i.ERROR,u.value.message="An error occured during the process, please try again later"});await $()},S=I=>{const $=new Date,a=I.toDate(),l=$.getTime()-a.getTime(),f=Math.floor(l/1e3),h=Math.floor(f/60),d=Math.floor(h/60),m=Math.floor(d/24);return m>1?`${m} days ago`:m==1?`${m} day ago`:d>0?`${d} hours ago`:h>0?`${h} minutes ago`:f>0?`${f} seconds ago`:"just now"},k=I=>{I&&(o.value.viewjob=!0,o.value.context.__key=I)},y=I=>{t("edit",I)},j=I=>{t("remove",I)};return(I,$)=>{const a=oe("currency");return r(),v("span",Co,[c.value?(r(),v("div",To,[_(U,{isLoading:c.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",Io,[s.job.live?(r(),v("div",ko,Eo)):(r(),v("div",jo,Ro)),e("p",Po,w(x(re)(s.job.createdAt)?S(s.job.createdAt):s.job.createdAt),1)]),e("div",Lo,[e("p",Vo,w(s.job.title),1)]),e("div",Fo,[_(x(je),{class:"w-5 h-5"}),e("p",Bo,w(s.job.location),1)]),e("div",Do,[e("p",Uo,w(s.job.description.substring(0,197)+"..."),1)]),e("div",Mo,[e("div",Go,[zo,K(e("p",Yo,null,512),[[a,s.job.salaryMin]])]),e("div",Jo,[qo,K(e("p",Wo,null,512),[[a,s.job.salaryMax]])])]),e("div",Ho,[s.showButtons?(r(),v(R,{key:0},[s.job.live?O("",!0):(r(),M(x(ge),{key:0,onClick:$[0]||($[0]=l=>b(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})),s.job.live?(r(),M(x(xe),{key:1,onClick:$[1]||($[1]=l=>A(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})):O("",!0),_(x(ue),{onClick:$[2]||($[2]=l=>j(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"}),_(x(be),{onClick:$[3]||($[3]=l=>y(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})],64)):O("",!0),_(x(ve),{onClick:$[4]||($[4]=l=>k(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})])])}}}),Qo={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-4"},Xo={class:"p-2"},Zo=e("span",{class:"text-sm font-medium text-slate-300"},"Created",-1),ea={class:"text-4xl font-bold text-slate-500"},ta={class:"p-2"},sa=e("span",{class:"text-sm font-medium text-slate-300"},"Live",-1),la={class:"text-4xl font-bold text-slate-500"},oa={class:"p-2"},aa=e("span",{class:"text-sm font-medium text-slate-300"},"Views",-1),na={class:"text-4xl font-bold text-slate-500"},ia={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},ca={class:"p-2 flex items-center justify-center"},ra={class:"p-2 sm:p-4 grid gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},ua={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},da=e("p",{class:"italic"},"No job posts",-1),va=[da],fa={key:2},ha=V({__name:"JobsContentComponent",setup(s){const{user:C}=L(W()),{modals:u,notifications:o}=L(P()),i=P().NOTIFICATION_TYPES,t=T([]),c=T(!1),{subscribe:b,unsubscribe:A}=G("jobs",[["posterId","==",C.value.uid]],["createdAt","desc"],f=>{t.value.docs=f},f=>{o.value.show=!0,o.value.type=i.ERROR,o.value.message="Error loading jobs, please try again later."},c,()=>{},()=>{},f=>{o.value.show=!0,o.value.type=i.SUCCESS,o.value.message="Job has been created."},f=>{o.value.show=!0,o.value.type=i.SUCCESS,o.value.message="Job has been removed."}),S=()=>{u.value.addjob=!0},k=f=>{u.value.confirmremove=!0,u.value.context={__key:"job",jobId:f}},y=f=>{u.value.editjob=!0;const h=t.value.docs.find(d=>d.jobId==f);u.value.context=h},j=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(f=>f.live==!0).length);z(async()=>{b(),a()}),Z(()=>{A(),l()});const I=T(0),$=T(!1),{subscribe:a,unsubscribe:l}=G("ads",[["posterId","==",C.value.uid]],["createdAt","desc"],f=>{let h=0;f.forEach(d=>{h+=d.viewCount?d.viewCount:0}),I.value=h},void 0,$);return(f,h)=>(r(),v(R,null,[e("div",Qo,[e("div",Xo,[Zo,e("p",ea,w(t.value.docs&&t.value.docs.length),1)]),e("div",ta,[sa,e("p",la,w(j.value),1)]),e("div",oa,[aa,e("p",na,w(I.value),1),$.value?(r(),v("div",ia,[_(U,{isLoading:$.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",ca,[_(de,{classes:"w-full",onClick:S},{default:N(()=>[H(" Create job ")]),_:1})])]),e("span",ra,[t.value.docs&&t.value.docs.length>0&&!c.value?(r(!0),v(R,{key:0},Q(t.value.docs,(d,m)=>(r(),M(Ko,{key:m,job:d,onEdit:y,onRemove:k},null,8,["job"]))),128)):t.value.docs&&t.value.docs.length==0&&!c.value?(r(),v("span",ua,va)):(r(),v("div",fa,[_(U,{isLoading:c.value},null,8,["isLoading"])]))])],64))}}),ma={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-2 sm:grid-cols-4"},pa={class:"p-2 hidden"},_a=e("span",{class:"text-sm font-medium text-slate-300"},"Pending",-1),ga={class:"text-2xl truncate font-bold text-slate-500"},xa={class:"p-2"},ba=e("span",{class:"text-sm font-medium text-slate-300"},"Total Pending",-1),ya={class:"text-2xl truncate font-bold text-slate-500"},$a={class:"p-2 hidden"},wa=e("span",{class:"text-sm font-medium text-slate-300"},"Completed",-1),Ca={class:"text-2xl truncate font-bold text-slate-500"},Ta={class:"p-2"},Ia=e("span",{class:"text-sm font-medium text-slate-300"},"Total Completed",-1),ka={class:"text-2xl truncate font-bold text-slate-500"},Sa={class:"sm:p-4"},Aa={key:0,class:"table-fixed w-full border-collapse"},Ea=e("thead",{class:"border-b"},[e("tr",{class:"text-left"},[e("th",{class:"p-2 sm:pb-4 hidden sm:table-cell"},"ID"),e("th",{class:"p-2 sm:pb-4"},"Parties"),e("th",{class:"p-2 sm:pb-4"},"Status"),e("th",{class:"p-2 sm:pb-4 text-center sm:text-left"},"Action")])],-1),ja={class:"py-2 hidden sm:table-cell"},Oa={key:0,class:"py-2 text-sm"},Na={class:"truncate"},Ra={class:"truncate"},Pa={class:"py-2 sm:text-base text-xs"},La={class:"flex flex-row gap-2 justify-between items-center w-3/4 sm:w-5/6"},Va=e("p",null,"Sent:",-1),Fa={class:"flex flex-row gap-2 justify-between items-center w-3/4 sm:w-5/6"},Ba=e("p",null,"Recieved:",-1),Da={class:"flex flex-row gap-2 justify-between items-center w-3/4 sm:w-5/6"},Ua=e("p",null,"Disbursed:",-1),Ma={class:"py-2 w-5 text-center sm:text-left"},Ga=["onClick"],za={key:1,class:"h-96 p-2 flex items-center justify-center"},Ya=e("p",{class:"italic"},"No transactions yet",-1),Ja=[Ya],qa={key:2},Wa=V({__name:"TransactionContentComponent",setup(s){const C=_e(),u=P().NOTIFICATION_TYPES,{notifications:o}=L(P()),{user:i}=L(W()),t=T([]),c=T(!1);let b=[],A=[];const S=()=>{t.value.docs=[...b,...A]},{subscribe:k,unsubscribe:y}=G("transactions",[["sellerId","==",i.value.uid]],["createdAt","desc"],m=>{A=m,S()},m=>{o.value.show=!0,o.value.type=u.ERROR,o.value.message="Error loading transactions, please try again later."},c),{subscribe:j,unsubscribe:I}=G("transactions",[["buyerId","==",i.value.uid]],["createdAt","desc"],m=>{b=m,S()},m=>{o.value.show=!0,o.value.type=u.ERROR,o.value.message="Error loading transactions, please try again later."},c);z(async()=>{k(),j()}),Z(()=>{y(),I()});const $=m=>{const n=m.items;if(!n||n.length===0)return!1;const g=n[0].schedule;if(!g||g.length===0)return!1;const p=g[0].status;return p||!1},a=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(m=>{const n=m.items;if(!n||n.length===0)return!1;const g=n[0].schedule;if(!g||g.length===0)return!1;const p=g[0].status;return p?p.payment_sent===!1:!1}).length),l=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(m=>{const n=m.items;if(!n||n.length===0)return!1;const g=n[0].schedule;if(!g||g.length===0)return!1;const p=g[0].status;return p?p.disbursed_to_beneficiary==!0:!1}).length),f=E(()=>{if(!t.value.docs||t.value.docs.length===0)return 0;const m=t.value.docs.filter(g=>{const p=g.items;if(!p||p.length===0)return!1;const F=p[0].schedule;if(!F||F.length===0)return!1;const B=F[0].status;return B?B.disbursed_to_beneficiary==!0:!1});let n=0;return m.forEach(g=>{n+=parseInt(g.items[0].schedule[0].amount)}),n}),h=E(()=>{if(!t.value.docs||t.value.docs.length===0)return 0;const m=t.value.docs.filter(g=>{const p=g.items;if(!p||p.length===0)return!1;const F=p[0].schedule;if(!F||F.length===0)return!1;const B=F[0].status;return B?B.payment_sent==!1:!1});let n=0;return m.forEach(g=>{n+=parseInt(g.items[0].schedule[0].amount)}),n}),d=(m,n)=>{C.push({name:"banking",params:{adId:m,contractId:n}})};return(m,n)=>{const g=oe("currency");return r(),v(R,null,[e("div",ma,[e("div",pa,[_a,e("p",ga,w(a.value),1)]),e("div",xa,[ba,K(e("p",ya,null,512),[[g,h.value]])]),e("div",$a,[wa,e("p",Ca,w(l.value),1)]),e("div",Ta,[Ia,K(e("p",ka,null,512),[[g,f.value]])])]),e("div",Sa,[t.value.docs&&t.value.docs.length>0&&!c.value?(r(),v("table",Aa,[Ea,e("tbody",null,[(r(!0),v(R,null,Q(t.value.docs,(p,F)=>(r(),v("tr",{key:F,class:"text-left"},[e("td",ja,w(p.transaction_id),1),p.parties&&p.parties.length>1?(r(),v("td",Oa,[e("p",Na,w(p.parties[0].customer),1),e("p",Ra,w(p.parties[1].customer),1)])):O("",!0),e("td",Pa,[e("div",La,[Va,e("p",{class:q({"bg-red-500 rounded-full w-3 h-3":$(p).payment_sent==!1,"bg-green-500 rounded-full w-3 h-3":$(p).payment_sent==!0})},null,2)]),e("div",Fa,[Ba,e("p",{class:q({"bg-red-500 rounded-full w-3 h-3":$(p).payment_received==!1,"bg-green-500 rounded-full w-3 h-3":$(p).payment_received==!0})},null,2)]),e("div",Da,[Ua,e("p",{class:q({"bg-red-500 rounded-full w-3 h-3":$(p).disbursed_to_beneficiary==!1,"bg-green-500 rounded-full w-3 h-3":$(p).disbursed_to_beneficiary==!0})},null,2)])]),e("td",Ma,[e("button",{class:"text-cyan-600 font-bold italic",onClick:B=>d(p.adId,p.contractId)},"View",8,Ga)])]))),128))])])):t.value.docs&&t.value.docs.length==0&&!c.value?(r(),v("div",za,Ja)):(r(),v("span",qa,[_(U,{isLoading:c.value},null,8,["isLoading"])]))])],64)}}}),Ha={class:"w-full"},Ka={key:0,class:"w-full"},ln=V({__name:"UserBoardView",setup(s){const{profile:C}=L(W()),u=W().ACCOUNT_TYPES,o=T(0),i={ADS:"Ads",CONTRACTS:"Contracts",TRANSACTIONS:"Transactions",JOBS:"Jobs",GIGS:"Gigs",APPLICATIONS:"Resumes"};return(t,c)=>(r(),v("div",Ha,[x(C)?(r(),v("div",Ka,[_(x(Qe),null,{default:N(()=>[_(x(Xe),{class:"w-full flex justify-between sm:justify-start sm:space-x-1 p-1"},{default:N(()=>[(r(),v(R,null,Q(i,(b,A,S)=>_(x(Ie),{as:"template",key:A,onClick:k=>o.value=S},{default:N(({selected:k})=>[e("button",{class:q(["sm:w-24 rounded-lg py-2.5 text-sm font-medium cursor-pointer",k?"text-blue-500 focus:outline-none":"text-slate-500"])},w(b),3)]),_:2},1032,["onClick"])),64)),x(C).accountType===x(u).BUYER?(r(),M(x(Ie),{key:0,as:"template",onClick:c[0]||(c[0]=b=>o.value=5)},{default:N(({selected:b})=>[e("button",{class:q(["w-24 rounded-lg py-2.5 text-sm font-medium cursor-pointer",b?"text-blue-500 focus:outline-none":"text-slate-500"])}," Bids ",2)]),_:1})):O("",!0)]),_:1}),_(x(X),null,{default:N(()=>[x(C).accountType==x(u).SELLER?(r(),M(Jt,{key:0})):O("",!0),x(C).accountType==x(u).BUYER?(r(),M(is,{key:1})):O("",!0)]),_:1}),_(x(X),null,{default:N(()=>[_(wo)]),_:1}),_(x(X),null,{default:N(()=>[_(Wa)]),_:1}),_(x(X),null,{default:N(()=>[_(ha)]),_:1}),_(x(X),null,{default:N(()=>[_(il)]),_:1}),_(x(X),null,{default:N(()=>[_(Yl)]),_:1}),_(x(X),null,{default:N(()=>[_(fs)]),_:1})]),_:1})])):O("",!0)]))}});export{ln as default};
