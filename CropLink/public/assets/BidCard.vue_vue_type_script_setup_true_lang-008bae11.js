import{d as $,s as B,l as E,a as S,u as O,h as V,I as F,e as r,f as I,z as i,g as s,t as b,x as m,Z as M,w as P,y as h,n as g,i as y,p as j,_ as k,q as R}from"./index-57eff0e8.js";const q={class:"bg-white p-2 rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4"},U={key:0,class:"flex flex-row space-x-4"},L={class:"text-sm text-green-400"},W={class:"flex flex-row space-x-4 justify-end h-6"},Y={class:"text-xs italic"},z={class:"flex flex-row justify-between h-6 items-center"},G={class:"flex flex-row space-x-4"},Z=s("label",{class:"block text-sm font-medium text-gray-700"},"Buyer",-1),p={class:"text-sm"},H={class:"flex flex-row space-x-4"},J=s("label",{class:"block text-sm font-medium text-gray-700"},"Offer",-1),K={class:"text-sm font-bold"},Q={class:"flex justify-end mt-2 space-x-4"},ee=$({__name:"BidCard",props:{bid:{type:Object,required:!0},sellerId:{type:String,required:!0},showViewButton:{type:Boolean,default:!0}},setup(e){const{notifications:n}=B(E()),w=E().NOTIFICATION_TYPES,{user:x}=B(S()),d=S().BID_STATUSES,v=O(),C=V(!1),D=async t=>{if(!t)return;const{callFunction:a}=R("cancelBid",{bidId:t},C,void 0,void 0,()=>{n.value.show=!0,n.value.type=w.SUCCESS,n.value.message="Bid cancelled successfully"},u=>{n.value.show=!0,n.value.type=w.ERROR,n.value.message="Error while cancelling bid, please try again later"});await a()},A=t=>{t&&v.push({name:"ad",params:{adId:t}})},N=t=>{t&&(console.log("contactWinner",t),v.push({name:"messaging",params:{adId:t}}))},_=t=>{const a=new Date,u=t.toDate(),f=a.getTime()-u.getTime(),o=Math.floor(f/1e3),c=Math.floor(o/60),l=Math.floor(c/60),T=Math.floor(l/24);return T>0?`${T} days ago`:l>0?`${l} hours ago`:c>0?`${c} minutes ago`:o>0?`${o} seconds ago`:"just now"};return(t,a)=>{var f,o,c;const u=F("currency");return r(),I("div",q,[e.bid.status==i(d).ACCEPTED?(r(),I("div",U,[s("p",L,b(e.bid.status==i(d).ACCEPTED?"Winning Bid":e.bid.status),1)])):m("",!0),s("div",W,[s("p",Y,b(i(M)(e.bid.createdAt)?_(e.bid.createdAt):e.bid.createdAt),1)]),s("span",z,[s("div",G,[Z,s("p",p,b(e.bid.buyerId.substring(0,5)),1)]),s("div",H,[J,P(s("p",K,null,512),[[u,e.bid.price]])])]),s("div",Q,[e.bid.status===i(d).PENDING&&e.bid.buyerId==((f=i(x))==null?void 0:f.uid)?(r(),h(j,{key:0,isLoading:C.value,onClick:a[0]||(a[0]=l=>D(e.bid.id))},{default:g(()=>[y(" Cancel Bid ")]),_:1},8,["isLoading"])):m("",!0),e.showViewButton?(r(),h(k,{key:1,onClick:a[1]||(a[1]=l=>A(e.bid.adId))},{default:g(()=>[y(" View ")]),_:1})):m("",!0),e.bid.status==i(d).ACCEPTED&&(e.bid.buyerId==((o=i(x))==null?void 0:o.uid)||e.sellerId==((c=i(x))==null?void 0:c.uid))?(r(),h(k,{key:2,onClick:a[2]||(a[2]=l=>N(e.bid.adId))},{default:g(()=>[y(" Contact ")]),_:1})):m("",!0)])])}}});export{ee as _};
