import{d as F,r as w,a6 as ne,a7 as Ne,a8 as ke,G as E,a9 as oe,aa as $e,o as U,O as Pe,ab as Re,ac as B,ad as ie,ae as Le,F as P,af as Ie,ag as Se,ah as pe,ai as Fe,aj as we,ak as le,al as z,am as ae,an as Be,ao as Ve,ap as Z,aq as Y,e as r,f as g,k as e,n as R,s as L,u as Ae,K as ce,p,L as M,A as O,B as V,t as $,C as m,a1 as re,w as Q,j as J,a0 as Ee,a2 as ue,z as te,a as q,a4 as D,c as se,q as N,x as de,m as W,W as Me,V as je,T as De,X as K,I as Ce}from"./index-d4d9ec3f.js";import{I as Ue}from"./ImageCarousel-8bbcc0af.js";import{r as me,a as _e,b as xe,c as ve}from"./PencilIcon-b7e3522d.js";import{_ as Ge}from"./BuyerAdCard.vue_vue_type_script_setup_true_lang-828e30a7.js";import{_ as ze}from"./BidCard.vue_vue_type_script_setup_true_lang-cfa60095.js";import{R as Ye,h as Je,y as he,M as qe}from"./menu-e1717ffa.js";let We=F({props:{onFocus:{type:Function,required:!0}},setup(s){let x=w(!0);return()=>x.value?ne(ke,{as:"button",type:"button",features:Ne.Focusable,onFocus(c){c.preventDefault();let o,n=50;function t(){var i;if(n--<=0){o&&cancelAnimationFrame(o);return}if((i=s.onFocus)!=null&&i.call(s)){x.value=!1,cancelAnimationFrame(o);return}o=requestAnimationFrame(t)}o=requestAnimationFrame(t)}}):null}});var He=(s=>(s[s.Forwards=0]="Forwards",s[s.Backwards=1]="Backwards",s))(He||{}),Ke=(s=>(s[s.Less=-1]="Less",s[s.Equal=0]="Equal",s[s.Greater=1]="Greater",s))(Ke||{});let Oe=Symbol("TabsContext");function fe(s){let x=pe(Oe,null);if(x===null){let c=new Error(`<${s} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,fe),c}return x}let be=Symbol("TabsSSRContext"),Qe=F({name:"TabGroup",emits:{change:s=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(s,{slots:x,attrs:c,emit:o}){var n;let t=w((n=s.selectedIndex)!=null?n:s.defaultIndex),i=w([]),b=w([]),I=E(()=>s.selectedIndex!==null),k=E(()=>I.value?s.selectedIndex:t.value);function T(l){var a;let u=oe(_.tabs.value,B),h=oe(_.panels.value,B),v=u.filter(y=>{var d;return!((d=B(y))!=null&&d.hasAttribute("disabled"))});if(l<0||l>u.length-1){let y=le(t.value===null?0:Math.sign(l-t.value),{[-1]:()=>1,0:()=>le(Math.sign(l),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),d=le(y,{0:()=>u.indexOf(v[0]),1:()=>u.indexOf(v[v.length-1])});d!==-1&&(t.value=d),_.tabs.value=u,_.panels.value=h}else{let y=u.slice(0,l),d=[...u.slice(l),...y].find(S=>v.includes(S));if(!d)return;let j=(a=u.indexOf(d))!=null?a:_.selectedIndex.value;j===-1&&(j=_.selectedIndex.value),t.value=j,_.tabs.value=u,_.panels.value=h}}let _={selectedIndex:E(()=>{var l,a;return(a=(l=t.value)!=null?l:s.defaultIndex)!=null?a:null}),orientation:E(()=>s.vertical?"vertical":"horizontal"),activation:E(()=>s.manual?"manual":"auto"),tabs:i,panels:b,setSelectedIndex(l){k.value!==l&&o("change",l),I.value||T(l)},registerTab(l){var a;if(i.value.includes(l))return;let u=i.value[t.value];i.value.push(l),i.value=oe(i.value,B);let h=(a=i.value.indexOf(u))!=null?a:t.value;h!==-1&&(t.value=h)},unregisterTab(l){let a=i.value.indexOf(l);a!==-1&&i.value.splice(a,1)},registerPanel(l){b.value.includes(l)||(b.value.push(l),b.value=oe(b.value,B))},unregisterPanel(l){let a=b.value.indexOf(l);a!==-1&&b.value.splice(a,1)}};$e(Oe,_);let A=w({tabs:[],panels:[]}),C=w(!1);U(()=>{C.value=!0}),$e(be,E(()=>C.value?null:A.value));let f=E(()=>s.selectedIndex);return U(()=>{Pe([f],()=>{var l;return T((l=s.selectedIndex)!=null?l:s.defaultIndex)},{immediate:!0})}),Re(()=>{if(!I.value||k.value==null||_.tabs.value.length<=0)return;let l=oe(_.tabs.value,B);l.some((a,u)=>B(_.tabs.value[u])!==B(a))&&_.setSelectedIndex(l.findIndex(a=>B(a)===B(_.tabs.value[k.value])))}),()=>{let l={selectedIndex:t.value};return ne(P,[i.value.length<=0&&ne(We,{onFocus:()=>{for(let a of i.value){let u=B(a);if((u==null?void 0:u.tabIndex)===0)return u.focus(),!0}return!1}}),ie({theirProps:{...c,...Le(s,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:l,slots:x,attrs:c,name:"TabGroup"})])}}}),Xe=F({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(s,{attrs:x,slots:c}){let o=fe("TabList");return()=>{let n={selectedIndex:o.selectedIndex.value},t={role:"tablist","aria-orientation":o.orientation.value};return ie({ourProps:t,theirProps:s,slot:n,attrs:x,slots:c,name:"TabList"})}}}),Te=F({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${Ie()}`}},setup(s,{attrs:x,slots:c,expose:o}){let n=fe("Tab"),t=w(null);o({el:t,$el:t}),U(()=>n.registerTab(t)),Se(()=>n.unregisterTab(t));let i=pe(be),b=E(()=>{if(i.value){let a=i.value.tabs.indexOf(s.id);return a===-1?i.value.tabs.push(s.id)-1:a}return-1}),I=E(()=>{let a=n.tabs.value.indexOf(t);return a===-1?b.value:a}),k=E(()=>I.value===n.selectedIndex.value);function T(a){var u;let h=a();if(h===ae.Success&&n.activation.value==="auto"){let v=(u=Ve(t))==null?void 0:u.activeElement,y=n.tabs.value.findIndex(d=>B(d)===v);y!==-1&&n.setSelectedIndex(y)}return h}function _(a){let u=n.tabs.value.map(h=>B(h)).filter(Boolean);if(a.key===z.Space||a.key===z.Enter){a.preventDefault(),a.stopPropagation(),n.setSelectedIndex(I.value);return}switch(a.key){case z.Home:case z.PageUp:return a.preventDefault(),a.stopPropagation(),T(()=>Z(u,Y.First));case z.End:case z.PageDown:return a.preventDefault(),a.stopPropagation(),T(()=>Z(u,Y.Last))}if(T(()=>le(n.orientation.value,{vertical(){return a.key===z.ArrowUp?Z(u,Y.Previous|Y.WrapAround):a.key===z.ArrowDown?Z(u,Y.Next|Y.WrapAround):ae.Error},horizontal(){return a.key===z.ArrowLeft?Z(u,Y.Previous|Y.WrapAround):a.key===z.ArrowRight?Z(u,Y.Next|Y.WrapAround):ae.Error}}))===ae.Success)return a.preventDefault()}let A=w(!1);function C(){var a;A.value||(A.value=!0,!s.disabled&&((a=B(t))==null||a.focus({preventScroll:!0}),n.setSelectedIndex(I.value),Be(()=>{A.value=!1})))}function f(a){a.preventDefault()}let l=Fe(E(()=>({as:s.as,type:x.type})),t);return()=>{var a;let u={selected:k.value},{id:h,...v}=s,y={ref:t,onKeydown:_,onMousedown:f,onClick:C,id:h,role:"tab",type:l.value,"aria-controls":(a=B(n.panels.value[I.value]))==null?void 0:a.id,"aria-selected":k.value,tabIndex:k.value?0:-1,disabled:s.disabled?!0:void 0};return ie({ourProps:y,theirProps:v,slot:u,attrs:x,slots:c,name:"Tab"})}}}),ee=F({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${Ie()}`},tabIndex:{type:Number,default:0}},setup(s,{attrs:x,slots:c,expose:o}){let n=fe("TabPanel"),t=w(null);o({el:t,$el:t}),U(()=>n.registerPanel(t)),Se(()=>n.unregisterPanel(t));let i=pe(be),b=E(()=>{if(i.value){let T=i.value.panels.indexOf(s.id);return T===-1?i.value.panels.push(s.id)-1:T}return-1}),I=E(()=>{let T=n.panels.value.indexOf(t);return T===-1?b.value:T}),k=E(()=>I.value===n.selectedIndex.value);return()=>{var T;let _={selected:k.value},{id:A,tabIndex:C,...f}=s,l={ref:t,id:A,role:"tabpanel","aria-labelledby":(T=B(n.tabs.value[I.value]))==null?void 0:T.id,tabIndex:k.value?C:-1};return!k.value&&s.unmount&&!s.static?ne(ke,{as:"span",...l}):ie({ourProps:l,theirProps:f,slot:_,attrs:x,slots:c,features:we.Static|we.RenderStrategy,visible:k.value,name:"TabPanel"})}}});function Ze(s,x){return r(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})])}const et={class:"relative bg-white p-4 rounded-xl shadow transition-shadow duration-300 hover:shadow-xl"},tt={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},st={class:"relative w-full h-52 bg-gray-200 rounded-xl overflow-hidden"},ot={key:1,class:"flex items-center justify-center h-full"},at=e("p",{class:"text-gray-500"},"No Image Available",-1),lt=[at],nt={class:"mt-4"},it={class:"text-2xl font-bold"},ct={class:"flex flex-row justify-between"},rt={key:0,class:"flex flex-row gap-4 items-center"},ut=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),dt=e("p",{class:"text-sm text-green-500"},"LIVE",-1),vt=[ut,dt],ft={key:1,class:"flex flex-row gap-4 items-center"},gt=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),ht=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),pt=[gt,ht],mt={class:"text-sm bg-slate-200/50 p-2 italic rounded-md"},_t={class:"flex flex-row justify-between w-full"},xt={class:"flex flex-row gap-2 text-sm justify-between gap-2"},bt={class:"font-semibold"},yt={class:"flex flex-row gap-2 text-sm justify-between gap-2"},$t={class:"font-semibold"},wt={class:"flex justify-end space-x-4 mt-4"},Ct=F({__name:"SellerAdDashboardCard",props:{ad:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit"],setup(s,{emit:x}){const c=R().NOTIFICATION_TYPES,{modals:o,notifications:n}=L(R()),t=Ae(),i=w(!1),b=async f=>{if(!f)return;const{callFunction:l}=te("postAd",{adId:f},i,void 0,void 0,()=>{n.value.show=!0,n.value.type=c.SUCCESS,n.value.message="Ad is live!"},a=>{n.value.show=!0,n.value.type=c.ERROR,n.value.message="Error while posting ad, please try again later"});await l()},I=async f=>{if(!f)return;const{callFunction:l}=te("takedownAd",{adId:f},i,void 0,void 0,()=>{n.value.show=!0,n.value.type=c.SUCCESS,n.value.message="Ad taken down!"},a=>{n.value.show=!0,n.value.type=c.ERROR,n.value.message="Error while taken down ad, please try again later"});await l()},k=async f=>{f&&(console.log("removeAd",f),o.value.confirmremove=!0,o.value.context={adId:f,__key:"ad"})},T=f=>{f&&t.push({name:"ad",params:{adId:f}})},_=async f=>{f&&(console.log("removeAd",f),o.value.editad=!0,o.value.context=ad)},A=f=>{f&&t.push({name:"messaging",params:{adId:f}})},C=f=>{const l=new Date,a=f.toDate(),u=l.getTime()-a.getTime(),h=Math.floor(u/1e3),v=Math.floor(h/60),y=Math.floor(v/60),d=Math.floor(y/24);return d>1?`${d} days ago`:d==1?`${d} day ago`:y>0?`${y} hours ago`:v>0?`${v} minutes ago`:h>0?`${h} seconds ago`:"just now"};return(f,l)=>{const a=ce("currency");return r(),g("div",et,[i.value?(r(),g("div",tt,[p(M,{isLoading:i.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",st,[s.ad.images&&s.ad.images.length>0?(r(),V(Ue,{key:0,images:s.ad.resizedImages,class:"h-full object-cover"},null,8,["images"])):(r(),g("div",ot,lt))]),e("div",nt,[e("h3",it,$(s.ad.variety),1),e("div",ct,[s.ad.live?(r(),g("div",rt,vt)):(r(),g("div",ft,pt)),e("p",mt,$(m(re)(s.ad.createdAt)?C(s.ad.createdAt):f.gig.createdAt),1)]),e("div",_t,[e("div",xt,[Q((r(),g("p",bt,[J("/ton")])),[[a,s.ad.pricePerTon]])]),e("div",yt,[e("p",$t,$(s.ad.tons)+" tons",1)])]),e("div",wt,[s.showButtons?(r(),g(P,{key:0},[s.ad.live?O("",!0):(r(),V(m(me),{key:0,class:"h-5 w-5 text-cyan-600",onClick:l[0]||(l[0]=u=>b(s.ad.id)),title:"Post ad'"})),s.ad.live?(r(),V(m(_e),{key:1,class:"h-5 w-5 text-cyan-600",onClick:l[1]||(l[1]=u=>I(s.ad.id)),title:"Take down ad"})):O("",!0),p(m(Ee),{class:"h-5 w-5 text-cyan-600",onClick:l[2]||(l[2]=u=>A(s.ad.id)),title:"Contact"}),p(m(ue),{class:"h-5 w-5 text-cyan-600",onClick:l[3]||(l[3]=u=>k(s.ad.id)),title:"Remove"}),p(m(xe),{class:"h-5 w-5 text-cyan-600",onClick:l[4]||(l[4]=u=>_(s.ad.id)),title:"Edit"})],64)):O("",!0),p(m(ve),{class:"h-5 w-5 text-cyan-600",onClick:l[5]||(l[5]=u=>T(s.ad.id)),title:"View"})])])])}}}),Tt={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-5"},kt={class:"p-2"},It=e("span",{class:"text-sm font-medium text-slate-300"},"Number of ads",-1),St={class:"text-4xl font-bold text-slate-500"},At={class:"p-2"},Et=e("span",{class:"text-sm font-medium text-slate-300"},"Number of live ads",-1),jt={class:"text-4xl font-bold text-slate-500"},Ot={class:"p-2 relative"},Nt=e("span",{class:"text-sm font-medium text-slate-300"},"Total views",-1),Pt={class:"text-4xl font-bold text-slate-500"},Rt={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Lt={class:"p-2 relative"},Ft=e("span",{class:"text-sm font-medium text-slate-300"},"Number of bids",-1),Bt={class:"text-4xl font-bold text-slate-500"},Vt={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Mt={class:"p-2 flex items-center justify-center"},Dt={key:0,class:"p-4 grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},Ut={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},Gt=e("div",{class:"italic"},"No ads found",-1),zt=[Gt],Yt={key:2},Jt=F({__name:"SellerContentComponent",setup(s){const{user:x}=L(q()),{modals:c,notifications:o}=L(R()),n=R().NOTIFICATION_TYPES,t=w([]),i=w(!1),{subscribe:b,unsubscribe:I}=D("ads",[["uid","==",x.value.uid]],["createdAt","desc"],v=>{t.value.docs=v,t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:{}},v=>{o.value.show=!0,o.value.type=n.ERROR,o.value.message="Error loading ads, please try again later."},i,()=>{},()=>{},v=>{o.value.show=!0,o.value.type=n.SUCCESS,o.value.message="Ad has been created."},v=>{o.value.show=!0,o.value.type=n.SUCCESS,o.value.message="Ad has been removed."});U(async()=>{b(),C(),u()}),se(()=>{I(),f(),h()});const k=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.live==!0).length),T=()=>{c.value.addad=!0},_=w(0),A=w(!1),{subscribe:C,unsubscribe:f}=D("bids",[["sellerId","==",x.value.uid]],["createdAt","desc"],v=>{_.value=v.length},void 0,A),l=w(0),a=w(!1),{subscribe:u,unsubscribe:h}=D("ads",[["uid","==",x.value.uid]],["createdAt","desc"],v=>{let y=0;v.forEach(d=>{y+=d.viewCount?d.viewCount:0}),l.value=y},void 0,a);return(v,y)=>(r(),g(P,null,[e("div",Tt,[e("div",kt,[It,e("p",St,$(t.value.docs&&t.value.docs.length),1)]),e("div",At,[Et,e("p",jt,$(k.value),1)]),e("div",Ot,[Nt,e("p",Pt,$(l.value),1),a.value?(r(),g("div",Rt,[p(M,{isLoading:a.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Lt,[Ft,e("p",Bt,$(_.value),1),A.value?(r(),g("div",Vt,[p(M,{isLoading:A.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Mt,[p(de,{onClick:T,classes:"w-32 p-2"},{default:N(()=>[J("Create an ad")]),_:1})])]),t.value.docs&&t.value.docs.length>0&&!i.value?(r(),g("span",Dt,[(r(!0),g(P,null,W(t.value.docs,(d,j)=>(r(),V(Ct,{key:j,ad:d},null,8,["ad"]))),128))])):t.value.docs&&t.value.docs.length==0&&!i.value?(r(),g("div",Ut,zt)):(r(),g("div",Yt,[p(M,{isLoading:i.value},null,8,["isLoading"])]))],64))}}),qt={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-5"},Wt={class:"p-2"},Ht=e("span",{class:"text-sm font-medium text-slate-300"},"Number of ads",-1),Kt={class:"text-4xl font-bold text-slate-500"},Qt={class:"p-2"},Xt=e("span",{class:"text-sm font-medium text-slate-300"},"Number of live ads",-1),Zt={class:"text-4xl font-bold text-slate-500"},es=e("div",{class:"p-2"},[e("span",{class:"text-sm font-medium text-slate-300"},"Total views"),e("p",{class:"text-4xl font-bold text-slate-500"},"0")],-1),ts={class:"p-2 flex items-center justify-center"},ss={key:0,class:"grid grid-flow-col gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},os={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},as=e("div",{class:"italic"},"No ads found",-1),ls=[as],ns={key:2},is=F({__name:"BuyerContentComponent",setup(s){const{user:x}=L(q()),{modals:c,notifications:o}=L(R()),n=R().NOTIFICATION_TYPES,t=w([]),i=w(!1),{subscribe:b,unsubscribe:I}=D("ads",[["uid","==",x.value.uid]],["createdAt","desc"],_=>{t.value.docs=_,t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:{}},_=>{o.value.show=!0,o.value.type=n.ERROR,o.value.message="Error loading ads, please try again later."},i,()=>{},()=>{},_=>{o.value.show=!0,o.value.type=n.SUCCESS,o.value.message="Ad has been created."},_=>{o.value.show=!0,o.value.type=n.SUCCESS,o.value.message="Ad has been removed."});U(async()=>{b()}),se(()=>{I()});const k=()=>{c.value.addad=!0},T=computed(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(_=>_.live==!0).length);return(_,A)=>(r(),g(P,null,[e("div",qt,[e("div",Wt,[Ht,e("p",Kt,$(t.value.docs&&t.value.docs.length),1)]),e("div",Qt,[Xt,e("p",Zt,$(m(T)),1)]),es,e("div",ts,[p(de,{onClick:k,classes:"w-32 p-2"},{default:N(()=>[J("Create an ad")]),_:1})])]),t.value.docs&&t.value.docs.length>0&&!i.value?(r(),g("span",ss,[(r(!0),g(P,null,W(t.value.docs,(C,f)=>(r(),V(Ge,{key:f,ad:C},null,8,["ad"]))),128))])):O("",!0),t.value.docs&&t.value.docs.length==0&&!i.value?(r(),g("div",os,ls)):(r(),g("div",ns,[p(M,{isLoading:i.value},null,8,["isLoading"])]))],64))}}),cs={key:0,class:"grid grid-flow-row space-y-4"},rs={key:1},us={key:2,class:"h-96 p-2 flex items-center justify-center"},ds=e("p",{class:"italic"},"No bids yet",-1),vs=[ds],fs=F({__name:"BidContentComponent",setup(s){const{user:x}=L(q()),c=w([]),o=w(!1),n=async()=>{o.value=!0,c.value=await Me("bids","buyerId","==",x.value.uid,["createdAt","desc"],10),o.value=!1};return U(async()=>{await n()}),(t,i)=>c.value.docs&&c.value.docs.length>0&&!o.value?(r(),g("span",cs,[(r(!0),g(P,null,W(c.value.docs,b=>(r(),V(ze,{bid:b},null,8,["bid"]))),256))])):o.value?(r(),g("div",rs,[p(M,{isLoading:o.value},null,8,["isLoading"])])):(r(),g("span",us,vs))}}),gs={class:"relative bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4"},hs={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},ps={class:"flex flex-row justify-between p-4"},ms={key:0,class:"flex flex-row gap-4 items-center"},_s=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),xs=e("p",{class:"text-sm text-green-500"},"LIVE",-1),bs=[_s,xs],ys={key:1,class:"flex flex-row gap-4 items-center"},$s=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),ws=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),Cs=[$s,ws],Ts={class:"text-sm bg-slate-200/50 p-2 italic rounded-md"},ks={class:"flex flex-row border-top"},Is={class:"text-xl capitalize"},Ss={class:"flex flex-row gap-2 mb-2 items-center"},As={class:"text-sm truncate italic text-slate-500"},Es={class:"flex flex-row gap-4 p-4"},js={class:"text-sm"},Os={class:"grid grid-cols-2 divide-x px-4 mb-2"},Ns={class:"flex flex-col p-2 justify-between"},Ps=e("p",{class:"text-xs italic"},"Number of milestones",-1),Rs={class:"text-2xl"},Ls={class:"flex flex-col p-2 justify-between"},Fs=e("p",{class:"text-xs italic"},"Total",-1),Bs={class:"text-2xl"},Vs={key:1,class:"w-full flex justify-end gap-4"},Ms=F({__name:"GigDashboardCard",props:{gig:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit","remove"],setup(s,{emit:x}){const{notifications:c,modals:o}=L(R()),n=R().NOTIFICATION_TYPES,t=x,i=s,b=w(!1),I=async l=>{const{callFunction:a}=te("postGigPost",{gigId:l},b,void 0,void 0,()=>{c.value.show=!0,c.value.type=n.SUCCESS,c.value.message="Gig posted successfully"},()=>{c.value.show=!0,c.value.type=n.ERROR,c.value.message="An error occured while posting gig, please try again later"});await a()},k=async l=>{const{callFunction:a}=te("takeDownGigPost",{gigId:l},b,void 0,void 0,()=>{c.value.show=!0,c.value.type=n.SUCCESS,c.value.message="Gig taken down successfully"},()=>{c.value.show=!0,c.value.type=n.ERROR,c.value.message="An error occured while taking down the gig, please try again later"});await a()},T=E(()=>!i.gig.milestones||i.gig.milestones.length===0?0:i.gig.milestones.reduce((l,a)=>l+a.price,0)),_=l=>{const a=new Date,u=l.toDate(),h=a.getTime()-u.getTime(),v=Math.floor(h/1e3),y=Math.floor(v/60),d=Math.floor(y/60),j=Math.floor(d/24);return j>1?`${j} days ago`:j==1?`${j} day ago`:d>0?`${d} hours ago`:y>0?`${y} minutes ago`:v>0?`${v} seconds ago`:"just now"},A=l=>{l&&(o.value.viewgig=!0,o.value.context.__key=l)},C=l=>{t("edit",l)},f=l=>{t("remove",l)};return(l,a)=>{const u=ce("currency");return r(),g("span",gs,[b.value?(r(),g("div",hs,[p(M,{isLoading:b.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",ps,[s.gig.live?(r(),g("div",ms,bs)):(r(),g("div",ys,Cs)),e("p",Ts,$(m(re)(s.gig.createdAt)?_(s.gig.createdAt):s.gig.createdAt),1)]),e("div",ks,[e("p",Is,$(s.gig.title),1)]),e("div",Ss,[p(m(je),{class:"w-5 h-5 text-slate-500"}),e("p",As,$(s.gig.location),1)]),e("div",Es,[e("p",js,$(s.gig.description.substring(0,197)+"..."),1)]),e("div",Os,[e("div",Ns,[Ps,e("p",Rs,$(s.gig.milestones.length),1)]),e("div",Ls,[Fs,Q(e("p",Bs,null,512),[[u,T.value]])])]),s.showButtons?(r(),g("div",Vs,[s.showButtons?(r(),g(P,{key:0},[s.gig.live?O("",!0):(r(),V(m(me),{key:0,onClick:a[0]||(a[0]=h=>I(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})),s.gig.live?(r(),V(m(_e),{key:1,onClick:a[1]||(a[1]=h=>k(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})):O("",!0),p(m(ue),{onClick:a[2]||(a[2]=h=>f(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"}),p(m(xe),{onClick:a[3]||(a[3]=h=>C(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})],64)):O("",!0),p(m(ve),{onClick:a[4]||(a[4]=h=>A(s.gig.gigId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})])):O("",!0)])}}}),Ds={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-5"},Us={class:"p-2 h-16"},Gs=e("span",{class:"text-sm font-medium text-slate-300"},"Number of Gigs",-1),zs={class:"text-2xl font-bold text-slate-500"},Ys={class:"p-2 h-16"},Js=e("span",{class:"text-sm font-medium text-slate-300"},"Number of live posts",-1),qs={class:"text-2xl font-bold text-slate-500"},Ws={class:"p-2 h-16"},Hs=e("span",{class:"text-sm font-medium text-slate-300"},"Total views",-1),Ks={class:"text-2xl font-bold text-slate-500"},Qs={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},Xs={class:"p-2 flex flex-col justify-between h-16"},Zs=e("span",{class:"text-sm font-medium text-slate-300"},"Milestones Total",-1),eo={class:"text-2xl font-bold text-slate-500"},to={class:"p-2 flex items-center justify-center"},so={class:"p-4 grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},oo={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},ao=e("p",{class:"italic"},"No gig posts",-1),lo=[ao],no={key:2},io=F({__name:"GigsContentComponent",setup(s){const{user:x}=L(q()),{modals:c,notifications:o}=L(R()),n=R().NOTIFICATION_TYPES,t=w([]),i=w(!1),{subscribe:b,unsubscribe:I}=D("gigs",[["posterId","==",x.value.uid]],["createdAt","desc"],h=>{t.value.docs=h},h=>{o.value.show=!0,o.value.type=n.ERROR,o.value.message="Error loading gigs, please try again later."},i,()=>{},()=>{},h=>{o.value.show=!0,o.value.type=n.SUCCESS,o.value.message="Gig has been created."},h=>{o.value.show=!0,o.value.type=n.SUCCESS,o.value.message="Gig has been removed."}),k=()=>{c.value.addgig=!0},T=h=>{c.value.confirmremove=!0,c.value.context={__key:"gig",gigId:h}},_=h=>{c.value.editgig=!0;const v=t.value.docs.find(y=>y.gigId==h);c.value.context=v};U(async()=>{b(),a()}),se(()=>{I(),u()});const A=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.reduce((h,v)=>v.milestones?h+v.milestones.reduce((y,d)=>y+d.price,0):h,0)),C=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(h=>h.live==!0).length),f=w(0),l=w(!1),{subscribe:a,unsubscribe:u}=D("ads",[["posterId","==",x.value.uid]],["createdAt","desc"],h=>{let v=0;h.forEach(y=>{v+=y.viewCount?y.viewCount:0}),f.value=v},void 0,l);return(h,v)=>{const y=ce("currency");return r(),g(P,null,[e("div",Ds,[e("div",Us,[Gs,e("p",zs,$(t.value.docs&&t.value.docs.length),1)]),e("div",Ys,[Js,e("p",qs,$(C.value),1)]),e("div",Ws,[Hs,e("p",Ks,$(f.value),1),l.value?(r(),g("div",Qs,[p(M,{isLoading:l.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",Xs,[Zs,Q(e("p",eo,null,512),[[y,A.value]])]),e("div",to,[p(de,{classes:"w-full",onClick:k},{default:N(()=>[J(" Create a gig post ")]),_:1})])]),e("span",so,[t.value.docs&&t.value.docs.length>0&&!i.value?(r(!0),g(P,{key:0},W(t.value.docs,(d,j)=>(r(),V(Ms,{key:j,gig:d,onEdit:_,onRemove:T},null,8,["gig"]))),128)):t.value.docs&&t.value.docs.length==0&&!i.value?(r(),g("span",oo,lo)):(r(),g("div",no,[p(M,{isLoading:i.value},null,8,["isLoading"])]))])],64)}}}),co={class:"absolute top-2 left-0 text-right"},ro={class:"px-1 py-1"},uo={class:"px-1 py-1"},vo=F({__name:"ApplicationDropdownMenu",emits:["remove","view","contact"],setup(s,{emit:x}){return(c,o)=>(r(),g("div",co,[p(m(qe),{as:"div",class:"relative inline-block text-left"},{default:N(()=>[e("div",null,[p(m(Ye),{class:"inline-flex w-full justify-center rounded-md px-4 py-2 text-sm font-medium text-bg/30 hover:bg-cyan-600/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75"},{default:N(()=>[J(" Options "),p(m(Ze),{class:"-mr-1 ml-2 h-5 w-5 text-cyan-600 hover:text-cyan-600","aria-hidden":"true"})]),_:1})]),p(De,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:N(()=>[p(m(Je),{class:"absolute right-0 mt-2 z-10 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:N(()=>[e("div",ro,[p(m(he),null,{default:N(({active:n})=>[e("button",{class:K([n?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:o[0]||(o[0]=t=>c.$emit("contact"))},[p(m(Ee),{active:n,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),J(" Reach out ")],2)]),_:1}),p(m(he),null,{default:N(({active:n})=>[e("button",{class:K([n?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:o[1]||(o[1]=t=>c.$emit("remove"))},[p(m(ue),{active:n,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),J(" Remove ")],2)]),_:1})]),e("div",uo,[p(m(he),null,{default:N(({active:n})=>[e("button",{class:K([n?"bg-cyan-600/50 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:o[2]||(o[2]=t=>c.$emit("view"))},[p(m(ve),{active:n,class:"mr-2 h-5 w-5 text-cyan-600","aria-hidden":"true"},null,8,["active"]),J(" View Application ")],2)]),_:1})])]),_:1})]),_:1})]),_:1})]))}}),fo={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-3"},go={class:"p-2"},ho=e("span",{class:"text-sm font-medium text-slate-300"},"Number of Applications",-1),po={class:"text-4xl font-bold text-slate-500"},mo={class:"p-2"},_o=e("span",{class:"text-sm font-medium text-slate-300"},"Number of Gigs Applications",-1),xo={class:"text-4xl font-bold text-slate-500"},bo={class:"p-2"},yo=e("span",{class:"text-sm font-medium text-slate-300"},"Number of Jobs Application",-1),$o={class:"text-4xl font-bold text-slate-500"},wo={class:"p-4"},Co={class:"flex flex-row gap-4 h-6 mb-2 items-center"},To={class:"flex flex-row gap-2 items-center"},ko=e("p",{class:"text-sm font-medium text-slate-300"},"Gig",-1),Io={class:"flex flex-row gap-2 items-center"},So=e("p",{class:"text-sm font-medium text-slate-300"},"Job",-1),Ao={key:0,class:"table-fixed w-full border-collapse"},Eo=e("thead",{class:"border-y"},[e("tr",{class:"text-left"},[e("th",{class:"py-4"},"Application ID"),e("th",{class:"py-4"},"Name"),e("th",{class:"py-4"},"Email"),e("th",{class:"py-4"},"For"),e("th",{class:"py-4"},"Recieved On"),e("th",{class:"py-4"},"Action")])],-1),jo={class:"py-2"},Oo={class:"py-2 capitalize truncate"},No={class:"py-2 truncate"},Po={class:"py-2"},Ro={class:"flex flex-row gap-2 items-center"},Lo={class:"pb-1 capitalize"},Fo={class:"py-2 italic"},Bo={class:"relative"},Vo={key:0},Mo={colspan:"6"},Do=["src"],Uo={key:1,class:"h-96 p-2 flex items-center justify-center"},Go=e("p",{class:"italic"},"No application posts",-1),zo=[Go],Yo={key:2},Jo=F({__name:"ApplicationsContentComponent",setup(s){const{user:x}=L(q()),{modals:c,notifications:o,messaging:n}=L(R()),t=R().NOTIFICATION_TYPES,i=w([]),b=w(!1),{subscribe:I,unsubscribe:k}=D("applications",[["ownerId","==",x.value.uid]],["createdAt","desc"],d=>{i.value.docs=d},d=>{o.value.show=!0,o.value.type=t.ERROR,o.value.message="Error loading applications, please try again later."},b,()=>{},()=>{},d=>{o.value.show=!0,o.value.type=t.SUCCESS,o.value.message="A new application has been received."},d=>{o.value.show=!0,o.value.type=t.SUCCESS,o.value.message="Application has been removed."}),T=d=>{c.value.confirmremove=!0,c.value.context={__key:"application",applicationId:d}},_=w(""),A=d=>{if(_.value===d){_.value="";return}_.value=d},C=()=>{console.log("loaded")},f=async d=>{console.log("onMessage",d.applicationId),n.value.show=!0,n.value.to={id:d.applicantId,name:d.name},n.value.context={__key:"application",application:d}};U(async()=>{I()}),se(()=>{k()});const l=w(!1),a=w(!1),u=E(()=>i.value.docs?l.value&&a.value?i.value.docs:l.value?i.value.docs.filter(d=>d.parentType==="gig"):a.value?i.value.docs.filter(d=>d.parentType==="job"):i.value.docs:[]),h=d=>{const j=new Date,S=d.toDate(),H=j.getTime()-S.getTime(),G=Math.floor(H/1e3),X=Math.floor(G/60),ge=Math.floor(X/60),ye=Math.floor(ge/24);return ye>0?`${ye} days ago`:ge>0?`${ge} hours ago`:X>0?`${X} minutes ago`:G>0?`${G} seconds ago`:"just now"},v=E(()=>i.value.docs?i.value.docs.filter(d=>d.parentType==="gig").length:0),y=E(()=>i.value.docs?i.value.docs.filter(d=>d.parentType==="job").length:0);return(d,j)=>(r(),g(P,null,[e("div",fo,[e("div",go,[ho,e("p",po,$(i.value.docs?i.value.docs.length:0),1)]),e("div",mo,[_o,e("p",xo,$(v.value),1)]),e("div",bo,[yo,e("p",$o,$(y.value),1)])]),e("div",wo,[e("div",Co,[e("div",To,[Q(e("input",{type:"checkbox",class:"w-4 h-4","onUpdate:modelValue":j[0]||(j[0]=S=>l.value=S)},null,512),[[Ce,l.value]]),ko]),e("div",Io,[Q(e("input",{type:"checkbox",class:"w-4 h-4","onUpdate:modelValue":j[1]||(j[1]=S=>a.value=S)},null,512),[[Ce,a.value]]),So])]),i.value.docs&&i.value.docs.length>0&&!b.value?(r(),g("table",Ao,[Eo,e("tbody",null,[(r(!0),g(P,null,W(u.value,(S,H)=>(r(),g(P,{key:H},[e("tr",null,[e("td",jo,$(S.applicationId.substring(0,5)),1),e("td",Oo,$(S.name),1),e("td",No,$(S.email),1),e("td",Po,[e("div",Ro,[e("div",{class:K(["rounded-full w-2 h-2",{"bg-green-500":S.parentType=="gig","bg-blue-500":S.parentType=="job"}])},null,2),e("p",Lo,$(S.parentType),1)])]),e("td",Fo,$(m(re)(S.createdAt)?h(S.createdAt):S.createdAt),1),e("td",Bo,[p(vo,{onRemove:G=>T(S.applicationId),onView:G=>A(S.applicationId),onContact:G=>f(S)},null,8,["onRemove","onView","onContact"])])]),_.value==S.applicationId?(r(),g("tr",Vo,[e("td",Mo,[e("iframe",{ref_for:!0,ref:"iframeRef",src:S.resume,width:"100%",height:"500px",onLoad:C},null,40,Do)])])):O("",!0)],64))),128))])])):i.value.docs&&i.value.docs.length==0&&!b.value?(r(),g("span",Uo,zo)):(r(),g("div",Yo,[p(M,{isLoading:b.value},null,8,["isLoading"])]))])],64))}}),qo={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-3"},Wo={class:"p-2"},Ho=e("span",{class:"text-sm font-medium text-slate-300"},"Number of Pending Contracts",-1),Ko={class:"text-4xl font-bold text-slate-500"},Qo={class:"p-2"},Xo=e("span",{class:"text-sm font-medium text-slate-300"},"Number of Accepted contracts",-1),Zo={class:"text-4xl font-bold text-slate-500"},ea={class:"p-2"},ta=e("span",{class:"text-sm font-medium text-slate-300"},"Number of Rejected contracts",-1),sa={class:"text-4xl font-bold text-slate-500"},oa={class:"p-4"},aa={key:0,class:"table-fixed w-full border-collapse"},la=e("thead",{class:"border-b"},[e("tr",{class:"text-left"},[e("th",{class:"pb-4"},"Contract ID"),e("th",{class:"pb-4"},"User"),e("th",{class:"pb-4"},"Ad ID"),e("th",{class:"pb-4"},"Status"),e("th",{class:"pb-4"},"Updated At"),e("th",{class:"pb-4"},"Created At"),e("th",{class:"pb-4"},"Action")])],-1),na={class:"py-2"},ia={class:"py-2"},ca={class:"flex flex-row justify-start items-center"},ra=["src"],ua={class:"pl-2"},da={class:"py-2"},va={class:"py-2"},fa={class:"flex flex-row w-3/4 gap-2 items-center justify-start px-1"},ga={class:"pb-1 italic capitalize"},ha={class:"py-2"},pa={class:"py-2"},ma={class:"py-2 w-5"},_a=["onClick"],xa={key:1,class:"h-96 p-2 flex items-center justify-center"},ba=e("p",{class:"italic"},"No contracts yet",-1),ya=[ba],$a={key:2},wa=F({__name:"ContractsContentComponent",setup(s){const x=Ae(),c=R().NOTIFICATION_TYPES,{notifications:o}=L(R()),{user:n}=L(q()),t=w([]),i=w(!1);let b=[],I=[];const k=()=>{t.value.docs=[...b,...I]},{subscribe:T,unsubscribe:_}=D("contracts",[["sellerId","==",n.value.uid]],["createdAt","desc"],v=>{I=v,k()},v=>{o.value.show=!0,o.value.type=c.ERROR,o.value.message="Error loading contracts, please try again later."},i),{subscribe:A,unsubscribe:C}=D("contracts",[["buyerId","==",n.value.uid]],["createdAt","desc"],v=>{b=v,k()},v=>{o.value.show=!0,o.value.type=c.ERROR,o.value.message="Error loading contracts, please try again later."},i);U(async()=>{T(),A()}),se(()=>{_(),C()});const f=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.status=="pending").length),l=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.status=="accepted").length),a=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(v=>v.status=="rejected").length),u=v=>{const y=new Date,d=v.toDate(),j=y.getTime()-d.getTime(),S=Math.floor(j/1e3),H=Math.floor(S/60),G=Math.floor(H/60),X=Math.floor(G/24);return X>0?`${X} days ago`:G>0?`${G} hours ago`:H>0?`${H} minutes ago`:S>0?`${S} seconds ago`:"just now"},h=v=>{x.push({name:"messaging",params:{adId:v}})};return(v,y)=>(r(),g(P,null,[e("div",qo,[e("div",Wo,[Ho,e("p",Ko,$(f.value),1)]),e("div",Qo,[Xo,e("p",Zo,$(l.value),1)]),e("div",ea,[ta,e("p",sa,$(a.value),1)])]),e("div",oa,[t.value.docs&&t.value.docs.length>0&&!i.value?(r(),g("table",aa,[la,e("tbody",null,[(r(!0),g(P,null,W(t.value.docs,(d,j)=>(r(),g("tr",{key:j},[e("td",na,$(d.id.substring(0,5)),1),e("td",ia,[e("div",ca,[e("img",{src:d.userSignature.profilePic,class:"w-8 h-8 rounded-full"},null,8,ra),e("p",ua,$(d.userSignature.name),1)])]),e("td",da,$(d.adId.substring(0,5)),1),e("td",va,[e("span",fa,[e("span",{class:K(["w-3 h-3 rounded-full",{"bg-green-500":d.status=="accepted","bg-red-500":d.status=="rejected","bg-yellow-500":d.status=="pending"}])},null,2),e("p",ga,$(d.status),1)])]),e("td",ha,$(u(d.updatedAt)),1),e("td",pa,$(u(d.createdAt)),1),e("td",ma,[e("button",{class:":text-cyan-600",onClick:S=>h(d.adId)},"View",8,_a)])]))),128))])])):t.value.docs&&t.value.docs.length==0&&!i.value?(r(),g("div",xa,ya)):(r(),g("span",$a,[p(M,{isLoading:i.value},null,8,["isLoading"])]))])],64))}}),Ca={class:"bg-white rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4 relative"},Ta={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},ka={class:"flex flex-row justify-between p-4"},Ia={key:0,class:"flex flex-row gap-4 items-center"},Sa=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),Aa=e("p",{class:"text-sm text-green-500"},"LIVE",-1),Ea=[Sa,Aa],ja={key:1,class:"flex flex-row gap-4 items-center"},Oa=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),Na=e("p",{class:"text-sm text-red-500"},"NOT LIVE",-1),Pa=[Oa,Na],Ra={class:"text-sm bg-slate-200/50 p-2 italic rounded-md"},La={class:"flex flex-row gap-4 bg-gradient-to-r from-sky-600/50 mb-2"},Fa={class:"text-xl capitalize my-2 text-white pl-4"},Ba={class:"flex flex-row gap-1 pl-4 mb-2"},Va={class:"text-sm truncate italic text-slate-500"},Ma={class:"flex flex-row gap-4 p-4"},Da={class:"text-sm"},Ua={class:"flex flex-row gap-4 divide-x px-4 mb-2"},Ga={class:"flex flex-col p-2"},za=e("p",{class:"text-xs"}," Salary Min. ",-1),Ya={class:"text-xl"},Ja={class:"flex flex-col p-2"},qa=e("p",{class:"text-xs"}," Salary Max. ",-1),Wa={class:"text-xl"},Ha={class:"w-full flex justify-end gap-4 pr-4 pb-4"},Ka=F({__name:"JobDashboardCard",props:{job:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit","remove"],setup(s,{emit:x}){const{notifications:c,modals:o}=L(R()),n=R().NOTIFICATION_TYPES,t=x,i=w(!1),b=async C=>{const{callFunction:f}=te("postJobPost",{jobId:C},i,void 0,void 0,()=>{c.value.show=!0,c.value.type=n.SUCCESS,c.value.message="Job Posted"},()=>{c.value.show=!0,c.value.type=n.ERROR,c.value.message="An error occured during the process, please try again later"});await f()},I=async C=>{const{callFunction:f}=te("takeDownJobPost",{jobId:C},i,void 0,void 0,()=>{c.value.show=!0,c.value.type=n.SUCCESS,c.value.message="Job post is now down"},()=>{c.value.show=!0,c.value.type=n.ERROR,c.value.message="An error occured during the process, please try again later"});await f()},k=C=>{const f=new Date,l=C.toDate(),a=f.getTime()-l.getTime(),u=Math.floor(a/1e3),h=Math.floor(u/60),v=Math.floor(h/60),y=Math.floor(v/24);return y>1?`${y} days ago`:y==1?`${y} day ago`:v>0?`${v} hours ago`:h>0?`${h} minutes ago`:u>0?`${u} seconds ago`:"just now"},T=C=>{C&&(o.value.viewjob=!0,o.value.context.__key=C)},_=C=>{t("edit",C)},A=C=>{t("remove",C)};return(C,f)=>{const l=ce("currency");return r(),g("span",Ca,[i.value?(r(),g("div",Ta,[p(M,{isLoading:i.value,class:"z-20"},null,8,["isLoading"])])):O("",!0),e("div",ka,[s.job.live?(r(),g("div",Ia,Ea)):(r(),g("div",ja,Pa)),e("p",Ra,$(m(re)(s.job.createdAt)?k(s.job.createdAt):s.job.createdAt),1)]),e("div",La,[e("p",Fa,$(s.job.title),1)]),e("div",Ba,[p(m(je),{class:"w-5 h-5"}),e("p",Va,$(s.job.location),1)]),e("div",Ma,[e("p",Da,$(s.job.description.substring(0,197)+"..."),1)]),e("div",Ua,[e("div",Ga,[za,Q(e("p",Ya,null,512),[[l,s.job.salaryMin]])]),e("div",Ja,[qa,Q(e("p",Wa,null,512),[[l,s.job.salaryMax]])])]),e("div",Ha,[s.showButtons?(r(),g(P,{key:0},[s.job.live?O("",!0):(r(),V(m(me),{key:0,onClick:f[0]||(f[0]=a=>b(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})),s.job.live?(r(),V(m(_e),{key:1,onClick:f[1]||(f[1]=a=>I(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})):O("",!0),p(m(ue),{onClick:f[2]||(f[2]=a=>A(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"}),p(m(xe),{onClick:f[3]||(f[3]=a=>_(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})],64)):O("",!0),p(m(ve),{onClick:f[4]||(f[4]=a=>T(s.job.jobId)),class:"w-5 h-5 cursor-pointer text-cyan-600"})])])}}}),Qa={class:"h-32 flex flex-row items-center divide-x border-y px-2 grid grid-cols-4"},Xa={class:"p-2"},Za=e("span",{class:"text-sm font-medium text-slate-300"},"Number of Jobs",-1),el={class:"text-4xl font-bold text-slate-500"},tl={class:"p-2"},sl=e("span",{class:"text-sm font-medium text-slate-300"},"Number of live posts",-1),ol={class:"text-4xl font-bold text-slate-500"},al={class:"p-2"},ll=e("span",{class:"text-sm font-medium text-slate-300"},"Total views",-1),nl={class:"text-4xl font-bold text-slate-500"},il={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},cl={class:"p-2 flex items-center justify-center"},rl={class:"p-4 grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},ul={key:1,class:"h-96 p-2 flex items-center justify-center col-span-4"},dl=e("p",{class:"italic"},"No job posts",-1),vl=[dl],fl={key:2},gl=F({__name:"JobsContentComponent",setup(s){const{user:x}=L(q()),{modals:c,notifications:o}=L(R()),n=R().NOTIFICATION_TYPES,t=w([]),i=w(!1),{subscribe:b,unsubscribe:I}=D("jobs",[["posterId","==",x.value.uid]],["createdAt","desc"],u=>{t.value.docs=u},u=>{o.value.show=!0,o.value.type=n.ERROR,o.value.message="Error loading jobs, please try again later."},i,()=>{},()=>{},u=>{o.value.show=!0,o.value.type=n.SUCCESS,o.value.message="Job has been created."},u=>{o.value.show=!0,o.value.type=n.SUCCESS,o.value.message="Job has been removed."}),k=()=>{c.value.addjob=!0},T=u=>{c.value.confirmremove=!0,c.value.context={__key:"job",jobId:u}},_=u=>{c.value.editjob=!0;const h=t.value.docs.find(v=>v.jobId==u);c.value.context=h},A=E(()=>!t.value.docs||t.value.docs.length===0?0:t.value.docs.filter(u=>u.live==!0).length);U(async()=>{b(),l()}),se(()=>{I(),a()});const C=w(0),f=w(!1),{subscribe:l,unsubscribe:a}=D("ads",[["posterId","==",x.value.uid]],["createdAt","desc"],u=>{let h=0;u.forEach(v=>{h+=v.viewCount?v.viewCount:0}),C.value=h},void 0,f);return(u,h)=>(r(),g(P,null,[e("div",Qa,[e("div",Xa,[Za,e("p",el,$(t.value.docs&&t.value.docs.length),1)]),e("div",tl,[sl,e("p",ol,$(A.value),1)]),e("div",al,[ll,e("p",nl,$(C.value),1),f.value?(r(),g("div",il,[p(M,{isLoading:f.value,class:"z-20"},null,8,["isLoading"])])):O("",!0)]),e("div",cl,[p(de,{classes:"w-full",onClick:k},{default:N(()=>[J(" Create a job post ")]),_:1})])]),e("span",rl,[t.value.docs&&t.value.docs.length>0&&!i.value?(r(!0),g(P,{key:0},W(t.value.docs,(v,y)=>(r(),V(Ka,{key:y,job:v,onEdit:_,onRemove:T},null,8,["job"]))),128)):t.value.docs&&t.value.docs.length==0&&!i.value?(r(),g("span",ul,vl)):(r(),g("div",fl,[p(M,{isLoading:i.value},null,8,["isLoading"])]))])],64))}}),hl={class:"w-full"},pl={key:0,class:"w-full"},wl=F({__name:"UserBoardView",setup(s){const{profile:x}=L(q()),c=q().ACCOUNT_TYPES,o=w(0),n={ADS:"Ads",CONTRACTS:"Contracts",JOBS:"Job posts",GIGS:"Gigs",APPLICATIONS:"Applications"};return(t,i)=>(r(),g("div",hl,[m(x)?(r(),g("div",pl,[p(m(Qe),null,{default:N(()=>[p(m(Xe),{class:"w-full flex space-x-1 p-1"},{default:N(()=>[(r(),g(P,null,W(n,(b,I,k)=>p(m(Te),{as:"template",key:I,onClick:T=>o.value=k},{default:N(({selected:T})=>[e("button",{class:K(["w-24 rounded-lg py-2.5 text-sm font-medium cursor-pointer",T?"text-blue-500 focus:outline-none":"text-slate-500"])},$(b),3)]),_:2},1032,["onClick"])),64)),m(x).accountType===m(c).BUYER?(r(),V(m(Te),{key:0,as:"template",onClick:i[0]||(i[0]=b=>o.value=5)},{default:N(({selected:b})=>[e("button",{class:K(["w-24 rounded-lg py-2.5 text-sm font-medium cursor-pointer",b?"text-blue-500 focus:outline-none":"text-slate-500"])}," Bids ",2)]),_:1})):O("",!0)]),_:1}),p(m(ee),null,{default:N(()=>[m(x).accountType==m(c).SELLER?(r(),V(Jt,{key:0})):O("",!0),m(x).accountType==m(c).BUYER?(r(),V(is,{key:1})):O("",!0)]),_:1}),p(m(ee),null,{default:N(()=>[p(wa)]),_:1}),p(m(ee),null,{default:N(()=>[p(gl)]),_:1}),p(m(ee),null,{default:N(()=>[p(io)]),_:1}),p(m(ee),null,{default:N(()=>[p(Jo)]),_:1}),p(m(ee),null,{default:N(()=>[p(fs)]),_:1})]),_:1})])):O("",!0)]))}});export{wl as default};
