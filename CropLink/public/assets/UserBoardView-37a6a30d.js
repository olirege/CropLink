import{d as w,h as b,P as H,Q as pe,R as ie,S as $,T as M,U as ue,o as j,V as be,W as he,X as y,Y as K,Z as xe,F as L,$ as ve,a0 as fe,a1 as te,a2 as ge,a3 as re,a4 as z,a5 as T,a6 as W,a7 as ye,a8 as we,a9 as G,aa as P,s as E,a as N,x as se,e as u,f as i,g as a,k as R,q as O,l as p,L as U,G as V,u as ae,t as k,y as m,ab as le,O as oe,m as C,i as Q,_ as X,p as Y,ac as de}from"./index-c8d29054.js";import{_ as $e}from"./SellerAdThumbnailCard.vue_vue_type_script_setup_true_lang-651959ff.js";import{_ as ke}from"./BuyerAdCard.vue_vue_type_script_setup_true_lang-10e15eba.js";import{_ as Ce}from"./BidCard.vue_vue_type_script_setup_true_lang-e19a8449.js";import"./ImageCarousel-f7c7d20c.js";let Ae=w({props:{onFocus:{type:Function,required:!0}},setup(e){let d=b(!0);return()=>d.value?H(ie,{as:"button",type:"button",features:pe.Focusable,onFocus(n){n.preventDefault();let t,s=50;function l(){var r;if(s--<=0){t&&cancelAnimationFrame(t);return}if((r=e.onFocus)!=null&&r.call(e)){d.value=!1,cancelAnimationFrame(t);return}t=requestAnimationFrame(l)}t=requestAnimationFrame(l)}}):null}});var Ie=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ie||{}),Se=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(Se||{});let _e=Symbol("TabsContext");function Z(e){let d=te(_e,null);if(d===null){let n=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Z),n}return d}let ne=Symbol("TabsSSRContext"),Te=w({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:d,attrs:n,emit:t}){var s;let l=b((s=e.selectedIndex)!=null?s:e.defaultIndex),r=b([]),f=b([]),h=$(()=>e.selectedIndex!==null),x=$(()=>h.value?e.selectedIndex:l.value);function _(c){var o;let v=M(g.tabs.value,y),A=M(g.panels.value,y),B=v.filter(I=>{var S;return!((S=y(I))!=null&&S.hasAttribute("disabled"))});if(c<0||c>v.length-1){let I=z(l.value===null?0:Math.sign(c-l.value),{[-1]:()=>1,0:()=>z(Math.sign(c),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),S=z(I,{0:()=>v.indexOf(B[0]),1:()=>v.indexOf(B[B.length-1])});S!==-1&&(l.value=S),g.tabs.value=v,g.panels.value=A}else{let I=v.slice(0,c),S=[...v.slice(c),...I].find(me=>B.includes(me));if(!S)return;let ee=(o=v.indexOf(S))!=null?o:g.selectedIndex.value;ee===-1&&(ee=g.selectedIndex.value),l.value=ee,g.tabs.value=v,g.panels.value=A}}let g={selectedIndex:$(()=>{var c,o;return(o=(c=l.value)!=null?c:e.defaultIndex)!=null?o:null}),orientation:$(()=>e.vertical?"vertical":"horizontal"),activation:$(()=>e.manual?"manual":"auto"),tabs:r,panels:f,setSelectedIndex(c){x.value!==c&&t("change",c),h.value||_(c)},registerTab(c){var o;if(r.value.includes(c))return;let v=r.value[l.value];r.value.push(c),r.value=M(r.value,y);let A=(o=r.value.indexOf(v))!=null?o:l.value;A!==-1&&(l.value=A)},unregisterTab(c){let o=r.value.indexOf(c);o!==-1&&r.value.splice(o,1)},registerPanel(c){f.value.includes(c)||(f.value.push(c),f.value=M(f.value,y))},unregisterPanel(c){let o=f.value.indexOf(c);o!==-1&&f.value.splice(o,1)}};ue(_e,g);let F=b({tabs:[],panels:[]}),D=b(!1);j(()=>{D.value=!0}),ue(ne,$(()=>D.value?null:F.value));let q=$(()=>e.selectedIndex);return j(()=>{be([q],()=>{var c;return _((c=e.selectedIndex)!=null?c:e.defaultIndex)},{immediate:!0})}),he(()=>{if(!h.value||x.value==null||g.tabs.value.length<=0)return;let c=M(g.tabs.value,y);c.some((o,v)=>y(g.tabs.value[v])!==y(o))&&g.setSelectedIndex(c.findIndex(o=>y(o)===y(g.tabs.value[x.value])))}),()=>{let c={selectedIndex:l.value};return H(L,[r.value.length<=0&&H(Ae,{onFocus:()=>{for(let o of r.value){let v=y(o);if((v==null?void 0:v.tabIndex)===0)return v.focus(),!0}return!1}}),K({theirProps:{...n,...xe(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:c,slots:d,attrs:n,name:"TabGroup"})])}}}),Pe=w({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:d,slots:n}){let t=Z("TabList");return()=>{let s={selectedIndex:t.selectedIndex.value},l={role:"tablist","aria-orientation":t.orientation.value};return K({ourProps:l,theirProps:e,slot:s,attrs:d,slots:n,name:"TabList"})}}}),ce=w({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${ve()}`}},setup(e,{attrs:d,slots:n,expose:t}){let s=Z("Tab"),l=b(null);t({el:l,$el:l}),j(()=>s.registerTab(l)),fe(()=>s.unregisterTab(l));let r=te(ne),f=$(()=>{if(r.value){let o=r.value.tabs.indexOf(e.id);return o===-1?r.value.tabs.push(e.id)-1:o}return-1}),h=$(()=>{let o=s.tabs.value.indexOf(l);return o===-1?f.value:o}),x=$(()=>h.value===s.selectedIndex.value);function _(o){var v;let A=o();if(A===W.Success&&s.activation.value==="auto"){let B=(v=we(l))==null?void 0:v.activeElement,I=s.tabs.value.findIndex(S=>y(S)===B);I!==-1&&s.setSelectedIndex(I)}return A}function g(o){let v=s.tabs.value.map(A=>y(A)).filter(Boolean);if(o.key===T.Space||o.key===T.Enter){o.preventDefault(),o.stopPropagation(),s.setSelectedIndex(h.value);return}switch(o.key){case T.Home:case T.PageUp:return o.preventDefault(),o.stopPropagation(),_(()=>G(v,P.First));case T.End:case T.PageDown:return o.preventDefault(),o.stopPropagation(),_(()=>G(v,P.Last))}if(_(()=>z(s.orientation.value,{vertical(){return o.key===T.ArrowUp?G(v,P.Previous|P.WrapAround):o.key===T.ArrowDown?G(v,P.Next|P.WrapAround):W.Error},horizontal(){return o.key===T.ArrowLeft?G(v,P.Previous|P.WrapAround):o.key===T.ArrowRight?G(v,P.Next|P.WrapAround):W.Error}}))===W.Success)return o.preventDefault()}let F=b(!1);function D(){var o;F.value||(F.value=!0,!e.disabled&&((o=y(l))==null||o.focus({preventScroll:!0}),s.setSelectedIndex(h.value),ye(()=>{F.value=!1})))}function q(o){o.preventDefault()}let c=ge($(()=>({as:e.as,type:d.type})),l);return()=>{var o;let v={selected:x.value},{id:A,...B}=e,I={ref:l,onKeydown:g,onMousedown:q,onClick:D,id:A,role:"tab",type:c.value,"aria-controls":(o=y(s.panels.value[h.value]))==null?void 0:o.id,"aria-selected":x.value,tabIndex:x.value?0:-1,disabled:e.disabled?!0:void 0};return K({ourProps:I,theirProps:B,slot:v,attrs:d,slots:n,name:"Tab"})}}}),J=w({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${ve()}`},tabIndex:{type:Number,default:0}},setup(e,{attrs:d,slots:n,expose:t}){let s=Z("TabPanel"),l=b(null);t({el:l,$el:l}),j(()=>s.registerPanel(l)),fe(()=>s.unregisterPanel(l));let r=te(ne),f=$(()=>{if(r.value){let _=r.value.panels.indexOf(e.id);return _===-1?r.value.panels.push(e.id)-1:_}return-1}),h=$(()=>{let _=s.panels.value.indexOf(l);return _===-1?f.value:_}),x=$(()=>h.value===s.selectedIndex.value);return()=>{var _;let g={selected:x.value},{id:F,tabIndex:D,...q}=e,c={ref:l,id:F,role:"tabpanel","aria-labelledby":(_=y(s.tabs.value[h.value]))==null?void 0:_.id,tabIndex:x.value?D:-1};return!x.value&&e.unmount&&!e.static?H(ie,{as:"span",...c}):K({ourProps:c,theirProps:q,slot:g,attrs:d,slots:n,features:re.Static|re.RenderStrategy,visible:x.value,name:"TabPanel"})}}});const je={key:0,class:"grid grid-flow-col gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},Le={key:1},Ee={key:2},Oe=a("div",null,"No ads found",-1),Be=[Oe],Ne=w({__name:"SellerContentComponent",setup(e){const{user:d}=E(N()),{modals:n}=E(se()),t=b([]),s=b(!1),l=async()=>{s.value=!0,t.value=await V("ads","uid","==",d.value.uid,["createdAt","desc"],10),console.log("ads",t.value),s.value=!1};j(async()=>{console.log("mounted"),await l()});const r=()=>{n.value.addad=!0};return(f,h)=>(u(),i(L,null,[a("button",{onClick:r,class:"mt-2 mb-2 w-full inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},"Add an ad"),t.value.docs&&t.value.docs.length>0&&!s.value?(u(),i("span",je,[(u(!0),i(L,null,R(t.value.docs,(x,_)=>(u(),O($e,{key:_,ad:x},null,8,["ad"]))),128))])):s.value?(u(),i("div",Le,[p(U,{isLoading:s.value},null,8,["isLoading"])])):(u(),i("div",Ee,Be))],64))}}),Ve={key:0,class:"grid grid-flow-col gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},Fe={key:1},Re={key:2},De=a("div",null,"No ads found",-1),Ge=[De],Ue=w({__name:"BuyerContentComponent",setup(e){const{user:d}=E(N()),{modals:n}=E(se()),t=b([]),s=b(!1),l=async()=>{s.value=!0,t.value=await V("ads","uid","==",d.value.uid,["createdAt","desc"],10),console.log("ads",t.value),s.value=!1};j(async()=>{console.log("mounted"),await l()});const r=()=>{n.value.addad=!0};return(f,h)=>(u(),i(L,null,[a("button",{onClick:r,class:"mt-2 mb-2 w-full inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},"Add an ad"),t.value.docs&&t.value.docs.length>0&&!s.value?(u(),i("span",Ve,[(u(!0),i(L,null,R(t.value.docs,(x,_)=>(u(),O(ke,{key:_,ad:x},null,8,["ad"]))),128))])):s.value?(u(),i("div",Fe,[p(U,{isLoading:s.value},null,8,["isLoading"])])):(u(),i("div",Re,Ge))],64))}}),qe={key:0,class:"grid grid-flow-row space-y-4"},Me={key:1},Je={key:2},We=a("p",null,"No bids yet",-1),Ye=[We],ze=w({__name:"BidContentComponent",setup(e){const{user:d}=E(N()),n=b([]),t=b(!1),s=async()=>{t.value=!0,n.value=await V("bids","buyerId","==",d.value.uid,["createdAt","desc"],10),t.value=!1};return j(async()=>{await s()}),(l,r)=>n.value.docs&&n.value.docs.length>0&&!t.value?(u(),i("span",qe,[(u(!0),i(L,null,R(n.value.docs,f=>(u(),O(Ce,{bid:f},null,8,["bid"]))),256))])):t.value?(u(),i("div",Me,[p(U,{isLoading:t.value},null,8,["isLoading"])])):(u(),i("span",Je,Ye))}}),He={class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4"},Ke={class:"flex flex-row space-x-4"},Qe=a("label",{class:"block text-sm font-medium text-gray-700"},"createdAt",-1),Xe={class:"text-sm"},Ze={class:"flex flex-row space-x-4"},et=a("label",{class:"block text-sm font-medium text-gray-700"},"Ad",-1),tt={class:"text-sm"},st={class:"flex flex-row space-x-4"},at=a("label",{class:"block text-sm font-medium text-gray-700"},"buyerId",-1),lt={class:"text-sm"},ot={class:"flex flex-row space-x-4"},nt=a("label",{class:"block text-sm font-medium text-gray-700"},"sellerId",-1),ut={class:"text-sm"},rt={class:"w-full flex justify-end gap-4"},dt=w({__name:"ContractCard",props:{contract:{type:Object,required:!0}},setup(e){const d=ae(),n=t=>{d.push({name:"messaging",params:{adId:t}})};return(t,s)=>(u(),i("span",He,[a("div",Ke,[Qe,a("p",Xe,k(m(le)(e.contract.createdAt)?m(oe)(e.contract.createdAt):e.contract.createdAt),1)]),a("div",Ze,[et,a("p",tt,k(e.contract.adId.substring(0,5)),1)]),a("div",st,[at,a("p",lt,k(e.contract.buyerId.substring(0,5)),1)]),a("div",ot,[nt,a("p",ut,k(e.contract.sellerId.substring(0,5)),1)]),a("div",rt,[p(X,{onClick:s[0]||(s[0]=l=>n(e.contract.adId)),classes:"w-20"},{default:C(()=>[Q("View")]),_:1})])]))}}),ct={key:0,class:"grid grid-flow-row space-y-4"},it={key:1},vt={key:2},ft=a("p",null,"No contracts yet",-1),_t=[ft],mt=w({__name:"ContractsContentComponent",setup(e){const{user:d}=E(N()),n=b([]),t=b(!1),s=async()=>{t.value=!0;const l=await V("contracts","sellerId","==",d.value.uid,["createdAt","desc"],10),r=await V("contracts","buyerId","==",d.value.uid,["createdAt","desc"],10);n.value.docs=[...l.docs,...r.docs],n.value.lastVisible=[l.lastVisible,r.lastVisible],t.value=!1};return j(async()=>{console.log("mounted"),await s()}),(l,r)=>n.value.docs&&n.value.docs.length>0&&!t.value?(u(),i("span",ct,[(u(!0),i(L,null,R(n.value.docs,(f,h)=>(u(),O(dt,{key:h,contract:f},null,8,["contract"]))),128))])):t.value?(u(),i("div",it,[p(U,{isLoading:t.value},null,8,["isLoading"])])):(u(),i("span",vt,_t))}}),pt={class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4"},bt={class:"flex flex-row space-x-4"},ht=a("label",{class:"block text-sm font-medium text-gray-700"},"createdAt",-1),xt={class:"text-sm"},gt={class:"flex flex-row space-x-4"},yt=a("label",{class:"block text-sm font-medium text-gray-700"},"Ad",-1),wt={class:"text-sm"},$t={class:"flex flex-row space-x-4"},kt=a("label",{class:"block text-sm font-medium text-gray-700"},"buyerId",-1),Ct={class:"text-sm"},At={class:"flex flex-row space-x-4"},It=a("label",{class:"block text-sm font-medium text-gray-700"},"sellerId",-1),St={class:"text-sm"},Tt={class:"w-full flex justify-end gap-4"},Pt=w({__name:"ChatRoomCard",props:{chatroom:{type:Object,required:!0}},setup(e){const d=ae(),n=t=>{d.push({name:"messaging",params:{adId:t}})};return(t,s)=>(u(),i("span",pt,[a("div",bt,[ht,a("p",xt,k(m(le)(e.chatroom.createdAt)?m(oe)(e.chatroom.createdAt):e.chatroom.createdAt),1)]),a("div",gt,[yt,a("p",wt,k(e.chatroom.adId.substring(0,5)),1)]),a("div",$t,[kt,a("p",Ct,k(e.chatroom.buyerId.substring(0,5)),1)]),a("div",At,[It,a("p",St,k(e.chatroom.sellerId.substring(0,5)),1)]),a("div",Tt,[p(X,{onClick:s[0]||(s[0]=l=>n(e.chatroom.adId)),classes:"w-20"},{default:C(()=>[Q("View")]),_:1})])]))}}),jt={key:0,class:"grid grid-flow-row space-y-4"},Lt={key:1},Et={key:2},Ot=a("p",null,"No conversations yet",-1),Bt=[Ot],Nt=w({__name:"ChatRoomsContentComponent",setup(e){const{user:d}=E(N()),n=b([]),t=b(!1),s=async()=>{t.value=!0;const l=await V("chatrooms","sellerId","==",d.value.uid,["createdAt","desc"],10),r=await V("chatrooms","buyerId","==",d.value.uid,["createdAt","desc"],10);n.value.docs=[...l.docs,...r.docs],n.value.lastVisible=[l.lastVisible,r.lastVisible],t.value=!1};return j(async()=>{await s()}),(l,r)=>n.value.docs&&n.value.docs.length>0&&!t.value?(u(),i("span",jt,[(u(!0),i(L,null,R(n.value.docs,(f,h)=>(u(),O(Pt,{key:h,chatroom:f},null,8,["chatroom"]))),128))])):t.value?(u(),i("div",Lt,[p(U,{isLoading:t.value},null,8,["isLoading"])])):(u(),i("span",Et,Bt))}}),Vt={class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4"},Ft={class:"flex flex-row space-x-4"},Rt=a("label",{class:"block text-sm font-medium text-gray-700"},"createdAt",-1),Dt={class:"text-sm"},Gt={class:"flex flex-row space-x-4"},Ut=a("label",{class:"block text-sm font-medium text-gray-700"},"title",-1),qt={class:"text-sm"},Mt={class:"flex flex-row space-x-4"},Jt=a("label",{class:"block text-sm font-medium text-gray-700"},"description",-1),Wt={class:"text-sm"},Yt={class:"flex flex-row space-x-4"},zt=a("label",{class:"block text-sm font-medium text-gray-700"},"location",-1),Ht={class:"text-sm"},Kt={class:"flex flex-row space-x-4"},Qt=a("label",{class:"block text-sm font-medium text-gray-700"},"salary",-1),Xt={class:"text-sm"},Zt={class:"w-full flex justify-end gap-4"},es=w({__name:"JobCard",props:{job:{type:Object,required:!0}},setup(e){const d=ae(),n=t=>{d.push({name:"job",params:{jobId:t}})};return(t,s)=>(u(),i("span",Vt,[a("div",Ft,[Rt,a("p",Dt,k(m(le)(e.job.createdAt)?m(oe)(e.job.createdAt):e.job.createdAt),1)]),a("div",Gt,[Ut,a("p",qt,k(e.job.title),1)]),a("div",Mt,[Jt,a("p",Wt,k(e.job.description),1)]),a("div",Yt,[zt,a("p",Ht,k(e.job.location),1)]),a("div",Kt,[Qt,a("p",Xt,k(e.job.salary),1)]),a("div",Zt,[p(X,{onClick:s[0]||(s[0]=l=>n(e.job.id)),classes:"w-20"},{default:C(()=>[Q("View")]),_:1})])]))}}),ts={key:0,class:"grid grid-flow-row space-y-4"},ss={key:1},as=a("p",null,"No job posts",-1),ls=[as],os={key:2},ns=w({__name:"JobsContentComponent",setup(e){const{user:d}=E(N()),{modals:n}=E(se()),t=b([]),s=b(!1),l=async()=>{s.value=!0,t.value=await V("jobs","posterId","==",d.value.uid,["createdAt","desc"],10),s.value=!1},r=()=>{n.value.addjob=!0};return j(async()=>{await l()}),(f,h)=>(u(),i("span",null,[p(X,{classes:"w-full",onClick:r},{default:C(()=>[Q(" Create a job post ")]),_:1}),t.value.docs&&t.value.docs.length>0&&!s.value?(u(),i("span",ts,[(u(!0),i(L,null,R(t.value.docs,(x,_)=>(u(),O(es,{key:_,job:x},null,8,["job"]))),128))])):t.value.docs&&t.value.docs.length==0&&!s.value?(u(),i("span",ss,ls)):(u(),i("div",os,[p(U,{isLoading:s.value},null,8,["isLoading"])]))]))}}),us={class:"w-full px-2 py-3 sm:px-0"},rs={key:0,class:"w-full"},_s=w({__name:"UserBoardView",setup(e){const{profile:d}=E(N()),n=N().ACCOUNT_TYPES,t=b(0),s={ADS:"Ads",CONTRACTS:"Contracts",MESSAGES:"Messages",JOBS:"Job posts"};return(l,r)=>(u(),i("div",us,[m(d)?(u(),i("div",rs,[p(m(Te),{class:"w-full",as:"div"},{default:C(()=>[p(m(Pe),{class:"w-full flex space-x-1 rounded-xl bg-blue-900/20 p-1"},{default:C(()=>[(u(),i(L,null,R(s,(f,h,x)=>p(m(ce),{as:"template",key:h,onClick:_=>t.value=x},{default:C(({selected:_})=>[a("button",{class:de(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700","ring-white/60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",_?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},k(f),3)]),_:2},1032,["onClick"])),64)),m(d).accountType===m(n).BUYER?(u(),O(m(ce),{key:0,as:"template",onClick:r[0]||(r[0]=f=>t.value=4)},{default:C(({selected:f})=>[a("button",{class:de(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700","ring-white/60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",f?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])}," Bids ",2)]),_:1})):Y("",!0)]),_:1}),p(m(J),null,{default:C(()=>[m(d).accountType==m(n).SELLER?(u(),O(Ne,{key:0})):Y("",!0),m(d).accountType==m(n).BUYER?(u(),O(Ue,{key:1})):Y("",!0)]),_:1}),p(m(J),null,{default:C(()=>[p(mt)]),_:1}),p(m(J),null,{default:C(()=>[p(Nt)]),_:1}),p(m(J),null,{default:C(()=>[p(ns)]),_:1}),p(m(J),null,{default:C(()=>[p(ze)]),_:1})]),_:1})])):Y("",!0)]))}});export{_s as default};
