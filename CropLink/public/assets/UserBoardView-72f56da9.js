import{d as I,h,Q as se,R as $e,S as pe,T as k,U as q,V as ie,o as O,W as ke,X as Ie,Y as w,Z as ae,$ as Ce,F as N,a0 as me,a1 as _e,a2 as ue,a3 as Ae,a4 as ce,a5 as te,a6 as T,a7 as ee,a8 as Se,a9 as je,aa as J,ab as P,s as F,a as R,x as re,c as le,e as r,f,g as d,k as U,q as B,l as g,L as Z,z as Y,K as z,M as H,N as K,O as Q,B as X,p as E,G as Te,u as ge,t as L,y,ac as xe,P as he,m as $,i as G,_ as W,n as ve,ad as fe,ae as Pe}from"./index-ec34b6e8.js";import{_ as Le,a as Be}from"./BuyerAdCard.vue_vue_type_script_setup_true_lang-6ec80fd3.js";import{_ as Ee}from"./BidCard.vue_vue_type_script_setup_true_lang-bbbe3f8b.js";import"./ImageCarousel-5f240b38.js";let Oe=I({props:{onFocus:{type:Function,required:!0}},setup(e){let v=h(!0);return()=>v.value?se(pe,{as:"button",type:"button",features:$e.Focusable,onFocus(n){n.preventDefault();let t,s=50;function a(){var i;if(s--<=0){t&&cancelAnimationFrame(t);return}if((i=e.onFocus)!=null&&i.call(e)){v.value=!1,cancelAnimationFrame(t);return}t=requestAnimationFrame(a)}t=requestAnimationFrame(a)}}):null}});var Ne=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ne||{}),Fe=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(Fe||{});let ye=Symbol("TabsContext");function ne(e){let v=ue(ye,null);if(v===null){let n=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ne),n}return v}let de=Symbol("TabsSSRContext"),Re=I({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:v,attrs:n,emit:t}){var s;let a=h((s=e.selectedIndex)!=null?s:e.defaultIndex),i=h([]),b=h([]),_=k(()=>e.selectedIndex!==null),m=k(()=>_.value?e.selectedIndex:a.value);function u(c){var l;let p=q(o.tabs.value,w),C=q(o.panels.value,w),V=p.filter(S=>{var j;return!((j=w(S))!=null&&j.hasAttribute("disabled"))});if(c<0||c>p.length-1){let S=te(a.value===null?0:Math.sign(c-a.value),{[-1]:()=>1,0:()=>te(Math.sign(c),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),j=te(S,{0:()=>p.indexOf(V[0]),1:()=>p.indexOf(V[V.length-1])});j!==-1&&(a.value=j),o.tabs.value=p,o.panels.value=C}else{let S=p.slice(0,c),j=[...p.slice(c),...S].find(we=>V.includes(we));if(!j)return;let oe=(l=p.indexOf(j))!=null?l:o.selectedIndex.value;oe===-1&&(oe=o.selectedIndex.value),a.value=oe,o.tabs.value=p,o.panels.value=C}}let o={selectedIndex:k(()=>{var c,l;return(l=(c=a.value)!=null?c:e.defaultIndex)!=null?l:null}),orientation:k(()=>e.vertical?"vertical":"horizontal"),activation:k(()=>e.manual?"manual":"auto"),tabs:i,panels:b,setSelectedIndex(c){m.value!==c&&t("change",c),_.value||u(c)},registerTab(c){var l;if(i.value.includes(c))return;let p=i.value[a.value];i.value.push(c),i.value=q(i.value,w);let C=(l=i.value.indexOf(p))!=null?l:a.value;C!==-1&&(a.value=C)},unregisterTab(c){let l=i.value.indexOf(c);l!==-1&&i.value.splice(l,1)},registerPanel(c){b.value.includes(c)||(b.value.push(c),b.value=q(b.value,w))},unregisterPanel(c){let l=b.value.indexOf(c);l!==-1&&b.value.splice(l,1)}};ie(ye,o);let x=h({tabs:[],panels:[]}),A=h(!1);O(()=>{A.value=!0}),ie(de,k(()=>A.value?null:x.value));let D=k(()=>e.selectedIndex);return O(()=>{ke([D],()=>{var c;return u((c=e.selectedIndex)!=null?c:e.defaultIndex)},{immediate:!0})}),Ie(()=>{if(!_.value||m.value==null||o.tabs.value.length<=0)return;let c=q(o.tabs.value,w);c.some((l,p)=>w(o.tabs.value[p])!==w(l))&&o.setSelectedIndex(c.findIndex(l=>w(l)===w(o.tabs.value[m.value])))}),()=>{let c={selectedIndex:a.value};return se(N,[i.value.length<=0&&se(Oe,{onFocus:()=>{for(let l of i.value){let p=w(l);if((p==null?void 0:p.tabIndex)===0)return p.focus(),!0}return!1}}),ae({theirProps:{...n,...Ce(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:c,slots:v,attrs:n,name:"TabGroup"})])}}}),Ve=I({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:v,slots:n}){let t=ne("TabList");return()=>{let s={selectedIndex:t.selectedIndex.value},a={role:"tablist","aria-orientation":t.orientation.value};return ae({ourProps:a,theirProps:e,slot:s,attrs:v,slots:n,name:"TabList"})}}}),be=I({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${me()}`}},setup(e,{attrs:v,slots:n,expose:t}){let s=ne("Tab"),a=h(null);t({el:a,$el:a}),O(()=>s.registerTab(a)),_e(()=>s.unregisterTab(a));let i=ue(de),b=k(()=>{if(i.value){let l=i.value.tabs.indexOf(e.id);return l===-1?i.value.tabs.push(e.id)-1:l}return-1}),_=k(()=>{let l=s.tabs.value.indexOf(a);return l===-1?b.value:l}),m=k(()=>_.value===s.selectedIndex.value);function u(l){var p;let C=l();if(C===ee.Success&&s.activation.value==="auto"){let V=(p=je(a))==null?void 0:p.activeElement,S=s.tabs.value.findIndex(j=>w(j)===V);S!==-1&&s.setSelectedIndex(S)}return C}function o(l){let p=s.tabs.value.map(C=>w(C)).filter(Boolean);if(l.key===T.Space||l.key===T.Enter){l.preventDefault(),l.stopPropagation(),s.setSelectedIndex(_.value);return}switch(l.key){case T.Home:case T.PageUp:return l.preventDefault(),l.stopPropagation(),u(()=>J(p,P.First));case T.End:case T.PageDown:return l.preventDefault(),l.stopPropagation(),u(()=>J(p,P.Last))}if(u(()=>te(s.orientation.value,{vertical(){return l.key===T.ArrowUp?J(p,P.Previous|P.WrapAround):l.key===T.ArrowDown?J(p,P.Next|P.WrapAround):ee.Error},horizontal(){return l.key===T.ArrowLeft?J(p,P.Previous|P.WrapAround):l.key===T.ArrowRight?J(p,P.Next|P.WrapAround):ee.Error}}))===ee.Success)return l.preventDefault()}let x=h(!1);function A(){var l;x.value||(x.value=!0,!e.disabled&&((l=w(a))==null||l.focus({preventScroll:!0}),s.setSelectedIndex(_.value),Se(()=>{x.value=!1})))}function D(l){l.preventDefault()}let c=Ae(k(()=>({as:e.as,type:v.type})),a);return()=>{var l;let p={selected:m.value},{id:C,...V}=e,S={ref:a,onKeydown:o,onMousedown:D,onClick:A,id:C,role:"tab",type:c.value,"aria-controls":(l=w(s.panels.value[_.value]))==null?void 0:l.id,"aria-selected":m.value,tabIndex:m.value?0:-1,disabled:e.disabled?!0:void 0};return ae({ourProps:S,theirProps:V,slot:p,attrs:v,slots:n,name:"Tab"})}}}),M=I({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${me()}`},tabIndex:{type:Number,default:0}},setup(e,{attrs:v,slots:n,expose:t}){let s=ne("TabPanel"),a=h(null);t({el:a,$el:a}),O(()=>s.registerPanel(a)),_e(()=>s.unregisterPanel(a));let i=ue(de),b=k(()=>{if(i.value){let u=i.value.panels.indexOf(e.id);return u===-1?i.value.panels.push(e.id)-1:u}return-1}),_=k(()=>{let u=s.panels.value.indexOf(a);return u===-1?b.value:u}),m=k(()=>_.value===s.selectedIndex.value);return()=>{var u;let o={selected:m.value},{id:x,tabIndex:A,...D}=e,c={ref:a,id:x,role:"tabpanel","aria-labelledby":(u=w(s.tabs.value[_.value]))==null?void 0:u.id,tabIndex:m.value?A:-1};return!m.value&&e.unmount&&!e.static?se(pe,{as:"span",...c}):ae({ourProps:c,theirProps:D,slot:o,attrs:v,slots:n,features:ce.Static|ce.RenderStrategy,visible:m.value,name:"TabPanel"})}}});const De={key:0,class:"grid grid-flow-col gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},Ge={key:1},Je=d("div",null,"No ads found",-1),Ue=[Je],qe={key:2},Me=I({__name:"SellerContentComponent",setup(e){const{user:v}=F(R()),{modals:n}=F(re()),t=h([]),s=h(!1);let a;const i=async()=>{s.value=!0,a=Y(z(Q(X,"ads"),K("uid","==",v.value.uid),H("createdAt","desc")),_=>{t.value.docs=_.docs.map(m=>({...m.data()})),t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:null}),s.value=!1};O(async()=>{await i()}),le(()=>{a&&a()});const b=()=>{n.value.addad=!0};return(_,m)=>(r(),f(N,null,[d("button",{onClick:b,class:"mt-2 mb-2 w-full inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},"Add an ad"),t.value.docs&&t.value.docs.length>0&&!s.value?(r(),f("span",De,[(r(!0),f(N,null,U(t.value.docs,(u,o)=>(r(),B(Le,{key:o,ad:u},null,8,["ad"]))),128))])):t.value.docs&&t.value.docs.length==0&&!s.value?(r(),f("div",Ge,Ue)):(r(),f("div",qe,[g(Z,{isLoading:s.value},null,8,["isLoading"])]))],64))}}),We={key:0,class:"grid grid-flow-col gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},Ye={key:1},ze=d("div",null,"No ads found",-1),He=[ze],Ke={key:2},Qe=I({__name:"BuyerContentComponent",setup(e){const{user:v}=F(R()),{modals:n}=F(re()),t=h([]),s=h(!1);let a;const i=async()=>{s.value=!0,a=Y(z(Q(X,"ads"),K("uid","==",v.value.uid),H("createdAt","desc")),_=>{t.value.docs=_.docs.map(m=>({...m.data()})),t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:null}),s.value=!1};O(async()=>{await i()}),le(()=>{a&&a()});const b=()=>{n.value.addad=!0};return(_,m)=>(r(),f(N,null,[d("button",{onClick:b,class:"mt-2 mb-2 w-full inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},"Add an ad"),t.value.docs&&t.value.docs.length>0&&!s.value?(r(),f("span",We,[(r(!0),f(N,null,U(t.value.docs,(u,o)=>(r(),B(Be,{key:o,ad:u},null,8,["ad"]))),128))])):E("",!0),t.value.docs&&t.value.docs.length==0&&!s.value?(r(),f("div",Ye,He)):(r(),f("div",Ke,[g(Z,{isLoading:s.value},null,8,["isLoading"])]))],64))}}),Xe={key:0,class:"grid grid-flow-row space-y-4"},Ze={key:1},et={key:2},tt=d("p",null,"No bids yet",-1),st=[tt],at=I({__name:"BidContentComponent",setup(e){const{user:v}=F(R()),n=h([]),t=h(!1),s=async()=>{t.value=!0,n.value=await Te("bids","buyerId","==",v.value.uid,["createdAt","desc"],10),t.value=!1};return O(async()=>{await s()}),(a,i)=>n.value.docs&&n.value.docs.length>0&&!t.value?(r(),f("span",Xe,[(r(!0),f(N,null,U(n.value.docs,b=>(r(),B(Ee,{bid:b},null,8,["bid"]))),256))])):t.value?(r(),f("div",Ze,[g(Z,{isLoading:t.value},null,8,["isLoading"])])):(r(),f("span",et,st))}}),lt={class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4"},nt={class:"flex flex-row space-x-4"},ot=d("label",{class:"block text-sm font-medium text-gray-700"},"createdAt",-1),ut={class:"text-sm"},rt={class:"flex flex-row space-x-4"},dt=d("label",{class:"block text-sm font-medium text-gray-700"},"Ad",-1),it={class:"text-sm"},ct={class:"flex flex-row space-x-4"},vt=d("label",{class:"block text-sm font-medium text-gray-700"},"buyerId",-1),ft={class:"text-sm"},bt={class:"flex flex-row space-x-4"},pt=d("label",{class:"block text-sm font-medium text-gray-700"},"sellerId",-1),mt={class:"text-sm"},_t={class:"w-full flex justify-end gap-4"},gt=I({__name:"ContractCard",props:{contract:{type:Object,required:!0}},setup(e){const v=ge(),n=t=>{v.push({name:"messaging",params:{adId:t}})};return(t,s)=>(r(),f("span",lt,[d("div",nt,[ot,d("p",ut,L(y(xe)(e.contract.createdAt)?y(he)(e.contract.createdAt):e.contract.createdAt),1)]),d("div",rt,[dt,d("p",it,L(e.contract.adId.substring(0,5)),1)]),d("div",ct,[vt,d("p",ft,L(e.contract.buyerId.substring(0,5)),1)]),d("div",bt,[pt,d("p",mt,L(e.contract.sellerId.substring(0,5)),1)]),d("div",_t,[g(W,{onClick:s[0]||(s[0]=a=>n(e.contract.adId)),classes:"w-20"},{default:$(()=>[G("View")]),_:1})])]))}}),xt={key:0,class:"grid grid-flow-row space-y-4"},ht={key:1},yt=d("p",null,"No contracts yet",-1),wt=[yt],$t={key:2},kt=I({__name:"ContractsContentComponent",setup(e){const{user:v}=F(R()),n=h([]),t=h(!1);let s=null,a=null,i=[],b=[];const _=async()=>{s=Y(z(Q(X,"contracts"),K("sellerId","==",v.value.uid),H("createdAt","desc")),o=>{t.value=!0,b=o.docs.map(x=>({...x.data()})),m(),t.value=!1}),a=Y(z(Q(X,"contracts"),K("buyerId","==",v.value.uid),H("createdAt","desc")),o=>{t.value=!0,i=o.docs.map(x=>({...x.data()})),m(),t.value=!1})},m=()=>{n.value.docs=[...i,...b]},u=()=>{s&&s(),a&&a()};return O(async()=>{await _()}),le(()=>{u()}),(o,x)=>n.value.docs&&n.value.docs.length>0&&!t.value?(r(),f("span",xt,[(r(!0),f(N,null,U(n.value.docs,(A,D)=>(r(),B(gt,{key:D,contract:A},null,8,["contract"]))),128))])):n.value.docs&&n.value.docs.length==0&&!t.value?(r(),f("div",ht,wt)):(r(),f("span",$t,[g(Z,{isLoading:t.value},null,8,["isLoading"])]))}}),It={class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300 mb-4"},Ct={key:0,class:"flex flex-row space-x-4"},At=d("p",{class:"text-sm"},[d("span",{class:"text-green-500"},"LIVE")],-1),St=[At],jt={class:"flex flex-row space-x-4"},Tt=d("label",{class:"block text-sm font-medium text-gray-700"},"createdAt",-1),Pt={class:"text-sm"},Lt={class:"flex flex-row space-x-4"},Bt=d("label",{class:"block text-sm font-medium text-gray-700"},"title",-1),Et={class:"text-sm"},Ot={class:"flex flex-row space-x-4"},Nt=d("label",{class:"block text-sm font-medium text-gray-700"},"description",-1),Ft={class:"text-sm"},Rt={class:"flex flex-row space-x-4"},Vt=d("label",{class:"block text-sm font-medium text-gray-700"},"location",-1),Dt={class:"text-sm"},Gt={class:"flex flex-row space-x-4"},Jt=d("label",{class:"block text-sm font-medium text-gray-700"},"salary",-1),Ut={class:"text-sm"},qt={key:1,class:"w-full flex justify-end gap-4"},Mt=I({__name:"JobCard",props:{job:{type:Object,required:!0},showButtons:{type:Boolean,default:!0}},emits:["edit","remove"],setup(e,{emit:v}){const n=v,t=ge(),s=h(!1),a=async u=>{s.value=!0,await R().postJobPostAd(u),s.value=!1},i=async u=>{s.value=!0,await R().takedownJobPostAd(u),s.value=!1},b=u=>{t.push({name:"job",params:{jobId:u}})},_=u=>{n("edit",u)},m=u=>{n("remove",u)};return(u,o)=>(r(),f("span",It,[e.job.live?(r(),f("div",Ct,St)):E("",!0),d("div",jt,[Tt,d("p",Pt,L(y(xe)(e.job.createdAt)?y(he)(e.job.createdAt):e.job.createdAt),1)]),d("div",Lt,[Bt,d("p",Et,L(e.job.title),1)]),d("div",Ot,[Nt,d("p",Ft,L(e.job.description),1)]),d("div",Rt,[Vt,d("p",Dt,L(e.job.location),1)]),d("div",Gt,[Jt,d("p",Ut,L(e.job.salary),1)]),e.showButtons?(r(),f("div",qt,[e.job.live?E("",!0):(r(),B(ve,{key:0,isLoading:s.value,onClick:o[0]||(o[0]=x=>a(e.job.jobId)),classes:"w-20"},{default:$(()=>[G("Post")]),_:1},8,["isLoading"])),e.job.live?(r(),B(ve,{key:1,isLoading:s.value,onClick:o[1]||(o[1]=x=>i(e.job.jobId)),classes:"w-20"},{default:$(()=>[G("Takedown")]),_:1},8,["isLoading"])):E("",!0),g(W,{onClick:o[2]||(o[2]=x=>m(e.job.jobId)),classes:"w-20"},{default:$(()=>[G("Remove")]),_:1}),g(W,{onClick:o[3]||(o[3]=x=>_(e.job.jobId)),classes:"w-20"},{default:$(()=>[G("Edit")]),_:1}),g(W,{onClick:o[4]||(o[4]=x=>b(e.job.jobId)),classes:"w-20"},{default:$(()=>[G("View")]),_:1})])):E("",!0)]))}}),Wt={key:0,class:"grid grid-flow-row space-y-4"},Yt={key:1},zt=d("p",null,"No job posts",-1),Ht=[zt],Kt={key:2},Qt=I({__name:"JobsContentComponent",setup(e){const{user:v}=F(R()),{modals:n}=F(re()),t=h([]),s=h(!1);let a;const i=async()=>{s.value=!0,a=Y(z(Q(X,"jobs"),K("posterId","==",v.value.uid),H("createdAt","desc")),u=>{t.value.docs=u.docs.map(o=>({...o.data()})),t.value.lastVisible=t.value.docs&&t.value.docs.length>0?t.value.docs[t.value.docs.length-1]:null}),s.value=!1},b=()=>{n.value.addjob=!0},_=u=>{n.value.confirmremove=!0,n.value.context={__key:"job",jobId:u}},m=u=>{n.value.editjob=!0;const o=t.value.docs.find(x=>x.jobId==u);n.value.context=o};return O(async()=>{await i()}),le(()=>{a&&a()}),(u,o)=>(r(),f("span",null,[g(W,{classes:"w-full",onClick:b},{default:$(()=>[G(" Create a job post ")]),_:1}),t.value.docs&&t.value.docs.length>0&&!s.value?(r(),f("span",Wt,[(r(!0),f(N,null,U(t.value.docs,(x,A)=>(r(),B(Mt,{key:A,job:x,onEdit:m,onRemove:_},null,8,["job"]))),128))])):t.value.docs&&t.value.docs.length==0&&!s.value?(r(),f("span",Yt,Ht)):(r(),f("div",Kt,[g(Z,{isLoading:s.value},null,8,["isLoading"])]))]))}}),Xt={class:"w-full px-2 py-3 sm:px-0"},Zt={key:0,class:"w-full"},ls=I({__name:"UserBoardView",setup(e){const{profile:v}=F(R()),n=R().ACCOUNT_TYPES,t=h(0),s={ADS:"Ads",CONTRACTS:"Contracts",MESSAGES:"Messages",JOBS:"Job posts"};return(a,i)=>(r(),f("div",Xt,[y(v)?(r(),f("div",Zt,[g(y(Re),{class:"w-full",as:"div"},{default:$(()=>[g(y(Ve),{class:"w-full flex space-x-1 rounded-xl bg-blue-900/20 p-1"},{default:$(()=>[(r(),f(N,null,U(s,(b,_,m)=>g(y(be),{as:"template",key:_,onClick:u=>t.value=m},{default:$(({selected:u})=>[d("button",{class:fe(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700","ring-white/60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",u?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},L(b),3)]),_:2},1032,["onClick"])),64)),y(v).accountType===y(n).BUYER?(r(),B(y(be),{key:0,as:"template",onClick:i[0]||(i[0]=b=>t.value=4)},{default:$(({selected:b})=>[d("button",{class:fe(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700","ring-white/60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",b?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])}," Bids ",2)]),_:1})):E("",!0)]),_:1}),g(y(M),null,{default:$(()=>[y(v).accountType==y(n).SELLER?(r(),B(Me,{key:0})):E("",!0),y(v).accountType==y(n).BUYER?(r(),B(Qe,{key:1})):E("",!0)]),_:1}),g(y(M),null,{default:$(()=>[g(kt)]),_:1}),g(y(M),null,{default:$(()=>[g(Pe)]),_:1}),g(y(M),null,{default:$(()=>[g(Qt)]),_:1}),g(y(M),null,{default:$(()=>[g(at)]),_:1})]),_:1})])):E("",!0)]))}});export{ls as default};
