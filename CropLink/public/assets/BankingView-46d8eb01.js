import{_ as w}from"./SellerAdCard.vue_vue_type_script_setup_true_lang-efd7b29b.js";import{d as h,r as i,e as o,f as n,k as e,t,F as $,m as I,p as f,L as b,C as k,aP as S,s as T,n as v,o as y,q as B,x as C,z as L,j as N,c as F,B as m,a5 as q,$ as j}from"./index-6a45da86.js";import"./ImageCarousel-cfb1ab57.js";import"./CheckCircleIcon-e1fc4ba4.js";const P={class:"flex min-h-full items-center"},E={key:0},O={class:"flex flex-col gap-2 justify-start items-start border rounded-md"},A={class:"px-5 pt-5 text-left"},D={class:"text-xl font-bold"},R={class:"text-md"},V={class:"w-full border-t-2 max-h-64 overflow-y-scroll"},G={class:"text-md text-left p-5"},M={class:"w-full flex flex-col gap-2 justify-start items-start px-5 pb-5"},z=e("label",{class:"text-lg font-semibold border-b pb-2"},"Milestones:",-1),Y={class:"w-full p-2 border rounded-md resize-none focus:border-blue-500 focus:ring-0 flex flex-col gap-2"},U={class:"flex flex-row justify-between"},H={class:"flex flex-row items-center gap-2"},J={class:"font-bold text-xl"},K={class:"italic text-xl"},Q={class:"flex flex-row gap-4"},W={key:1},X=h({__name:"GigDetailCard",props:{gig:{type:Object,required:!0}},setup(l){const c=i(!1);return(_,d)=>(o(),n("div",P,[l.gig&&!c.value?(o(),n("div",E,[e("div",O,[e("span",A,[e("h1",D,t(l.gig.title),1),e("p",R,t(l.gig.location),1)]),e("div",V,[e("p",G,t(l.gig.description),1)]),e("div",M,[z,(o(!0),n($,null,I(l.gig.milestones,(s,a)=>(o(),n("span",Y,[e("span",U,[e("span",H,[e("p",J,t(a+1+"."),1),e("p",K,t(s.name),1)]),e("span",Q,[f(k(S),{class:"h-6 w-6"}),e("p",null,t(s.price),1)])]),e("p",null,t(s.description.substring(0,300)+"..."),1)]))),256))])])])):(o(),n("div",W,[f(b,{isLoading:c.value},null,8,["isLoading"])]))]))}}),Z={class:"sticky top-0"},ee={key:0,class:"border rounded-md p-4 flex flex-col gap-4"},se={class:"flex flex-row justify-between gap-4"},te=e("label",null,"Escrow Transaction:",-1),oe={class:"font-bold"},ae={class:"ml-2 flex flex-col"},le={class:"flex flex row gap-4"},ne=e("label",{class:"font-bold"},"Amount:",-1),ce={class:"flex flex row gap-4"},ie=e("label",{class:"font-bold"},"Seller:",-1),de={class:"flex flex row gap-4"},re=e("label",{class:"font-bold"},"Buyer:",-1),ue={class:"flex flex-col gap-4 p-2"},_e=e("label",{class:"font-bold"},"Payment status:",-1),fe={class:"flex flex-row gap-4 justify-between"},pe={class:"flex flex-col"},ge=e("label",null,"Sent",-1),he={class:"flex flex-col"},xe=e("label",null,"Recieved",-1),ve={class:"flex flex-col"},me=e("label",null,"Secured",-1),be={class:"flex flex-col"},ye=e("label",null,"Disbursed",-1),we={key:1},$e=h({__name:"BankingComponent",props:{contractId:{type:String,required:!0},transactionId:{type:String,required:!1}},setup(l){const{notifications:c}=T(v()),_=v().NOTIFICATION_TYPES,d=l,s=i({}),a=i(!1),r=i({}),p=async()=>{if(!d.contractId)return console.error("No contract id provided");const{callFunction:g}=L("getTransaction",{transactionId:d.contractId},a,void 0,u=>{if(!u||!u.data.transaction)return console.error("No transaction found");s.value=u.data.transaction,r.value=u.data.landingPage},()=>{},u=>{c.value.show=!0,c.value.type=_.ERROR,c.value.message="Error while fetching transaction, please try again later"});await g()},x=()=>{if(!r.value)return console.error("No landing page found");window.open(r.value,"_blank")};return y(async()=>{await p()}),(g,u)=>(o(),n("div",Z,[s.value.id?(o(),n("div",ee,[e("div",se,[te,e("p",oe,t(s.value.id)+"#",1)]),e("p",null,t(s.value.description),1),e("div",ae,[e("div",le,[ne,e("p",null,t(s.value.items[0].schedule[0].amount),1)]),e("div",ce,[ie,e("p",null,t(s.value.items[0].schedule[0].beneficiary_customer),1)]),e("div",de,[re,e("p",null,t(s.value.items[0].schedule[0].payer_customer),1)]),e("div",ue,[_e,e("div",fe,[e("div",pe,[ge,e("p",null,t(s.value.items[0].schedule[0].status.payment_sent),1)]),e("div",he,[xe,e("p",null,t(s.value.items[0].schedule[0].status.payment_sent),1)]),e("div",ve,[me,e("p",null,t(s.value.items[0].schedule[0].status.secured),1)]),e("div",be,[ye,e("p",null,t(s.value.items[0].schedule[0].status.disbursed_to_beneficiary),1)])])])])])):(o(),n("div",we,[f(b,{isLoading:a.value},null,8,["isLoading"])])),f(C,{onClick:x,classes:"w-full"},{default:B(()=>[N("View")]),_:1})]))}}),Ie={class:"grid grid-cols-2 gap-x-4 p-5"},ke={key:2},Se=e("p",null," Failed to load ad ",-1),Te=[Se],Fe=h({__name:"BankingView",props:{adId:{type:String,required:!0},contractId:{type:String,required:!0},transactionId:{type:String,required:!0}},setup(l){const c=l,_=i({}),d=i(!1),s=async()=>{d.value=!0,_.value=await q("ads",c.adId),d.value=!1},a=i({}),r=i(!1),p=async()=>{r.value=!0,a.value=await j("contracts",c.contractId),r.value=!1};return y(async()=>{await s(),await p()}),F(()=>{}),(x,g)=>(o(),n("div",Ie,[a.value&&a.value.type=="sell"?(o(),m(w,{key:0,ad:_.value,showButtons:!1},null,8,["ad"])):a.value&&a.value.type=="gig"?(o(),m(X,{key:1,gig:a.value.context,showButtons:!1},null,8,["gig"])):(o(),n("div",ke,Te)),f($e,{contractId:l.contractId},null,8,["contractId"])]))}});export{Fe as default};
