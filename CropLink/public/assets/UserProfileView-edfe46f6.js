import{d as Y,s as R,m as A,r as y,e as r,f,j as e,w as d,v as m,n as P,p as T,i as U,q as te,x as le,y as J,a as M,o as re,z as C,A as z,B as S,C as oe,c as Pe,D as ee,L as ae,F as I,l as O,G as se,H as ne,t as L,I as ie}from"./index-a935e8ad.js";const $e={class:"container mx-auto"},Ee={class:"w-full max-w-lg"},Ue={class:"flex flex-wrap"},Le={class:"w-full space-y-2"},Ae=e("label",{class:"block text-sm font-medium text-gray-700",for:"first-name"}," First Name ",-1),Ne={class:"w-full space-y-2"},Ve=e("label",{class:"block text-sm font-medium text-gray-700",for:"middle-name"}," Middle Name ",-1),Ie={class:"w-full space-y-2"},Oe=e("label",{class:"block text-sm font-medium text-gray-700",for:"last-name"}," Last Name ",-1),Re={class:"flex flex-row gap-2"},Te={class:"w-1/2 space-y-2"},Fe=e("label",{class:"block text-sm font-medium text-gray-700",for:"email"}," Email ",-1),je={class:"w-1/2 space-y-2"},Be=e("label",{class:"block text-sm font-medium text-gray-700",for:"phone-number"}," Phone Number ",-1),De={class:"w-full space-y-2"},Me=e("label",{class:"block text-sm font-medium text-gray-700",for:"address-line1"}," Address Line 1 ",-1),Je={class:"w-full space-y-2"},ze=e("label",{class:"block text-sm font-medium text-gray-700",for:"address-line2"}," Address Line 2 ",-1),Ye={class:"flex flex-row gap-2"},We={class:"w-1/2 space-y-2"},Ke=e("label",{class:"block text-sm font-medium text-gray-700",for:"city"}," City ",-1),He={class:"w-1/2 space-y-2"},qe=e("label",{class:"block text-sm font-medium text-gray-700",for:"state"}," State ",-1),Ge={class:"flex flex-row gap-2"},Qe={class:"w-1/2 space-y-2"},Xe=e("label",{class:"block text-sm font-medium text-gray-700",for:"country"}," Country ",-1),Ze={class:"w-1/2 space-y-2"},es=e("label",{class:"block text-sm font-medium text-gray-700",for:"post-code"}," Postal Code ",-1),ss={class:"flex flex-wrap -mx-3 mb-2"},ts={class:"w-full md:w-1/3"},ls=Y({__name:"EscrowSignupForm",emits:["success","failure","cancel"],setup(W,{emit:u}){const{notifications:p}=R(A()),v=A().NOTIFICATION_TYPES,$=u,c=y({email:"",first_name:"",middle_name:"",last_name:"",address:{line1:"",line2:"",city:"",state:"",country:"",post_code:""},phone_number:""}),n=y(!1),h=()=>{c.value={email:"test@test.com",first_name:"John",middle_name:"Kane",last_name:"Smith",address:{line1:"1829 West Lane",line2:"Apartment 301020",city:"San Francisco",state:"CA",country:"US",post_code:"10203"},phone_number:"+18885118600"}},w=async()=>{const g=JSON.parse(JSON.stringify(c.value));let i;const{callFunction:a}=J("createEscrowAccount",g,n,void 0,b=>{i=b},()=>{p.value.show=!0,p.value.type=v.SUCCESS,p.value.message="Escrow account created successfully"},b=>{p.value.show=!0,p.value.type=v.ERROR,p.value.message="Error while creating escrow account, please try again later"});await a(),$(i?"success":"failure")};return(g,i)=>(r(),f("div",$e,[e("span",Ee,[e("div",Ue,[e("div",Le,[Ae,d(e("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>c.value.first_name=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"first-name",type:"text",placeholder:"John"},null,512),[[m,c.value.first_name]])]),e("div",Ne,[Ve,d(e("input",{"onUpdate:modelValue":i[1]||(i[1]=a=>c.value.middle_name=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"middle-name",type:"text",placeholder:"Kane"},null,512),[[m,c.value.middle_name]])]),e("div",Ie,[Oe,d(e("input",{"onUpdate:modelValue":i[2]||(i[2]=a=>c.value.last_name=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"last-name",type:"text",placeholder:"Smith"},null,512),[[m,c.value.last_name]])])]),e("div",Re,[e("div",Te,[Fe,d(e("input",{"onUpdate:modelValue":i[3]||(i[3]=a=>c.value.email=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"email",type:"email",placeholder:"john@test.escrow.com"},null,512),[[m,c.value.email]])]),e("div",je,[Be,d(e("input",{"onUpdate:modelValue":i[4]||(i[4]=a=>c.value.phone_number=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"phone-number",type:"text",placeholder:"+18885118600"},null,512),[[m,c.value.phone_number]])])]),e("div",De,[Me,d(e("input",{"onUpdate:modelValue":i[5]||(i[5]=a=>c.value.address.line1=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"address-line1",type:"text",placeholder:"1829 West Lane"},null,512),[[m,c.value.address.line1]])]),e("div",Je,[ze,d(e("input",{"onUpdate:modelValue":i[6]||(i[6]=a=>c.value.address.line2=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"address-line2",type:"text",placeholder:"Apartment 301020"},null,512),[[m,c.value.address.line2]])]),e("div",Ye,[e("div",We,[Ke,d(e("input",{"onUpdate:modelValue":i[7]||(i[7]=a=>c.value.address.city=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"city",type:"text",placeholder:"San Francisco"},null,512),[[m,c.value.address.city]])]),e("div",He,[qe,d(e("input",{"onUpdate:modelValue":i[8]||(i[8]=a=>c.value.address.state=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"state",type:"text",placeholder:"CA"},null,512),[[m,c.value.address.state]])])]),e("div",Ge,[e("div",Qe,[Xe,d(e("input",{"onUpdate:modelValue":i[9]||(i[9]=a=>c.value.address.country=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"country",type:"text",placeholder:"US"},null,512),[[m,c.value.address.country]])]),e("div",Ze,[es,d(e("input",{"onUpdate:modelValue":i[10]||(i[10]=a=>c.value.address.post_code=a),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"post-code",type:"text",placeholder:"10203"},null,512),[[m,c.value.address.post_code]])])]),e("div",ss,[P(te,{onClick:h},{default:T(()=>[U(" Dev Fill Form ")]),_:1}),e("div",ts,[P(le,{isLoading:n.value,onClick:w},{default:T(()=>[U(" Submit ")]),_:1},8,["isLoading"]),e("button",{onClick:i[11]||(i[11]=a=>g.$emit("cancel"))}," Cancel ")])])])]))}}),os={class:"container mx-auto"},as={class:"w-full space-y-4"},ns={class:"flex flex-wrap"},is={class:"w-full space-y-2"},rs=e("label",{class:"block text-sm font-medium text-gray-700",for:"email"}," Escrow Email ",-1),us=["disabled"],cs={class:"flex flex-wrap"},ds={class:"w-full space-y-2"},ms=e("label",{class:"block text-sm font-medium text-gray-700",for:"api-key"}," Escrow Api Key ",-1),ps=["disabled"],fs={class:"w-full flex justify-between"},vs={key:0},gs={key:1},ys=Y({__name:"EscrowLinkForm",emits:["success","failure"],setup(W,{emit:u}){const{notifications:p}=R(A()),v=A().NOTIFICATION_TYPES,{profile:$}=R(M()),c=u,n=y({email:"",apiKey:""}),h=y(!1),w=async()=>{const i=JSON.parse(JSON.stringify(n.value));let a;const{callFunction:b}=J("linkEscrowAccount",i,h,void 0,K=>{a=K},()=>{p.value.show=!0,p.value.type=v.SUCCESS,p.value.message="Escrow Account Linked"},()=>{p.value.show=!0,p.value.type=v.ERROR,p.value.message="An error occured during the process, please try again later"});await b(),c(a?"success":"failure")},g=y(!0);return re(()=>{var i,a,b;(i=$.value)!=null&&i.escrowAuth&&(g.value=!1,n.value={email:(a=$.value)==null?void 0:a.escrowAuth.email,apiKey:(b=$.value)==null?void 0:b.escrowAuth.apiKey})}),(i,a)=>(r(),f("div",os,[e("span",as,[e("div",ns,[e("div",is,[rs,d(e("input",{"onUpdate:modelValue":a[0]||(a[0]=b=>n.value.email=b),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"email",type:"email",placeholder:"example@example.com",disabled:!g.value},null,8,us),[[m,n.value.email]])])]),e("div",cs,[e("div",ds,[ms,d(e("input",{"onUpdate:modelValue":a[1]||(a[1]=b=>n.value.apiKey=b),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full",id:"api-key",type:"secret",placeholder:"1a2w3E4a5x6E7AD89",disabled:!g.value},null,8,ps),[[m,n.value.apiKey]])])]),e("div",fs,[P(te,{onClick:a[2]||(a[2]=()=>g.value=!g.value)},{default:T(()=>[g.value?C("",!0):(r(),f("span",vs,"Edit")),g.value?(r(),f("span",gs,"Cancel")):C("",!0)]),_:1}),g.value?(r(),z(le,{key:0,isLoading:h.value,onClick:w},{default:T(()=>[U(" Submit ")]),_:1},8,["isLoading"])):C("",!0)])])]))}}),bs={class:"flex flex-col gap-2 sm:grid sm:grid-cols-2 sm:gap-x-4 p-2 sm:p-4"},_s=e("div",null,[e("h1",{class:"text-2xl font-semibold mb-2 capitalize"},"Escrow Account Details"),e("p",{class:"text-md mb-2 italic w-64"}," In order to sell crops on CropLink, you must have an escrow account to hold the buyers money until the transaction is complete. You can either link an existing escrow account or create a new one. ")],-1),xs={key:0},hs=e("p",{class:"text-lg italic mb-2"},"Link an Existing Escrow Account",-1),ws=e("p",{class:"text-xs"}," If you already have an escrow account, you can link it to your CropLink account by entering your escrow email and api key below. ",-1),ks=e("p",{class:"text-xs font-bold mt-2 mb-4"},[U("For more info visit "),e("a",{href:"https://escrow.com",target:"_blank"},"escrow.com")],-1),Cs=e("p",{class:"text-lg italic mb-4"},"Create an Escrow Account",-1),Ss=e("p",{class:"text-xs"}," If you do not have an escrow account, you can create one by clicking the button below. ",-1),Ps={class:"flex justify-end pb-8 sm:pb-0"},$s=Y({__name:"EscrowAccountComponent",setup(W){const{notifications:u}=R(A()),p=A().NOTIFICATION_TYPES,v=y(!1),$=y(!1),c=()=>{v.value=!v.value,v.value&&($.value=!1)},n=w=>{w==p.ERROR&&(u.value.show=!0,u.value.type=p.ERROR,u.value.message="Failed to create escrow account"),w==p.SUCCESS&&(u.value.show=!0,u.value.type=p.SUCCESS,u.value.message="Successfully created escrow account")},h=()=>{n("success"),c()};return(w,g)=>(r(),f("div",bs,[_s,e("div",null,[v.value?C("",!0):(r(),f("div",xs,[hs,ws,ks,P(ys,{class:"mb-4",onSuccess:g[0]||(g[0]=i=>n(S(p).SUCCESS)),onFailure:g[1]||(g[1]=i=>n(S(p).ERROR))})])),e("span",null,[Cs,Ss,e("div",Ps,[v.value?C("",!0):(r(),z(te,{key:0,onClick:c},{default:T(()=>[U(" Create Escrow Account ")]),_:1}))]),v.value?(r(),z(ls,{key:0,onCancel:g[2]||(g[2]=()=>v.value=!1),onSuccess:h,onFailure:g[3]||(g[3]=i=>n(S(p).ERROR))})):C("",!0)])])]))}}),Es={class:"grid grid-cols-1 divide-y"},Us={class:"flex flex-col sm:grid sm:grid-cols-2 sm:gap-x-4 p-2 sm:p-4"},Ls=e("span",null,[e("h2",{class:"text-2xl font-semibold mb-2 capitalize"}," Personal Information "),e("p",{class:"text-md mb-2 italic w-48"}," Change your profile information and avatar here. ")],-1),As={key:0,class:"flex flex-col gap-4"},Ns={class:"flex flex-row gap-4"},Vs=["src"],Is=["src"],Os={key:2,src:"https://via.placeholder.com/150",class:"w-32 h-32 object-cover rounded-md"},Rs={class:"flex flex-col gap-4"},Ts={class:"space-y-1"},Fs={class:"p-4 rounded-md bg-blue-500 h-8 flex items-center justify-center"},js=e("p",{class:"text-xs"},"1MB max.",-1),Bs={class:"space-y-1"},Ds={class:"p-4 rounded-md bg-blue-500 h-8 flex items-center justify-center"},Ms=e("p",{class:"text-xs"},"3MB max.",-1),Js={class:"relative flex flex-col gap-2"},zs={class:"flex flex-row gap-2 w-full"},Ys={class:"space-y-2 w-full"},Ws=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Name",-1),Ks={class:"space-y-2 w-full"},Hs=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Last Name",-1),qs={class:"space-y-2 w-3/4"},Gs=e("label",{class:"block text-sm font-medium text-gray-700",for:"email"},"Email",-1),Qs=e("label",{class:"block text-sm font-medium text-gray-700",for:"location"},"Street Address",-1),Xs={class:"space-y-2 w-1/2"},Zs=e("label",{class:"block text-sm font-medium text-gray-700",for:"website"},"Website",-1),et={class:"flex justify-end"},st={key:0,class:"absolute top-0 left-0 w-full h-full bg-slate-200/50 z-10 flex justify-center items-center"},tt={key:1},lt={class:"flex flex-col sm:grid sm:grid-cols-2 sm:gap-x-4 p-2 sm:p-4"},ot=e("span",null,[e("h2",{class:"text-2xl font-semibold mb-2 capitalize"}," Store Page Information "),e("p",{class:"text-md mb-2 italic w-48"}," Change your store page information here. ")],-1),at={key:0,class:"flex flex-col gap-4"},nt={class:"flex flex-col gap-2"},it={class:"flex flex-row gap-4"},rt={class:"flex flex-col gap-4"},ut={class:"space-y-1"},ct={class:"p-4 rounded-md bg-blue-500 h-8 flex items-center justify-center"},dt=e("p",{class:"text-xs"},"1MB max.",-1),mt={class:"space-y-1"},pt={class:"p-4 rounded-md bg-blue-500 h-8 flex items-center justify-center"},ft=e("p",{class:"text-xs"},"3MB max.",-1),vt=["src"],gt=["src"],yt={key:2,src:"https://via.placeholder.com/150",class:"w-32 h-32 object-cover rounded-md"},bt={class:"flex flex-col gap-2 w-full"},_t={class:"space-y-2 w-full"},xt=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Company Name",-1),ht={class:"space-y-2 w-full"},wt=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Company Email",-1),kt={class:"space-y-2 w-full"},Ct=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Company Website",-1),St={class:"space-y-2 w-full"},Pt=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Location",-1),$t={class:"flex flex-row gap-2 w-full"},Et={class:"space-y-2 w-full"},Ut=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Acreage",-1),Lt={class:"space-y-2 w-full"},At=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Staff Number",-1),Nt={class:"space-y-2 w-full"},Vt=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Capabilities",-1),It={class:"grid grid-cols-3 divide-x"},Ot={class:"flex flex-row items-center justify-start gap-2 pl-2"},Rt=["value"],Tt={class:"text-xs sm:text-sm font-medium text-gray-700",for:"name"},Ft={class:"space-y-2 w-full"},jt=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Machinery",-1),Bt={class:"grid grid-cols-3 divide-x"},Dt={class:"flex flex-row items-center justify-start gap-2 pl-2"},Mt=["value"],Jt={class:"text-xs sm:text-sm font-medium text-gray-700",for:"name"},zt={class:"space-y-2 w-full"},Yt=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Plant Count",-1),Wt={class:"flex flex-row gap-2 items-center"},Kt={class:"flex flex-wrap h-24 w-full gap-2 bg-slate-400/20 rounded-md p-2 overflow-y-scroll"},Ht={class:"flex flex-row items-center justify-start bg-white gap-2 pl-2 h-6 border rounded-md p-1"},qt={class:"text-sm font-medium text-gray-700",for:"name"},Gt={class:"text-sm font-medium text-gray-700",for:"name"},Qt={class:"text-sm font-medium text-gray-700",for:"name"},Xt={class:"space-y-2 w-full"},Zt=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Shipping",-1),el={class:"flex flex-row gap-2 items-center"},sl={class:"flex flex-wrap h-24 w-full gap-2 bg-slate-400/20 rounded-md p-2 overflow-y-scroll"},tl={class:"flex flex-row items-center justify-start bg-white gap-2 pl-2 h-6 border rounded-md p-1"},ll={class:"text-sm font-medium text-gray-700",for:"name"},ol={class:"text-sm font-medium text-gray-700",for:"name"},al={class:"text-sm font-medium text-gray-700",for:"name"},nl=e("label",{class:"block text-sm font-medium text-gray-700",for:"images"},"Images",-1),il={class:"mt-4 flex overflow-y-auto",style:{"max-height":"150px"}},rl=["src"],ul=["onClick"],cl=["src"],dl=["onClick"],ml={class:"flex flex-col sm:grid sm:grid-cols-2 sm:gap-x-4 p-2 sm:p-4"},pl=e("span",null,[e("h2",{class:"text-2xl font-semibold mb-2 capitalize"}," Change Password "),e("p",{class:"text-md mb-2 italic w-48"}," Change your password here. ")],-1),fl={key:0,class:"flex flex-col gap-4"},vl={class:"flex flex-col gap-2"},gl={class:"flex flex-col gap-2 w-full"},yl={class:"space-y-2 w-1/2"},bl=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Current password",-1),_l={class:"space-y-2 w-1/2"},xl=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"New password",-1),hl={class:"space-y-2 w-1/2"},wl=e("label",{class:"block text-sm font-medium text-gray-700",for:"name"},"Confirm password",-1),kl={class:"flex flex-col sm:grid sm:grid-cols-2 sm:gap-x-4 p-2 sm:p-4"},Cl=e("span",null,[e("h2",{class:"text-2xl font-semibold mb-2 capitalize"}," Delete Account "),e("p",{class:"text-md mb-2 italic sm:w-48"}," No longer interested in using CropLink? Delete your account here. This action is irreversible. All your data will be deleted. ")],-1),Sl={key:0,class:"flex flex-col gap-4"},Pl=e("div",{class:"flex flex-col gap-2"},[e("span",{class:"space-y-2 w-1/2"},[e("button",{class:"mt-2 mb-2 inline-flex justify-center rounded-md border border-transparent bg-red-300 px-4 py-2 text-sm font-medium text-white hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 w-48"}," Yes, Delete my Account ")])],-1),$l=[Pl],Ul=Y({__name:"UserProfileView",setup(W){const{notifications:u}=R(A()),p=A().NOTIFICATION_TYPES,{profile:v,user:$}=R(M()),c=M().ACCOUNT_TYPES,n=y({profilePic:null,bannerPic:null,name:null}),h=y({old:null,new:null,confirm:null}),w=y(!1),{subscribe:g,unsubscribe:i}=oe("users",$.value.uid,l=>{v.value=l,n.value=JSON.parse(JSON.stringify(l))},l=>{u.value.show=!0,u.value.type=p.ERROR,u.value.message="Error loading profile, please try again later."},w),a=y(!1),b=y(null),{subscribe:K,unsubscribe:ue}=oe("ads",$.value.uid,l=>{b.value=l;for(const s in Object.keys(JSON.parse(JSON.stringify(l))))o.value[s]=l[s]},l=>{u.value.show=!0,u.value.type=p.ERROR,u.value.message="Error loading profile, please try again later."},a);re(async()=>{await be(),g(),K()}),Pe(()=>{i(),ue()});const N=y([]),F=l=>{const s=l.target.files[0],x=new FileReader;x.readAsDataURL(s),x.onload=()=>{l.target.name=="profilePic"&&(n.value.profilePic=x.result),l.target.name=="bannerPic"&&(n.value.bannerPic=x.result),l.target.name=="storeLogo"&&(o.value.storeLogo=x.result),l.target.name=="storeBannerPic"&&(o.value.storeBannerPic=x.result),l.target.name=="newStoreImages"&&(console.log("newStoreImages",N.value),N.value.push({file:s,url:x.result}))}},ce=l=>{o.value.storeImagesResized.splice(l,1)},de=l=>{N.value.splice(l,1)},B=y(!1),me=["Harvesting","Pruning","Planting","Packing","Weeding","Fertilizing","Spraying","Irrigation","Tractor Work","Machinery Work","Other"],pe=["Tractor","Sprayer","Mower","Tiller","Seeder","Other"],fe=["Trailer","Truck","Van","Other"],E=y({type:"",distance:"",weight:""}),ve=()=>{E.value.type===""||E.value.distance===""||E.value.weight===""||(o.value.shipping.push(E.value),E.value={type:"",distance:"",weight:""})},ge=l=>{o.value.shipping=o.value.shipping.filter(s=>!(s.type===l.type&&s.distance===l.distance&&s.weight===l.weight))},ye=ee(()=>{var t;if(!o.value)return[];let l=[];const s=((t=b.value)==null?void 0:t.shipping)||[];if(o.value.shipping)l=[...s,...o.value.shipping];else return s;return l.filter((_,j,Z)=>j===Z.findIndex(V=>V.type===_.type&&V.distance===_.distance&&V.weight===_.weight))}),H=y([]),be=async()=>{H.value=await M().getProduce()},k=y({type:"",variety:"",amount:0}),_e=ee(()=>{if(k.value.type==="")return[];const l=H.value.find(s=>s.id===k.value.type);return l?l.sub:[]}),xe=()=>{k.value.type===""||k.value.variety===""||k.value.amount===0||(o.value.plants.push(k.value),k.value={type:"",variety:"",amount:0})},he=l=>{o.value.plants=o.value.plants.filter(s=>!(s.type===l.type&&s.variety===l.variety&&s.amount===l.amount))},we=ee(()=>{var t;if(!b.value)return[];let l=[];const s=((t=b.value)==null?void 0:t.plants)||[];if(o.value.plants)l=[...s,...o.value.plants];else return s;return l.filter((_,j,Z)=>j===Z.findIndex(V=>V.type===_.type&&V.variety===_.variety))}),ke=async()=>{console.log("profileChanges",n.value),console.log("profile",v.value);const l={};for(const t in n.value)console.log("key",t),n.value[t]!=v.value[t]&&(console.log("profileChanges.value[key]",n.value[t]),l[t]=n.value[t]);console.log("profile changes",l);const s=JSON.parse(JSON.stringify(l));s.profilePic=n.value.profilePic?n.value.profilePic.split(",")[1]:null,s.bannerPic=n.value.bannerPic?n.value.bannerPic.split(",")[1]:null,Object.keys(s).forEach(t=>s[t]==null&&delete s[t]),console.log("deepCopy",s);const{callFunction:x}=J("updateProfile",s,B,void 0,void 0,()=>{u.value.show=!0,u.value.type=p.SUCCESS,u.value.message="Profile Updated"},()=>{u.value.show=!0,u.value.type=p.ERROR,u.value.message="An error occured while updating your profile, please try again later"});await x()},q=y(null),G=y(null),Q=y(null),X=y(null),D=l=>{l==="profilePic"&&q.value?q.value.click():l==="bannerPic"&&G.value?G.value.click():l==="storeLogo"&&Q.value?Q.value.click():l==="storeBannerPic"&&X.value&&X.value.click()};y(!1);const Ce=async()=>{if(h.value.new!=h.value.confirm){u.value.show=!0,u.value.type=p.ERROR,u.value.message="Passwords do not match";return}},o=y({storeLogo:null,storeBannerPic:null,acreage:null,staffNumber:null,capabilities:[],location:null,machinery:[],plants:[],shipping:[],companyName:null,companyEmail:null,companyWebsite:null,storeImagesResized:[]}),Se=async()=>{const l={};for(const t in o.value)o.value[t]!=b.value[t]&&(l[t]=o.value[t]);console.log("store changes",l);const s=JSON.parse(JSON.stringify(l));s.storeLogo=o.value.storeLogo?o.value.storeLogo.split(",")[1]:null,s.storeBannerPic=o.value.storeBannerPic?o.value.storeBannerPic.split(",")[1]:null,N.value.length>0&&(s.newStoreImages=N.value.map(t=>t.url.split(",")[1])),Object.keys(s).forEach(t=>s[t]==null&&delete s[t]);const{callFunction:x}=J("updateStoreChanges",s,a,void 0,()=>{N.value=[]},()=>{u.value.show=!0,u.value.type=p.SUCCESS,u.value.message="Store Updated"},()=>{u.value.show=!0,u.value.type=p.ERROR,u.value.message="An error occured while updating your store, please try again later"});await x()};return(l,s)=>{var x;return r(),f("div",Es,[e("div",Us,[Ls,S(v)&&!w.value?(r(),f("span",As,[e("span",Ns,[e("div",null,[S(v).profilePic?(r(),f("img",{key:0,src:S(v).profilePic,class:"w-32 h-32 object-cover rounded-md"},null,8,Vs)):n.value.profilePic?(r(),f("img",{key:1,src:n.value.profilePic,class:"w-32 h-32 object-cover rounded-md"},null,8,Is)):(r(),f("img",Os))]),e("div",Rs,[e("span",Ts,[e("div",Fs,[e("h2",{onClick:s[0]||(s[0]=t=>D("profilePic")),class:"cursor-pointer text-white"},"Change Avatar"),e("input",{type:"file",onChange:F,ref_key:"profilePic",ref:q,name:"profilePic",class:"hidden"},null,544)]),js]),e("span",Bs,[e("div",Ds,[e("h2",{onClick:s[1]||(s[1]=t=>D("bannerPic")),class:"cursor-pointer text-white"},"Change Banner"),e("input",{type:"file",onChange:F,ref_key:"bannerPic",ref:G,name:"bannerPic",class:"hidden"},null,544)]),Ms])])]),e("div",Js,[e("span",zs,[e("span",Ys,[Ws,d(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=t=>n.value.name=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,n.value.name]])]),e("span",Ks,[Hs,d(e("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=t=>n.value.lastName=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,n.value.lastName]])])]),e("span",qs,[Gs,d(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=t=>n.value.email=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,n.value.email]])]),Qs,d(e("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=t=>n.value.streetAddress=t),class:"bg-gray-200/70 p-2 rounded-md border-1"},null,512),[[m,n.value.streetAddress]]),e("span",Xs,[Zs,d(e("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=t=>n.value.website=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,n.value.website]])])]),e("div",et,[P(le,{isLoading:B.value,onClick:ke,class:"mt-2 mb-2 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 w-36"},{default:T(()=>[U(" Save ")]),_:1},8,["isLoading"])]),B.value?(r(),f("div",st,[P(ae,{isLoading:B.value,class:"z-20"},null,8,["isLoading"])])):C("",!0)])):C("",!0),w.value?(r(),f("div",tt,[P(ae,{isLoading:w.value},null,8,["isLoading"])])):C("",!0)]),e("div",lt,[ot,b.value&&!w.value?(r(),f("span",at,[e("div",nt,[e("span",it,[e("div",rt,[e("span",ut,[e("div",ct,[e("h2",{onClick:s[7]||(s[7]=t=>D("storeLogo")),class:"cursor-pointer text-white"},"Change Logo"),e("input",{type:"file",onChange:F,ref_key:"storeLogo",ref:Q,name:"storeLogo",class:"hidden"},null,544)]),dt]),e("span",mt,[e("div",pt,[e("h2",{onClick:s[8]||(s[8]=t=>D("storeBannerPic")),class:"cursor-pointer text-white"},"Change Banner"),e("input",{type:"file",onChange:F,ref_key:"storeBannerPic",ref:X,name:"storeBannerPic",class:"hidden"},null,544)]),ft])]),e("div",null,[b.value.storeLogo?(r(),f("img",{key:0,src:b.value.storeLogo,class:"w-32 h-32 object-cover rounded-md"},null,8,vt)):o.value.storeLogo?(r(),f("img",{key:1,src:o.value.storeLogo,class:"w-32 h-32 object-cover rounded-md"},null,8,gt)):(r(),f("img",yt))])]),e("span",bt,[e("span",_t,[xt,d(e("input",{type:"text","onUpdate:modelValue":s[9]||(s[9]=t=>o.value.companyName=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,o.value.companyName]])]),e("span",ht,[wt,d(e("input",{type:"email","onUpdate:modelValue":s[10]||(s[10]=t=>o.value.companyEmail=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,o.value.companyEmail]])]),e("span",kt,[Ct,d(e("input",{type:"url","onUpdate:modelValue":s[11]||(s[11]=t=>o.value.companyWebsite=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,o.value.companyWebsite]])]),e("span",St,[Pt,d(e("input",{type:"text","onUpdate:modelValue":s[12]||(s[12]=t=>o.value.location=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,o.value.location]])]),e("span",$t,[e("span",Et,[Ut,d(e("input",{type:"number","onUpdate:modelValue":s[13]||(s[13]=t=>o.value.acreage=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,o.value.acreage]])]),e("span",Lt,[At,d(e("input",{type:"number","onUpdate:modelValue":s[14]||(s[14]=t=>o.value.staffNumber=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,o.value.staffNumber]])])]),e("span",Nt,[Vt,e("div",It,[(r(),f(I,null,O(me,t=>e("span",Ot,[d(e("input",{type:"checkbox",value:t,"onUpdate:modelValue":s[15]||(s[15]=_=>o.value.capabilities=_)},null,8,Rt),[[ne,o.value.capabilities]]),e("label",Tt,L(t),1)])),64))])]),e("span",Ft,[jt,e("div",Bt,[(r(),f(I,null,O(pe,t=>e("span",Dt,[d(e("input",{type:"checkbox",value:t,"onUpdate:modelValue":s[16]||(s[16]=_=>o.value.machinery=_)},null,8,Mt),[[ne,o.value.machinery]]),e("label",Jt,L(t),1)])),64))])]),e("span",zt,[Yt,e("div",Wt,[P(se,{items:H.value,modelValue:k.value.type,"onUpdate:modelValue":s[17]||(s[17]=t=>k.value.type=t),placeholder:"Produce",itemLabel:"id"},null,8,["items","modelValue"]),P(se,{items:_e.value,modelValue:k.value.variety,"onUpdate:modelValue":s[18]||(s[18]=t=>k.value.variety=t),placeholder:"Variety",disabled:!k.value.type},null,8,["items","modelValue","disabled"]),d(e("input",{type:"number","onUpdate:modelValue":s[19]||(s[19]=t=>k.value.amount=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-1/3 text-sm",placeholder:"Amount"},null,512),[[m,k.value.amount]]),e("button",{onClick:xe,class:"mt-2 mb-2 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 w-36"}," Add ")]),e("div",Kt,[(r(!0),f(I,null,O(we.value,t=>(r(),f("span",Ht,[e("label",qt,L(t.type),1),U(" - "),e("label",Gt,L(t.variety),1),U(" - "),e("label",Qt,L(t.amount)+" plants",1),P(S(ie),{onClick:_=>he(t),class:"w-6 h-6 pl-2"},null,8,["onClick"])]))),256))])]),e("span",Xt,[Zt,e("div",el,[P(se,{items:fe,modelValue:E.value.type,"onUpdate:modelValue":s[20]||(s[20]=t=>E.value.type=t),placeholder:"Method"},null,8,["modelValue"]),d(e("input",{type:"text","onUpdate:modelValue":s[21]||(s[21]=t=>E.value.distance=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-1/3 text-sm",placeholder:"Distance(km)"},null,512),[[m,E.value.distance]]),d(e("input",{type:"text","onUpdate:modelValue":s[22]||(s[22]=t=>E.value.weight=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-1/3 text-sm",placeholder:"Weight(kg)"},null,512),[[m,E.value.weight]]),e("button",{onClick:ve,class:"mt-2 mb-2 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 w-36"}," Add ")]),e("div",sl,[(r(!0),f(I,null,O(ye.value,t=>(r(),f("span",tl,[e("label",ll,L(t.type),1),U(" - "),e("label",ol,"Up to "+L(t.distance)+"km",1),U(" - "),e("label",al,"Max "+L(t.weight)+"kg",1),P(S(ie),{onClick:_=>ge(t),class:"w-6 h-6 pl-2"},null,8,["onClick"])]))),256))])]),e("div",null,[nl,e("input",{type:"file",id:"newStoreImages",ref:"storeImages",name:"newStoreImages",multiple:"",onChange:F,class:"mt-1 p-2 w-full rounded-md border"},null,544),e("div",il,[(r(!0),f(I,null,O(o.value.storeImagesResized,(t,_)=>(r(),f("div",{key:_,class:"mr-2 relative"},[e("img",{src:t,class:"w-16 h-16 object-cover"},null,8,rl),e("button",{onClick:j=>ce(_)},"Remove",8,ul)]))),128)),(r(!0),f(I,null,O(N.value,(t,_)=>(r(),f("div",{key:_,class:"mr-2 relative"},[e("img",{src:t.url,class:"w-16 h-16 object-cover"},null,8,cl),e("button",{onClick:j=>de(_)},"Remove",8,dl)]))),128))])])])]),e("div",{class:"flex justify-end"},[e("button",{onClick:Se,class:"mt-2 mb-2 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 w-36"}," Save ")])])):C("",!0)]),e("div",ml,[pl,S(v)&&!w.value?(r(),f("span",fl,[e("div",vl,[e("span",gl,[e("span",yl,[bl,d(e("input",{type:"password","onUpdate:modelValue":s[23]||(s[23]=t=>h.value.old=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,h.value.old]])]),e("span",_l,[xl,d(e("input",{type:"password","onUpdate:modelValue":s[24]||(s[24]=t=>h.value.new=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,h.value.new]])]),e("span",hl,[wl,d(e("input",{type:"password","onUpdate:modelValue":s[25]||(s[25]=t=>h.value.confirm=t),class:"bg-gray-200/70 p-2 rounded-md border-1 w-full"},null,512),[[m,h.value.confirm]])])])]),e("div",{class:"flex justify-end"},[e("button",{onClick:Ce,class:"mt-2 mb-2 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 w-36"}," Save ")])])):C("",!0)]),e("div",kl,[Cl,S(v)&&!w.value?(r(),f("span",Sl,$l)):C("",!0)]),((x=S(v))==null?void 0:x.accountType)==S(c).SELLER?(r(),z($s,{key:0})):C("",!0)])}}});export{Ul as default};
