import{ab as O,ao as F,d as P,r as S,ar as $,G as R,as as B,at as L,ac as m,aa as j,au as K,ak as _,av as x,ad as k,af as w,ai as U,aw as q,aj as D,ax as H,o as V,ag as W,ay as Q,ah as z,az as G,aA as M,al as d,aB as y,aC as J,aq as E,aD as A,a9 as Y}from"./index-d604ebf2.js";function Z({container:a,accept:b,walk:I,enabled:v}){O(()=>{let e=a.value;if(!e||v!==void 0&&!v.value)return;let c=F(a);if(!c)return;let s=Object.assign(i=>b(i),{acceptNode:b}),p=c.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,s,!1);for(;p.nextNode();)I(p.currentNode)})}var X=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(X||{}),ee=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(ee||{});function te(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let N=Symbol("MenuContext");function T(a){let b=z(N,null);if(b===null){let I=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(I,T),I}return b}let ne=P({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:b,attrs:I}){let v=S(1),e=S(null),c=S(null),s=S([]),p=S(""),i=S(null),u=S(1);function t(l=o=>o){let o=i.value!==null?s.value[i.value]:null,r=Y(l(s.value.slice()),g=>m(g.dataRef.domRef)),n=o?r.indexOf(o):null;return n===-1&&(n=null),{items:r,activeItemIndex:n}}let f={menuState:v,buttonRef:e,itemsRef:c,items:s,searchQuery:p,activeItemIndex:i,activationTrigger:u,closeMenu:()=>{v.value=1,i.value=null},openMenu:()=>v.value=0,goToItem(l,o,r){let n=t(),g=G(l===M.Specific?{focus:M.Specific,id:o}:{focus:l},{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.disabled});p.value="",i.value=g,u.value=r??1,s.value=n.items},search(l){let o=p.value!==""?0:1;p.value+=l.toLowerCase();let r=(i.value!==null?s.value.slice(i.value+o).concat(s.value.slice(0,i.value+o)):s.value).find(g=>g.dataRef.textValue.startsWith(p.value)&&!g.dataRef.disabled),n=r?s.value.indexOf(r):-1;n===-1||n===i.value||(i.value=n,u.value=1)},clearSearch(){p.value=""},registerItem(l,o){let r=t(n=>[...n,{id:l,dataRef:o}]);s.value=r.items,i.value=r.activeItemIndex,u.value=1},unregisterItem(l){let o=t(r=>{let n=r.findIndex(g=>g.id===l);return n!==-1&&r.splice(n,1),r});s.value=o.items,i.value=o.activeItemIndex,u.value=1}};return $([e,c],(l,o)=>{var r;f.closeMenu(),B(o,L.Loose)||(l.preventDefault(),(r=m(e))==null||r.focus())},R(()=>v.value===0)),j(N,f),K(R(()=>_(v.value,{0:x.Open,1:x.Closed}))),()=>{let l={open:v.value===0,close:f.closeMenu};return k({ourProps:{},theirProps:a,slot:l,slots:b,attrs:I,name:"Menu"})}}}),le=P({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${w()}`}},setup(a,{attrs:b,slots:I,expose:v}){let e=T("MenuButton");v({el:e.buttonRef,$el:e.buttonRef});function c(u){switch(u.key){case d.Space:case d.Enter:case d.ArrowDown:u.preventDefault(),u.stopPropagation(),e.openMenu(),y(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(M.First)});break;case d.ArrowUp:u.preventDefault(),u.stopPropagation(),e.openMenu(),y(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(M.Last)});break}}function s(u){switch(u.key){case d.Space:u.preventDefault();break}}function p(u){a.disabled||(e.menuState.value===0?(e.closeMenu(),y(()=>{var t;return(t=m(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(u.preventDefault(),e.openMenu(),te(()=>{var t;return(t=m(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let i=U(R(()=>({as:a.as,type:b.type})),e.buttonRef);return()=>{var u;let t={open:e.menuState.value===0},{id:f,...l}=a,o={ref:e.buttonRef,id:f,type:i.value,"aria-haspopup":"menu","aria-controls":(u=m(e.itemsRef))==null?void 0:u.id,"aria-expanded":e.menuState.value===0,onKeydown:c,onKeyup:s,onClick:p};return k({ourProps:o,theirProps:l,slot:t,attrs:b,slots:I,name:"MenuButton"})}}}),ue=P({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${w()}`}},setup(a,{attrs:b,slots:I,expose:v}){let e=T("MenuItems"),c=S(null);v({el:e.itemsRef,$el:e.itemsRef}),Z({container:R(()=>m(e.itemsRef)),enabled:R(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function s(t){var f;switch(c.value&&clearTimeout(c.value),t.key){case d.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case d.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let l=e.items.value[e.activeItemIndex.value];(f=m(l.dataRef.domRef))==null||f.click()}e.closeMenu(),A(m(e.buttonRef));break;case d.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(M.Next);case d.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(M.Previous);case d.Home:case d.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(M.First);case d.End:case d.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(M.Last);case d.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),y(()=>{var l;return(l=m(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case d.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),y(()=>J(m(e.buttonRef),t.shiftKey?E.Previous:E.Next));break;default:t.key.length===1&&(e.search(t.key),c.value=setTimeout(()=>e.clearSearch(),350));break}}function p(t){switch(t.key){case d.Space:t.preventDefault();break}}let i=q(),u=R(()=>i!==null?(i.value&x.Open)===x.Open:e.menuState.value===0);return()=>{var t,f;let l={open:e.menuState.value===0},{id:o,...r}=a,n={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(f=m(e.buttonRef))==null?void 0:f.id,id:o,onKeydown:s,onKeyup:p,role:"menu",tabIndex:0,ref:e.itemsRef};return k({ourProps:n,theirProps:r,slot:l,attrs:b,slots:I,features:D.RenderStrategy|D.Static,visible:u.value,name:"MenuItems"})}}}),oe=P({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${w()}`}},setup(a,{slots:b,attrs:I,expose:v}){let e=T("MenuItem"),c=S(null);v({el:c,$el:c});let s=R(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===a.id:!1),p=H(c),i=R(()=>({disabled:a.disabled,get textValue(){return p()},domRef:c}));V(()=>e.registerItem(a.id,i)),W(()=>e.unregisterItem(a.id)),O(()=>{e.menuState.value===0&&s.value&&e.activationTrigger.value!==0&&y(()=>{var n,g;return(g=(n=m(c))==null?void 0:n.scrollIntoView)==null?void 0:g.call(n,{block:"nearest"})})});function u(n){if(a.disabled)return n.preventDefault();e.closeMenu(),A(m(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(M.Nothing);e.goToItem(M.Specific,a.id)}let f=Q();function l(n){f.update(n)}function o(n){f.wasMoved(n)&&(a.disabled||s.value||e.goToItem(M.Specific,a.id,0))}function r(n){f.wasMoved(n)&&(a.disabled||s.value&&e.goToItem(M.Nothing))}return()=>{let{disabled:n}=a,g={active:s.value,disabled:n,close:e.closeMenu},{id:h,...C}=a;return k({ourProps:{id:h,ref:c,role:"menuitem",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,disabled:void 0,onClick:u,onFocus:t,onPointerenter:l,onMouseenter:l,onPointermove:o,onMousemove:o,onPointerleave:r,onMouseleave:r},theirProps:{...I,...C},slot:g,attrs:I,slots:b,name:"MenuItem"})}}});export{ne as M,le as R,ue as h,oe as y};
