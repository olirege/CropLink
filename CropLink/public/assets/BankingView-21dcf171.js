import{_ as I}from"./SellerAdCard.vue_vue_type_script_setup_true_lang-13177773.js";import{d as y,r as u,J as S,e as s,f as c,j as e,t as o,F as T,l as B,n as g,L as $,B as r,aP as L,w as C,s as N,m as b,o as k,A as n,p as q,q as F,y as j,aq as h,i as D,c as P,a4 as A,Z as E}from"./index-a935e8ad.js";import{r as x}from"./XMarkIcon-c8cae34a.js";import"./ImageCarousel-fbeacc5f.js";import"./CheckCircleIcon-bcebf7d0.js";const O={class:"flex min-h-full items-center"},R={key:0},V={class:"flex flex-col gap-2 justify-start items-start border rounded-md"},G={class:"px-5 pt-5 text-left"},M={class:"text-xl font-bold"},Y={class:"text-md"},z={class:"w-full border-t-2 max-h-64 overflow-y-scroll"},J={class:"text-md text-left p-5"},U={class:"w-full flex flex-col gap-2 justify-start items-start px-5 pb-5"},Z=e("label",{class:"text-lg font-semibold border-b pb-2"},"Milestones:",-1),H={class:"w-full p-2 border rounded-md resize-none focus:border-blue-500 focus:ring-0 flex flex-col gap-2"},K={class:"flex flex-row justify-between"},Q={class:"flex flex-row items-center gap-2"},W={class:"font-bold text-xl"},X={class:"italic text-xl"},ee={class:"flex flex-row gap-4"},se={key:1},te=y({__name:"GigDetailCard",props:{gig:{type:Object,required:!0}},setup(l){const i=u(!1);return(p,_)=>{const t=S("currency");return s(),c("div",O,[l.gig&&!i.value?(s(),c("div",R,[e("div",V,[e("span",G,[e("h1",M,o(l.gig.title),1),e("p",Y,o(l.gig.location),1)]),e("div",z,[e("p",J,o(l.gig.description),1)]),e("div",U,[Z,(s(!0),c(T,null,B(l.gig.milestones,(a,d)=>(s(),c("span",H,[e("span",K,[e("span",Q,[e("p",W,o(d+1+"."),1),e("p",X,o(a.name),1)]),e("span",ee,[g(r(L),{class:"h-6 w-6"}),C(e("p",null,null,512),[[t,a.price]])])]),e("p",null,o(a.description.substring(0,300)+"..."),1)]))),256))])])])):(s(),c("div",se,[g($,{isLoading:i.value},null,8,["isLoading"])]))])}}}),ae={class:"sm:sticky sm:top-0"},oe={key:0,class:"border rounded-md p-2 sm:p-4 flex flex-col gap-4"},le={class:"flex flex-row justify-between gap-4"},ne=e("label",null,"Escrow Transaction:",-1),ce={class:"font-bold"},ie={class:"sm:ml-2 flex flex-col"},re={class:"flex flex row gap-4"},de=e("label",{class:"font-bold"},"Amount:",-1),ue={class:"flex flex row gap-4"},_e=e("label",{class:"font-bold"},"Seller:",-1),fe={class:"flex flex row gap-4"},pe=e("label",{class:"font-bold"},"Buyer:",-1),ge={class:"flex flex-col gap-2 sm:gap-4 mt-2"},he=e("label",{class:"font-bold"},"Payment status:",-1),xe={class:"flex flex-row gap-4 justify-between"},me={class:"flex flex-col items-center p-2"},ve=e("label",null,"Sent",-1),ye={class:"flex flex-col items-center p-2"},we=e("label",null,"Recieved",-1),be={class:"flex flex-col items-center p-2"},$e=e("label",null,"Secured",-1),ke={class:"flex flex-col items-center p-2"},Ie=e("label",null,"Disbursed",-1),Se={key:1,class:"flex items-center justify-center h-[300px]"},Te=y({__name:"BankingComponent",props:{contractId:{type:String,required:!0},transactionId:{type:String,required:!1}},setup(l){const{notifications:i}=N(b()),p=b().NOTIFICATION_TYPES,_=l,t=u({}),a=u(!1),d=u({}),m=async()=>{if(!_.contractId)return console.error("No contract id provided");const{callFunction:v}=j("getTransaction",{transactionId:_.contractId},a,void 0,f=>{if(!f||!f.data.transaction)return console.error("No transaction found");t.value=f.data.transaction,d.value=f.data.landingPage},()=>{},f=>{i.value.show=!0,i.value.type=p.ERROR,i.value.message="Error while fetching transaction, please try again later"});await v()},w=()=>{if(!d.value)return console.error("No landing page found");window.open(d.value,"_blank")};return k(async()=>{await m()}),(v,f)=>(s(),c("div",ae,[t.value.id?(s(),c("div",oe,[e("div",le,[ne,e("p",ce,o(t.value.id)+"#",1)]),e("p",null,o(t.value.description),1),e("div",ie,[e("div",re,[de,e("p",null,o(t.value.items[0].schedule[0].amount),1)]),e("div",ue,[_e,e("p",null,o(t.value.items[0].schedule[0].beneficiary_customer),1)]),e("div",fe,[pe,e("p",null,o(t.value.items[0].schedule[0].payer_customer),1)]),e("div",ge,[he,e("div",xe,[e("div",me,[ve,t.value.items[0].schedule[0].status.payment_sent?(s(),n(r(h),{key:0,class:"text-green-500 w-5 h-5"})):(s(),n(r(x),{key:1,class:"text-red-500 w-5 h-5"}))]),e("div",ye,[we,t.value.items[0].schedule[0].status.payment_sent?(s(),n(r(h),{key:0,class:"text-green-500 w-5 h-5"})):(s(),n(r(x),{key:1,class:"text-red-500 w-5 h-5"}))]),e("div",be,[$e,t.value.items[0].schedule[0].status.secured?(s(),n(r(h),{key:0,class:"text-green-500 w-5 h-5"})):(s(),n(r(x),{key:1,class:"text-red-500 w-5 h-5"}))]),e("div",ke,[Ie,t.value.items[0].schedule[0].status.disbursed_to_beneficiary?(s(),n(r(h),{key:0,class:"text-green-500 w-5 h-5"})):(s(),n(r(x),{key:1,class:"text-red-500 w-5 h-5"}))])])])])])):(s(),c("div",Se,[g($,{isLoading:a.value},null,8,["isLoading"])])),g(F,{onClick:w,classes:"w-full"},{default:q(()=>[D("View")]),_:1})]))}}),Be={class:"flex flex-col sm:grid sm:grid-cols-2 sm:gap-x-4 sm:p-4"},Le={key:2},Ce=e("p",null," Failed to load ad ",-1),Ne=[Ce],Ae=y({__name:"BankingView",props:{adId:{type:String,required:!0},contractId:{type:String,required:!0},transactionId:{type:String,required:!0}},setup(l){const i=l,p=u({}),_=u(!1),t=async()=>{_.value=!0,p.value=await A("ads",i.adId),_.value=!1},a=u({}),d=u(!1),m=async()=>{d.value=!0,a.value=await E("contracts",i.contractId),d.value=!1};return k(async()=>{await t(),await m()}),P(()=>{}),(w,v)=>(s(),c("div",Be,[a.value&&a.value.type=="sell"?(s(),n(I,{key:0,ad:p.value,showButtons:!1},null,8,["ad"])):a.value&&a.value.type=="gig"?(s(),n(te,{key:1,gig:a.value.context,showButtons:!1,class:"sm:order-first order-last"},null,8,["gig"])):(s(),c("div",Le,Ne)),g(Te,{contractId:l.contractId},null,8,["contractId"])]))}});export{Ae as default};
