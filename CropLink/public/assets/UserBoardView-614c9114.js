import{h as y,o as N,y as se,z as b,d as B,A as M,B as ie,C as le,D as _,O as F,G as Q,H as ne,I as G,T as de,F as U,J as ae,K as oe,M as z,N as X,P as q,Q as k,R as j,S as ce,U as ve,V as D,W as P,e as h,f as $,k as K,g as r,p as L,t as w,i as I,s as Z,a as Y,X as pe,l as C,q as R,x as W,Y as fe,Z as be,$ as ee,L as me}from"./index-f1a4bff5.js";import{I as ge}from"./ImageCarousel-f841f4d9.js";function te(e,u){if(e)return e;let i=u??"button";if(typeof i=="string"&&i.toLowerCase()==="button")return"button"}function xe(e,u){let i=y(te(e.value.type,e.value.as));return N(()=>{i.value=te(e.value.type,e.value.as)}),se(()=>{var c;i.value||b(u)&&b(u)instanceof HTMLButtonElement&&!((c=b(u))!=null&&c.hasAttribute("type"))&&(i.value="button")}),i}let he=B({props:{onFocus:{type:Function,required:!0}},setup(e){let u=y(!0);return()=>u.value?M(le,{as:"button",type:"button",features:ie.Focusable,onFocus(i){i.preventDefault();let c,a=50;function s(){var d;if(a--<=0){c&&cancelAnimationFrame(c);return}if((d=e.onFocus)!=null&&d.call(e)){u.value=!1,cancelAnimationFrame(c);return}c=requestAnimationFrame(s)}c=requestAnimationFrame(s)}}):null}});var _e=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(_e||{}),ye=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(ye||{});let re=Symbol("TabsContext");function V(e){let u=z(re,null);if(u===null){let i=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,V),i}return u}let J=Symbol("TabsSSRContext"),$e=B({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:u,attrs:i,emit:c}){var a;let s=y((a=e.selectedIndex)!=null?a:e.defaultIndex),d=y([]),n=y([]),p=_(()=>e.selectedIndex!==null),v=_(()=>p.value?e.selectedIndex:s.value);function m(l){var t;let o=F(f.tabs.value,b),x=F(f.panels.value,b),E=o.filter(A=>{var T;return!((T=b(A))!=null&&T.hasAttribute("disabled"))});if(l<0||l>o.length-1){let A=q(s.value===null?0:Math.sign(l-s.value),{[-1]:()=>1,0:()=>q(Math.sign(l),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),T=q(A,{0:()=>o.indexOf(E[0]),1:()=>o.indexOf(E[E.length-1])});T!==-1&&(s.value=T),f.tabs.value=o,f.panels.value=x}else{let A=o.slice(0,l),T=[...o.slice(l),...A].find(ue=>E.includes(ue));if(!T)return;let H=(t=o.indexOf(T))!=null?t:f.selectedIndex.value;H===-1&&(H=f.selectedIndex.value),s.value=H,f.tabs.value=o,f.panels.value=x}}let f={selectedIndex:_(()=>{var l,t;return(t=(l=s.value)!=null?l:e.defaultIndex)!=null?t:null}),orientation:_(()=>e.vertical?"vertical":"horizontal"),activation:_(()=>e.manual?"manual":"auto"),tabs:d,panels:n,setSelectedIndex(l){v.value!==l&&c("change",l),p.value||m(l)},registerTab(l){var t;if(d.value.includes(l))return;let o=d.value[s.value];d.value.push(l),d.value=F(d.value,b);let x=(t=d.value.indexOf(o))!=null?t:s.value;x!==-1&&(s.value=x)},unregisterTab(l){let t=d.value.indexOf(l);t!==-1&&d.value.splice(t,1)},registerPanel(l){n.value.includes(l)||(n.value.push(l),n.value=F(n.value,b))},unregisterPanel(l){let t=n.value.indexOf(l);t!==-1&&n.value.splice(t,1)}};Q(re,f);let S=y({tabs:[],panels:[]}),g=y(!1);N(()=>{g.value=!0}),Q(J,_(()=>g.value?null:S.value));let O=_(()=>e.selectedIndex);return N(()=>{ne([O],()=>{var l;return m((l=e.selectedIndex)!=null?l:e.defaultIndex)},{immediate:!0})}),se(()=>{if(!p.value||v.value==null||f.tabs.value.length<=0)return;let l=F(f.tabs.value,b);l.some((t,o)=>b(f.tabs.value[o])!==b(t))&&f.setSelectedIndex(l.findIndex(t=>b(t)===b(f.tabs.value[v.value])))}),()=>{let l={selectedIndex:s.value};return M(U,[d.value.length<=0&&M(he,{onFocus:()=>{for(let t of d.value){let o=b(t);if((o==null?void 0:o.tabIndex)===0)return o.focus(),!0}return!1}}),G({theirProps:{...i,...de(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:l,slots:u,attrs:i,name:"TabGroup"})])}}}),we=B({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:u,slots:i}){let c=V("TabList");return()=>{let a={selectedIndex:c.selectedIndex.value},s={role:"tablist","aria-orientation":c.orientation.value};return G({ourProps:s,theirProps:e,slot:a,attrs:u,slots:i,name:"TabList"})}}}),Se=B({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${ae()}`}},setup(e,{attrs:u,slots:i,expose:c}){let a=V("Tab"),s=y(null);c({el:s,$el:s}),N(()=>a.registerTab(s)),oe(()=>a.unregisterTab(s));let d=z(J),n=_(()=>{if(d.value){let t=d.value.tabs.indexOf(e.id);return t===-1?d.value.tabs.push(e.id)-1:t}return-1}),p=_(()=>{let t=a.tabs.value.indexOf(s);return t===-1?n.value:t}),v=_(()=>p.value===a.selectedIndex.value);function m(t){var o;let x=t();if(x===j.Success&&a.activation.value==="auto"){let E=(o=ve(s))==null?void 0:o.activeElement,A=a.tabs.value.findIndex(T=>b(T)===E);A!==-1&&a.setSelectedIndex(A)}return x}function f(t){let o=a.tabs.value.map(x=>b(x)).filter(Boolean);if(t.key===k.Space||t.key===k.Enter){t.preventDefault(),t.stopPropagation(),a.setSelectedIndex(p.value);return}switch(t.key){case k.Home:case k.PageUp:return t.preventDefault(),t.stopPropagation(),m(()=>D(o,P.First));case k.End:case k.PageDown:return t.preventDefault(),t.stopPropagation(),m(()=>D(o,P.Last))}if(m(()=>q(a.orientation.value,{vertical(){return t.key===k.ArrowUp?D(o,P.Previous|P.WrapAround):t.key===k.ArrowDown?D(o,P.Next|P.WrapAround):j.Error},horizontal(){return t.key===k.ArrowLeft?D(o,P.Previous|P.WrapAround):t.key===k.ArrowRight?D(o,P.Next|P.WrapAround):j.Error}}))===j.Success)return t.preventDefault()}let S=y(!1);function g(){var t;S.value||(S.value=!0,!e.disabled&&((t=b(s))==null||t.focus({preventScroll:!0}),a.setSelectedIndex(p.value),ce(()=>{S.value=!1})))}function O(t){t.preventDefault()}let l=xe(_(()=>({as:e.as,type:u.type})),s);return()=>{var t;let o={selected:v.value},{id:x,...E}=e,A={ref:s,onKeydown:f,onMousedown:O,onClick:g,id:x,role:"tab",type:l.value,"aria-controls":(t=b(a.panels.value[p.value]))==null?void 0:t.id,"aria-selected":v.value,tabIndex:v.value?0:-1,disabled:e.disabled?!0:void 0};return G({ourProps:A,theirProps:E,slot:o,attrs:u,slots:i,name:"Tab"})}}}),Ae=B({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${ae()}`},tabIndex:{type:Number,default:0}},setup(e,{attrs:u,slots:i,expose:c}){let a=V("TabPanel"),s=y(null);c({el:s,$el:s}),N(()=>a.registerPanel(s)),oe(()=>a.unregisterPanel(s));let d=z(J),n=_(()=>{if(d.value){let m=d.value.panels.indexOf(e.id);return m===-1?d.value.panels.push(e.id)-1:m}return-1}),p=_(()=>{let m=a.panels.value.indexOf(s);return m===-1?n.value:m}),v=_(()=>p.value===a.selectedIndex.value);return()=>{var m;let f={selected:v.value},{id:S,tabIndex:g,...O}=e,l={ref:s,id:S,role:"tabpanel","aria-labelledby":(m=b(a.tabs.value[p.value]))==null?void 0:m.id,tabIndex:v.value?g:-1};return!v.value&&e.unmount&&!e.static?M(le,{as:"span",...l}):G({ourProps:l,theirProps:O,slot:f,attrs:u,slots:i,features:X.Static|X.RenderStrategy,visible:v.value,name:"TabPanel"})}}});const Te={class:"w-full h-48 object-cover rounded-lg"},ke={class:"text-xl font-semibold mb-2"},Pe={class:"text-sm mb-2"},Ce=r("strong",null,"Id:",-1),Ie={class:"text-sm mb-2"},Ee=r("strong",null,"Variety:",-1),Be={class:"text-sm mb-2"},Oe=r("strong",null,"Yield Tonnage:",-1),De={class:"text-sm mb-2"},Le=r("strong",null,"Expected Harvest Date:",-1),Ne={class:"text-sm mb-2"},Fe=r("strong",null,"Price:",-1),je={class:"flex justify-end mt-2 space-x-4"},Re=["disabled","onClick"],qe=["disabled","onClick"],Me=B({__name:"SellerContentComponent",props:{ads:{type:Array,required:!0}},emits:["post","remove"],setup(e,{emit:u}){const i=u,c=s=>{s&&i("post",s)},a=s=>{s&&i("remove",s)};return(s,d)=>(h(),$("span",null,[(h(!0),$(U,null,K(e.ads,(n,p)=>(h(),$("div",{key:p,class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300"},[r("div",Te,[L(ge,{images:n.images},null,8,["images"])]),r("h3",ke,w(n.type),1),r("p",Pe,[Ce,I(" "+w(n.id),1)]),r("p",Ie,[Ee,I(" "+w(n.variety),1)]),r("p",Be,[Oe,I(" "+w(n.yieldTonnage),1)]),r("p",De,[Le,I(" "+w(n.expectedHarvestDate),1)]),r("p",Ne,[Fe,I(" "+w(n.price),1)]),r("div",je,[r("button",{disabled:n.live,onClick:v=>c(n.id),class:"inline-flex justify-center rounded-md border border-transparent bg-green-100 px-4 py-2 text-sm font-medium text-green-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"}," Post ",8,Re),r("button",{disabled:!n.live,onClick:v=>a(n.id),class:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-green-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"}," Remove ",8,qe)])]))),128))]))}}),Ge={class:"text-xl font-semibold mb-2"},Ue={class:"text-sm mb-2"},Ve=r("strong",null,"Id:",-1),He={class:"text-sm mb-2"},Ye=r("strong",null,"Yield Tonnage:",-1),We={class:"text-sm mb-2"},ze=r("strong",null,"Request Date:",-1),Ke={class:"text-sm mb-2"},Je=r("strong",null,"Price:",-1),Qe={class:"flex justify-end mt-2 space-x-4"},Xe=["disabled","onClick"],Ze=["disabled","onClick"],et=B({__name:"BuyerContentComponent",props:{ads:{type:Array,required:!0}},emits:["post","remove"],setup(e,{emit:u}){const i=u,c=s=>{s&&i("post",s)},a=s=>{s&&i("remove",s)};return(s,d)=>(h(),$("span",null,[(h(!0),$(U,null,K(e.ads,(n,p)=>(h(),$("div",{key:p,class:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-300"},[r("h3",Ge,w(n.type),1),r("p",Ue,[Ve,I(" "+w(n.id),1)]),r("p",He,[Ye,I(" "+w(n.yieldTonnage),1)]),r("p",We,[ze,I(" "+w(n.requestDate),1)]),r("p",Ke,[Je,I(" "+w(n.price),1)]),r("div",Qe,[r("button",{disabled:n.live,onClick:v=>c(n.id),class:"inline-flex justify-center rounded-md border border-transparent bg-green-100 px-4 py-2 text-sm font-medium text-green-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"}," Post ",8,Xe),r("button",{disabled:!n.live,onClick:v=>a(n.id),class:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-green-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"}," Remove ",8,Ze)])]))),128))]))}}),tt={class:"w-full px-2 py-3 sm:px-0"},st=r("h1",{class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight"},"Dashboard",-1),lt={key:0,class:"w-full"},nt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},at={key:1},ot={key:2},rt=r("div",null,"No ads found",-1),ut=[rt],ct=B({__name:"UserBoardView",setup(e){const{profile:u,user:i}=Z(Y()),{modals:c}=Z(pe()),a=Y().ACCOUNT_TYPES,s=()=>{c.value.addad=!0},d=y(0),n={ADS:"Ads",CONTRACTS:"Contracts",MESSAGES:"Messages"},p=y([]),v=y(!1),m=async()=>{var g;v.value=!0,p.value=await fe(`ads/${(g=i.value)==null?void 0:g.uid}/ads`),console.log("ads",p),v.value=!1};ne(d,async(g,O)=>{d.value==0&&await m()}),N(async()=>{console.log("mounted"),await m()});const f=async g=>{console.log("postAd",g),await Y().postNewAd(g)},S=async g=>{console.log("removeAd",g)};return(g,O)=>(h(),$("div",tt,[st,C(u)?(h(),$("div",lt,[L(C($e),{class:"w-full",as:"div"},{default:R(()=>[L(C(we),{class:"w-full flex space-x-1 rounded-xl bg-blue-900/20 p-1"},{default:R(()=>[(h(),$(U,null,K(n,(l,t,o)=>L(C(Se),{as:"template",key:t,onClick:x=>d.value=o},{default:R(({selected:x})=>[r("button",{class:be(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700","ring-white/60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",x?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},w(l),3)]),_:2},1032,["onClick"])),64))]),_:1}),L(C(Ae),null,{default:R(()=>[r("button",{onClick:s,class:"mt-2 mb-2 w-full inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},"Add an ad"),p.value.length>0&&!v.value?(h(),$("div",nt,[C(u).accountType==C(a).SELLER?(h(),ee(Me,{key:0,ads:p.value,onPost:f,onRemove:S},null,8,["ads"])):W("",!0),C(u).accountType==C(a).BUYER?(h(),ee(et,{key:1,ads:p.value,onPost:f,onRemove:S},null,8,["ads"])):W("",!0)])):v.value?(h(),$("div",at,[L(me,{isLoading:v.value},null,8,["isLoading"])])):(h(),$("div",ot,ut))]),_:1})]),_:1})])):W("",!0)]))}});export{ct as default};
